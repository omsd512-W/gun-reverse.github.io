(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const l of u)if(l.type==="childList")for(const y of l.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&s(y)}).observe(document,{childList:!0,subtree:!0});function n(u){const l={};return u.integrity&&(l.integrity=u.integrity),u.referrerPolicy&&(l.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?l.credentials="include":u.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(u){if(u.ep)return;u.ep=!0;const l=n(u);fetch(u.href,l)}})();function bi(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const St={},He=[],re=()=>{},pn=()=>!1,Ds=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),vi=t=>t.startsWith("onUpdate:"),zt=Object.assign,yi=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Cr=Object.prototype.hasOwnProperty,xt=(t,e)=>Cr.call(t,e),yt=Array.isArray,Be=t=>_s(t)==="[object Map]",gn=t=>_s(t)==="[object Set]",vt=t=>typeof t=="function",It=t=>typeof t=="string",xe=t=>typeof t=="symbol",Rt=t=>t!==null&&typeof t=="object",mn=t=>(Rt(t)||vt(t))&&vt(t.then)&&vt(t.catch),bn=Object.prototype.toString,_s=t=>bn.call(t),Er=t=>_s(t).slice(8,-1),vn=t=>_s(t)==="[object Object]",Ai=t=>It(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Je=bi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Os=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},Tr=/-\w/g,Ae=Os(t=>t.replace(Tr,e=>e.slice(1).toUpperCase())),Rr=/\B([A-Z])/g,Ie=Os(t=>t.replace(Rr,"-$1").toLowerCase()),yn=Os(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ws=Os(t=>t?`on${yn(t)}`:""),ye=(t,e)=>!Object.is(t,e),Ys=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},An=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Fr=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _i;const Ns=()=>_i||(_i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Le(t){if(yt(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],u=It(s)?Lr(s):Le(s);if(u)for(const l in u)e[l]=u[l]}return e}else if(It(t)||Rt(t))return t}const Pr=/;(?![^(]*\))/g,kr=/:([^]+)/,Mr=/\/\*[^]*?\*\//g;function Lr(t){const e={};return t.replace(Mr,"").split(Pr).forEach(n=>{if(n){const s=n.split(kr);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function ze(t){let e="";if(It(t))e=t;else if(yt(t))for(let n=0;n<t.length;n++){const s=ze(t[n]);s&&(e+=s+" ")}else if(Rt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Ir="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Dr=bi(Ir);function wn(t){return!!t||t===""}const xn=t=>!!(t&&t.__v_isRef===!0),Ue=t=>It(t)?t:t==null?"":yt(t)||Rt(t)&&(t.toString===bn||!vt(t.toString))?xn(t)?Ue(t.value):JSON.stringify(t,Sn,2):String(t),Sn=(t,e)=>xn(e)?Sn(t,e.value):Be(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,u],l)=>(n[qs(s,l)+" =>"]=u,n),{})}:gn(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>qs(n))}:xe(e)?qs(e):Rt(e)&&!yt(e)&&!vn(e)?String(e):e,qs=(t,e="")=>{var n;return xe(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let qt;class _r{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=qt,!e&&qt&&(this.index=(qt.scopes||(qt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=qt;try{return qt=this,e()}finally{qt=n}}}on(){++this._on===1&&(this.prevScope=qt,qt=this)}off(){this._on>0&&--this._on===0&&(qt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const u=this.parent.scopes.pop();u&&u!==this&&(this.parent.scopes[this.index]=u,u.index=this.index)}this.parent=void 0}}}function Or(){return qt}let Tt;const Ks=new WeakSet;class Cn{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,qt&&qt.active&&qt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ks.has(this)&&(Ks.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Tn(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Oi(this),Rn(this);const e=Tt,n=Zt;Tt=this,Zt=!0;try{return this.fn()}finally{Fn(this),Tt=e,Zt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Si(e);this.deps=this.depsTail=void 0,Oi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ks.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ni(this)&&this.run()}get dirty(){return ni(this)}}let En=0,Qe,Ze;function Tn(t,e=!1){if(t.flags|=8,e){t.next=Ze,Ze=t;return}t.next=Qe,Qe=t}function wi(){En++}function xi(){if(--En>0)return;if(Ze){let e=Ze;for(Ze=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Qe;){let e=Qe;for(Qe=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Rn(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Fn(t){let e,n=t.depsTail,s=n;for(;s;){const u=s.prevDep;s.version===-1?(s===n&&(n=u),Si(s),Nr(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=u}t.deps=e,t.depsTail=n}function ni(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Pn(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Pn(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===rs)||(t.globalVersion=rs,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!ni(t))))return;t.flags|=2;const e=t.dep,n=Tt,s=Zt;Tt=t,Zt=!0;try{Rn(t);const u=t.fn(t._value);(e.version===0||ye(u,t._value))&&(t.flags|=128,t._value=u,e.version++)}catch(u){throw e.version++,u}finally{Tt=n,Zt=s,Fn(t),t.flags&=-3}}function Si(t,e=!1){const{dep:n,prevSub:s,nextSub:u}=t;if(s&&(s.nextSub=u,t.prevSub=void 0),u&&(u.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let l=n.computed.deps;l;l=l.nextDep)Si(l,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Nr(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Zt=!0;const kn=[];function de(){kn.push(Zt),Zt=!1}function ue(){const t=kn.pop();Zt=t===void 0?!0:t}function Oi(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Tt;Tt=void 0;try{e()}finally{Tt=n}}}let rs=0;class Hr{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ci{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Tt||!Zt||Tt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Tt)n=this.activeLink=new Hr(Tt,this),Tt.deps?(n.prevDep=Tt.depsTail,Tt.depsTail.nextDep=n,Tt.depsTail=n):Tt.deps=Tt.depsTail=n,Mn(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Tt.depsTail,n.nextDep=void 0,Tt.depsTail.nextDep=n,Tt.depsTail=n,Tt.deps===n&&(Tt.deps=s)}return n}trigger(e){this.version++,rs++,this.notify(e)}notify(e){wi();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{xi()}}}function Mn(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Mn(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ri=new WeakMap,Pe=Symbol(""),oi=Symbol(""),os=Symbol("");function $t(t,e,n){if(Zt&&Tt){let s=ri.get(t);s||ri.set(t,s=new Map);let u=s.get(n);u||(s.set(n,u=new Ci),u.map=s,u.key=n),u.track()}}function ce(t,e,n,s,u,l){const y=ri.get(t);if(!y){rs++;return}const v=E=>{E&&E.trigger()};if(wi(),e==="clear")y.forEach(v);else{const E=yt(t),C=E&&Ai(n);if(E&&n==="length"){const m=Number(s);y.forEach((p,g)=>{(g==="length"||g===os||!xe(g)&&g>=m)&&v(p)})}else switch((n!==void 0||y.has(void 0))&&v(y.get(n)),C&&v(y.get(os)),e){case"add":E?C&&v(y.get("length")):(v(y.get(Pe)),Be(t)&&v(y.get(oi)));break;case"delete":E||(v(y.get(Pe)),Be(t)&&v(y.get(oi)));break;case"set":Be(t)&&v(y.get(Pe));break}}xi()}function Oe(t){const e=wt(t);return e===t?e:($t(e,"iterate",os),Qt(t)?e:e.map(ee))}function Hs(t){return $t(t=wt(t),"iterate",os),t}function me(t,e){return fe(t)?ke(t)?je(ee(e)):je(e):ee(e)}const Br={__proto__:null,[Symbol.iterator](){return Js(this,Symbol.iterator,t=>me(this,t))},concat(...t){return Oe(this).concat(...t.map(e=>yt(e)?Oe(e):e))},entries(){return Js(this,"entries",t=>(t[1]=me(this,t[1]),t))},every(t,e){return ae(this,"every",t,e,void 0,arguments)},filter(t,e){return ae(this,"filter",t,e,n=>n.map(s=>me(this,s)),arguments)},find(t,e){return ae(this,"find",t,e,n=>me(this,n),arguments)},findIndex(t,e){return ae(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ae(this,"findLast",t,e,n=>me(this,n),arguments)},findLastIndex(t,e){return ae(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ae(this,"forEach",t,e,void 0,arguments)},includes(...t){return Qs(this,"includes",t)},indexOf(...t){return Qs(this,"indexOf",t)},join(t){return Oe(this).join(t)},lastIndexOf(...t){return Qs(this,"lastIndexOf",t)},map(t,e){return ae(this,"map",t,e,void 0,arguments)},pop(){return We(this,"pop")},push(...t){return We(this,"push",t)},reduce(t,...e){return Ni(this,"reduce",t,e)},reduceRight(t,...e){return Ni(this,"reduceRight",t,e)},shift(){return We(this,"shift")},some(t,e){return ae(this,"some",t,e,void 0,arguments)},splice(...t){return We(this,"splice",t)},toReversed(){return Oe(this).toReversed()},toSorted(t){return Oe(this).toSorted(t)},toSpliced(...t){return Oe(this).toSpliced(...t)},unshift(...t){return We(this,"unshift",t)},values(){return Js(this,"values",t=>me(this,t))}};function Js(t,e,n){const s=Hs(t),u=s[e]();return s!==t&&!Qt(t)&&(u._next=u.next,u.next=()=>{const l=u._next();return l.done||(l.value=n(l.value)),l}),u}const $r=Array.prototype;function ae(t,e,n,s,u,l){const y=Hs(t),v=y!==t&&!Qt(t),E=y[e];if(E!==$r[e]){const p=E.apply(t,l);return v?ee(p):p}let C=n;y!==t&&(v?C=function(p,g){return n.call(this,me(t,p),g,t)}:n.length>2&&(C=function(p,g){return n.call(this,p,g,t)}));const m=E.call(y,C,s);return v&&u?u(m):m}function Ni(t,e,n,s){const u=Hs(t);let l=n;return u!==t&&(Qt(t)?n.length>3&&(l=function(y,v,E){return n.call(this,y,v,E,t)}):l=function(y,v,E){return n.call(this,y,me(t,v),E,t)}),u[e](l,...s)}function Qs(t,e,n){const s=wt(t);$t(s,"iterate",os);const u=s[e](...n);return(u===-1||u===!1)&&Fi(n[0])?(n[0]=wt(n[0]),s[e](...n)):u}function We(t,e,n=[]){de(),wi();const s=wt(t)[e].apply(t,n);return xi(),ue(),s}const Vr=bi("__proto__,__v_isRef,__isVue"),Ln=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(xe));function zr(t){xe(t)||(t=String(t));const e=wt(this);return $t(e,"has",t),e.hasOwnProperty(t)}class In{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const u=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!u;if(n==="__v_isReadonly")return u;if(n==="__v_isShallow")return l;if(n==="__v_raw")return s===(u?l?Qr:Nn:l?On:_n).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const y=yt(e);if(!u){let E;if(y&&(E=Br[n]))return E;if(n==="hasOwnProperty")return zr}const v=Reflect.get(e,n,Vt(e)?e:s);if((xe(n)?Ln.has(n):Vr(n))||(u||$t(e,"get",n),l))return v;if(Vt(v)){const E=y&&Ai(n)?v:v.value;return u&&Rt(E)?li(E):E}return Rt(v)?u?li(v):Ti(v):v}}class Dn extends In{constructor(e=!1){super(!1,e)}set(e,n,s,u){let l=e[n];const y=yt(e)&&Ai(n);if(!this._isShallow){const C=fe(l);if(!Qt(s)&&!fe(s)&&(l=wt(l),s=wt(s)),!y&&Vt(l)&&!Vt(s))return C||(l.value=s),!0}const v=y?Number(n)<e.length:xt(e,n),E=Reflect.set(e,n,s,Vt(e)?e:u);return e===wt(u)&&(v?ye(s,l)&&ce(e,"set",n,s):ce(e,"add",n,s)),E}deleteProperty(e,n){const s=xt(e,n);e[n];const u=Reflect.deleteProperty(e,n);return u&&s&&ce(e,"delete",n,void 0),u}has(e,n){const s=Reflect.has(e,n);return(!xe(n)||!Ln.has(n))&&$t(e,"has",n),s}ownKeys(e){return $t(e,"iterate",yt(e)?"length":Pe),Reflect.ownKeys(e)}}class Ur extends In{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const jr=new Dn,Gr=new Ur,Xr=new Dn(!0);const ai=t=>t,ms=t=>Reflect.getPrototypeOf(t);function Wr(t,e,n){return function(...s){const u=this.__v_raw,l=wt(u),y=Be(l),v=t==="entries"||t===Symbol.iterator&&y,E=t==="keys"&&y,C=u[t](...s),m=n?ai:e?je:ee;return!e&&$t(l,"iterate",E?oi:Pe),{next(){const{value:p,done:g}=C.next();return g?{value:p,done:g}:{value:v?[m(p[0]),m(p[1])]:m(p),done:g}},[Symbol.iterator](){return this}}}}function bs(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Yr(t,e){const n={get(u){const l=this.__v_raw,y=wt(l),v=wt(u);t||(ye(u,v)&&$t(y,"get",u),$t(y,"get",v));const{has:E}=ms(y),C=e?ai:t?je:ee;if(E.call(y,u))return C(l.get(u));if(E.call(y,v))return C(l.get(v));l!==y&&l.get(u)},get size(){const u=this.__v_raw;return!t&&$t(wt(u),"iterate",Pe),u.size},has(u){const l=this.__v_raw,y=wt(l),v=wt(u);return t||(ye(u,v)&&$t(y,"has",u),$t(y,"has",v)),u===v?l.has(u):l.has(u)||l.has(v)},forEach(u,l){const y=this,v=y.__v_raw,E=wt(v),C=e?ai:t?je:ee;return!t&&$t(E,"iterate",Pe),v.forEach((m,p)=>u.call(l,C(m),C(p),y))}};return zt(n,t?{add:bs("add"),set:bs("set"),delete:bs("delete"),clear:bs("clear")}:{add(u){!e&&!Qt(u)&&!fe(u)&&(u=wt(u));const l=wt(this);return ms(l).has.call(l,u)||(l.add(u),ce(l,"add",u,u)),this},set(u,l){!e&&!Qt(l)&&!fe(l)&&(l=wt(l));const y=wt(this),{has:v,get:E}=ms(y);let C=v.call(y,u);C||(u=wt(u),C=v.call(y,u));const m=E.call(y,u);return y.set(u,l),C?ye(l,m)&&ce(y,"set",u,l):ce(y,"add",u,l),this},delete(u){const l=wt(this),{has:y,get:v}=ms(l);let E=y.call(l,u);E||(u=wt(u),E=y.call(l,u)),v&&v.call(l,u);const C=l.delete(u);return E&&ce(l,"delete",u,void 0),C},clear(){const u=wt(this),l=u.size!==0,y=u.clear();return l&&ce(u,"clear",void 0,void 0),y}}),["keys","values","entries",Symbol.iterator].forEach(u=>{n[u]=Wr(u,t,e)}),n}function Ei(t,e){const n=Yr(t,e);return(s,u,l)=>u==="__v_isReactive"?!t:u==="__v_isReadonly"?t:u==="__v_raw"?s:Reflect.get(xt(n,u)&&u in s?n:s,u,l)}const qr={get:Ei(!1,!1)},Kr={get:Ei(!1,!0)},Jr={get:Ei(!0,!1)};const _n=new WeakMap,On=new WeakMap,Nn=new WeakMap,Qr=new WeakMap;function Zr(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function to(t){return t.__v_skip||!Object.isExtensible(t)?0:Zr(Er(t))}function Ti(t){return fe(t)?t:Ri(t,!1,jr,qr,_n)}function eo(t){return Ri(t,!1,Xr,Kr,On)}function li(t){return Ri(t,!0,Gr,Jr,Nn)}function Ri(t,e,n,s,u){if(!Rt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=to(t);if(l===0)return t;const y=u.get(t);if(y)return y;const v=new Proxy(t,l===2?s:n);return u.set(t,v),v}function ke(t){return fe(t)?ke(t.__v_raw):!!(t&&t.__v_isReactive)}function fe(t){return!!(t&&t.__v_isReadonly)}function Qt(t){return!!(t&&t.__v_isShallow)}function Fi(t){return t?!!t.__v_raw:!1}function wt(t){const e=t&&t.__v_raw;return e?wt(e):t}function Hn(t){return!xt(t,"__v_skip")&&Object.isExtensible(t)&&An(t,"__v_skip",!0),t}const ee=t=>Rt(t)?Ti(t):t,je=t=>Rt(t)?li(t):t;function Vt(t){return t?t.__v_isRef===!0:!1}function Ot(t){return so(t,!1)}function so(t,e){return Vt(t)?t:new io(t,e)}class io{constructor(e,n){this.dep=new Ci,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:wt(e),this._value=n?e:ee(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Qt(e)||fe(e);e=s?e:wt(e),ye(e,n)&&(this._rawValue=e,this._value=s?e:ee(e),this.dep.trigger())}}function no(t){return Vt(t)?t.value:t}const ro={get:(t,e,n)=>e==="__v_raw"?t:no(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const u=t[e];return Vt(u)&&!Vt(n)?(u.value=n,!0):Reflect.set(t,e,n,s)}};function Bn(t){return ke(t)?t:new Proxy(t,ro)}class oo{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Ci(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=rs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Tt!==this)return Tn(this,!0),!0}get value(){const e=this.dep.track();return Pn(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ao(t,e,n=!1){let s,u;return vt(t)?s=t:(s=t.get,u=t.set),new oo(s,u,n)}const vs={},Ts=new WeakMap;let Re;function lo(t,e=!1,n=Re){if(n){let s=Ts.get(n);s||Ts.set(n,s=[]),s.push(t)}}function co(t,e,n=St){const{immediate:s,deep:u,once:l,scheduler:y,augmentJob:v,call:E}=n,C=T=>u?T:Qt(T)||u===!1||u===0?he(T,1):he(T);let m,p,g,A,h=!1,S=!1;if(Vt(t)?(p=()=>t.value,h=Qt(t)):ke(t)?(p=()=>C(t),h=!0):yt(t)?(S=!0,h=t.some(T=>ke(T)||Qt(T)),p=()=>t.map(T=>{if(Vt(T))return T.value;if(ke(T))return C(T);if(vt(T))return E?E(T,2):T()})):vt(t)?e?p=E?()=>E(t,2):t:p=()=>{if(g){de();try{g()}finally{ue()}}const T=Re;Re=m;try{return E?E(t,3,[A]):t(A)}finally{Re=T}}:p=re,e&&u){const T=p,N=u===!0?1/0:u;p=()=>he(T(),N)}const i=Or(),f=()=>{m.stop(),i&&i.active&&yi(i.effects,m)};if(l&&e){const T=e;e=(...N)=>{T(...N),f()}}let w=S?new Array(t.length).fill(vs):vs;const P=T=>{if(!(!(m.flags&1)||!m.dirty&&!T))if(e){const N=m.run();if(u||h||(S?N.some((O,B)=>ye(O,w[B])):ye(N,w))){g&&g();const O=Re;Re=m;try{const B=[N,w===vs?void 0:S&&w[0]===vs?[]:w,A];w=N,E?E(e,3,B):e(...B)}finally{Re=O}}}else m.run()};return v&&v(P),m=new Cn(p),m.scheduler=y?()=>y(P,!1):P,A=T=>lo(T,!1,m),g=m.onStop=()=>{const T=Ts.get(m);if(T){if(E)E(T,4);else for(const N of T)N();Ts.delete(m)}},e?s?P(!0):w=m.run():y?y(P.bind(null,!0),!0):m.run(),f.pause=m.pause.bind(m),f.resume=m.resume.bind(m),f.stop=f,f}function he(t,e=1/0,n){if(e<=0||!Rt(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Vt(t))he(t.value,e,n);else if(yt(t))for(let s=0;s<t.length;s++)he(t[s],e,n);else if(gn(t)||Be(t))t.forEach(s=>{he(s,e,n)});else if(vn(t)){for(const s in t)he(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&he(t[s],e,n)}return t}function hs(t,e,n,s){try{return s?t(...s):t()}catch(u){Bs(u,e,n)}}function oe(t,e,n,s){if(vt(t)){const u=hs(t,e,n,s);return u&&mn(u)&&u.catch(l=>{Bs(l,e,n)}),u}if(yt(t)){const u=[];for(let l=0;l<t.length;l++)u.push(oe(t[l],e,n,s));return u}}function Bs(t,e,n,s=!0){const u=e?e.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:y}=e&&e.appContext.config||St;if(e){let v=e.parent;const E=e.proxy,C=`https://vuejs.org/error-reference/#runtime-${n}`;for(;v;){const m=v.ec;if(m){for(let p=0;p<m.length;p++)if(m[p](t,E,C)===!1)return}v=v.parent}if(l){de(),hs(l,null,10,[t,E,C]),ue();return}}ho(t,n,u,s,y)}function ho(t,e,n,s=!0,u=!1){if(u)throw t;console.error(t)}const Xt=[];let ie=-1;const $e=[];let be=null,Ne=0;const $n=Promise.resolve();let Rs=null;function Vn(t){const e=Rs||$n;return t?e.then(this?t.bind(this):t):e}function uo(t){let e=ie+1,n=Xt.length;for(;e<n;){const s=e+n>>>1,u=Xt[s],l=as(u);l<t||l===t&&u.flags&2?e=s+1:n=s}return e}function Pi(t){if(!(t.flags&1)){const e=as(t),n=Xt[Xt.length-1];!n||!(t.flags&2)&&e>=as(n)?Xt.push(t):Xt.splice(uo(e),0,t),t.flags|=1,zn()}}function zn(){Rs||(Rs=$n.then(jn))}function fo(t){yt(t)?$e.push(...t):be&&t.id===-1?be.splice(Ne+1,0,t):t.flags&1||($e.push(t),t.flags|=1),zn()}function Hi(t,e,n=ie+1){for(;n<Xt.length;n++){const s=Xt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Xt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Un(t){if($e.length){const e=[...new Set($e)].sort((n,s)=>as(n)-as(s));if($e.length=0,be){be.push(...e);return}for(be=e,Ne=0;Ne<be.length;Ne++){const n=be[Ne];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}be=null,Ne=0}}const as=t=>t.id==null?t.flags&2?-1:1/0:t.id;function jn(t){try{for(ie=0;ie<Xt.length;ie++){const e=Xt[ie];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),hs(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ie<Xt.length;ie++){const e=Xt[ie];e&&(e.flags&=-2)}ie=-1,Xt.length=0,Un(),Rs=null,(Xt.length||$e.length)&&jn()}}let Jt=null,Gn=null;function Fs(t){const e=Jt;return Jt=t,Gn=t&&t.type.__scopeId||null,e}function po(t,e=Jt,n){if(!e||t._n)return t;const s=(...u)=>{s._d&&Ji(-1);const l=Fs(e);let y;try{y=t(...u)}finally{Fs(l),s._d&&Ji(1)}return y};return s._n=!0,s._c=!0,s._d=!0,s}function go(t,e){if(Jt===null)return t;const n=Gs(Jt),s=t.dirs||(t.dirs=[]);for(let u=0;u<e.length;u++){let[l,y,v,E=St]=e[u];l&&(vt(l)&&(l={mounted:l,updated:l}),l.deep&&he(y),s.push({dir:l,instance:n,value:y,oldValue:void 0,arg:v,modifiers:E}))}return t}function Ce(t,e,n,s){const u=t.dirs,l=e&&e.dirs;for(let y=0;y<u.length;y++){const v=u[y];l&&(v.oldValue=l[y].value);let E=v.dir[s];E&&(de(),oe(E,n,8,[t.el,v,t,e]),ue())}}function mo(t,e){if(Wt){let n=Wt.provides;const s=Wt.parent&&Wt.parent.provides;s===n&&(n=Wt.provides=Object.create(s)),n[t]=e}}function ws(t,e,n=!1){const s=ga();if(s||Ve){let u=Ve?Ve._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(u&&t in u)return u[t];if(arguments.length>1)return n&&vt(e)?e.call(s&&s.proxy):e}}const bo=Symbol.for("v-scx"),vo=()=>ws(bo);function xs(t,e,n){return Xn(t,e,n)}function Xn(t,e,n=St){const{immediate:s,deep:u,flush:l,once:y}=n,v=zt({},n),E=e&&s||!e&&l!=="post";let C;if(cs){if(l==="sync"){const A=vo();C=A.__watcherHandles||(A.__watcherHandles=[])}else if(!E){const A=()=>{};return A.stop=re,A.resume=re,A.pause=re,A}}const m=Wt;v.call=(A,h,S)=>oe(A,m,h,S);let p=!1;l==="post"?v.scheduler=A=>{Gt(A,m&&m.suspense)}:l!=="sync"&&(p=!0,v.scheduler=(A,h)=>{h?A():Pi(A)}),v.augmentJob=A=>{e&&(A.flags|=4),p&&(A.flags|=2,m&&(A.id=m.uid,A.i=m))};const g=co(t,e,v);return cs&&(C?C.push(g):E&&g()),g}function yo(t,e,n){const s=this.proxy,u=It(t)?t.includes(".")?Wn(s,t):()=>s[t]:t.bind(s,s);let l;vt(e)?l=e:(l=e.handler,n=e);const y=us(this),v=Xn(u,l.bind(s),n);return y(),v}function Wn(t,e){const n=e.split(".");return()=>{let s=t;for(let u=0;u<n.length&&s;u++)s=s[n[u]];return s}}const Yn=Symbol("_vte"),Ao=t=>t.__isTeleport,ts=t=>t&&(t.disabled||t.disabled===""),Bi=t=>t&&(t.defer||t.defer===""),$i=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Vi=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,ci=(t,e)=>{const n=t&&t.to;return It(n)?e?e(n):null:n},qn={name:"Teleport",__isTeleport:!0,process(t,e,n,s,u,l,y,v,E,C){const{mc:m,pc:p,pbc:g,o:{insert:A,querySelector:h,createText:S,createComment:i}}=C,f=ts(e.props);let{shapeFlag:w,children:P,dynamicChildren:T}=e;if(t==null){const N=e.el=S(""),O=e.anchor=S("");A(N,n,s),A(O,n,s);const B=(j,X)=>{w&16&&m(P,j,X,u,l,y,v,E)},z=()=>{const j=e.target=ci(e.props,h),X=Kn(j,e,S,A);j&&(y!=="svg"&&$i(j)?y="svg":y!=="mathml"&&Vi(j)&&(y="mathml"),u&&u.isCE&&(u.ce._teleportTargets||(u.ce._teleportTargets=new Set)).add(j),f||(B(j,X),Ss(e,!1)))};f&&(B(n,O),Ss(e,!0)),Bi(e.props)?(e.el.__isMounted=!1,Gt(()=>{z(),delete e.el.__isMounted},l)):z()}else{if(Bi(e.props)&&t.el.__isMounted===!1){Gt(()=>{qn.process(t,e,n,s,u,l,y,v,E,C)},l);return}e.el=t.el,e.targetStart=t.targetStart;const N=e.anchor=t.anchor,O=e.target=t.target,B=e.targetAnchor=t.targetAnchor,z=ts(t.props),j=z?n:O,X=z?N:B;if(y==="svg"||$i(O)?y="svg":(y==="mathml"||Vi(O))&&(y="mathml"),T?(g(t.dynamicChildren,T,j,u,l,y,v),Ii(t,e,!0)):E||p(t,e,j,X,u,l,y,v,!1),f)z?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):ys(e,n,N,C,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const Y=e.target=ci(e.props,h);Y&&ys(e,Y,null,C,0)}else z&&ys(e,O,B,C,1);Ss(e,f)}},remove(t,e,n,{um:s,o:{remove:u}},l){const{shapeFlag:y,children:v,anchor:E,targetStart:C,targetAnchor:m,target:p,props:g}=t;if(p&&(u(C),u(m)),l&&u(E),y&16){const A=l||!ts(g);for(let h=0;h<v.length;h++){const S=v[h];s(S,e,n,A,!!S.dynamicChildren)}}},move:ys,hydrate:wo};function ys(t,e,n,{o:{insert:s},m:u},l=2){l===0&&s(t.targetAnchor,e,n);const{el:y,anchor:v,shapeFlag:E,children:C,props:m}=t,p=l===2;if(p&&s(y,e,n),(!p||ts(m))&&E&16)for(let g=0;g<C.length;g++)u(C[g],e,n,2);p&&s(v,e,n)}function wo(t,e,n,s,u,l,{o:{nextSibling:y,parentNode:v,querySelector:E,insert:C,createText:m}},p){function g(S,i,f,w){i.anchor=p(y(S),i,v(S),n,s,u,l),i.targetStart=f,i.targetAnchor=w}const A=e.target=ci(e.props,E),h=ts(e.props);if(A){const S=A._lpa||A.firstChild;if(e.shapeFlag&16)if(h)g(t,e,S,S&&y(S));else{e.anchor=y(t);let i=S;for(;i;){if(i&&i.nodeType===8){if(i.data==="teleport start anchor")e.targetStart=i;else if(i.data==="teleport anchor"){e.targetAnchor=i,A._lpa=e.targetAnchor&&y(e.targetAnchor);break}}i=y(i)}e.targetAnchor||Kn(A,e,m,C),p(S&&y(S),e,A,n,s,u,l)}Ss(e,h)}else h&&e.shapeFlag&16&&g(t,e,t,y(t));return e.anchor&&y(e.anchor)}const xo=qn;function Ss(t,e){const n=t.ctx;if(n&&n.ut){let s,u;for(e?(s=t.el,u=t.anchor):(s=t.targetStart,u=t.targetAnchor);s&&s!==u;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function Kn(t,e,n,s){const u=e.targetStart=n(""),l=e.targetAnchor=n("");return u[Yn]=l,t&&(s(u,t),s(l,t)),l}const So=Symbol("_leaveCb");function ki(t,e){t.shapeFlag&6&&t.component?(t.transition=e,ki(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function $s(t,e){return vt(t)?zt({name:t.name},e,{setup:t}):t}function Jn(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Ps=new WeakMap;function es(t,e,n,s,u=!1){if(yt(t)){t.forEach((h,S)=>es(h,e&&(yt(e)?e[S]:e),n,s,u));return}if(ss(s)&&!u){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&es(t,e,n,s.component.subTree);return}const l=s.shapeFlag&4?Gs(s.component):s.el,y=u?null:l,{i:v,r:E}=t,C=e&&e.r,m=v.refs===St?v.refs={}:v.refs,p=v.setupState,g=wt(p),A=p===St?pn:h=>xt(g,h);if(C!=null&&C!==E){if(zi(e),It(C))m[C]=null,A(C)&&(p[C]=null);else if(Vt(C)){C.value=null;const h=e;h.k&&(m[h.k]=null)}}if(vt(E))hs(E,v,12,[y,m]);else{const h=It(E),S=Vt(E);if(h||S){const i=()=>{if(t.f){const f=h?A(E)?p[E]:m[E]:E.value;if(u)yt(f)&&yi(f,l);else if(yt(f))f.includes(l)||f.push(l);else if(h)m[E]=[l],A(E)&&(p[E]=m[E]);else{const w=[l];E.value=w,t.k&&(m[t.k]=w)}}else h?(m[E]=y,A(E)&&(p[E]=y)):S&&(E.value=y,t.k&&(m[t.k]=y))};if(y){const f=()=>{i(),Ps.delete(t)};f.id=-1,Ps.set(t,f),Gt(f,n)}else zi(t),i()}}}function zi(t){const e=Ps.get(t);e&&(e.flags|=8,Ps.delete(t))}Ns().requestIdleCallback;Ns().cancelIdleCallback;const ss=t=>!!t.type.__asyncLoader,Qn=t=>t.type.__isKeepAlive;function Co(t,e){Zn(t,"a",e)}function Eo(t,e){Zn(t,"da",e)}function Zn(t,e,n=Wt){const s=t.__wdc||(t.__wdc=()=>{let u=n;for(;u;){if(u.isDeactivated)return;u=u.parent}return t()});if(Vs(e,s,n),n){let u=n.parent;for(;u&&u.parent;)Qn(u.parent.vnode)&&To(s,e,n,u),u=u.parent}}function To(t,e,n,s){const u=Vs(e,t,s,!0);ds(()=>{yi(s[e],u)},n)}function Vs(t,e,n=Wt,s=!1){if(n){const u=n[t]||(n[t]=[]),l=e.__weh||(e.__weh=(...y)=>{de();const v=us(n),E=oe(e,n,t,y);return v(),ue(),E});return s?u.unshift(l):u.push(l),l}}const pe=t=>(e,n=Wt)=>{(!cs||t==="sp")&&Vs(t,(...s)=>e(...s),n)},Ro=pe("bm"),zs=pe("m"),Fo=pe("bu"),Po=pe("u"),ko=pe("bum"),ds=pe("um"),Mo=pe("sp"),Lo=pe("rtg"),Io=pe("rtc");function Do(t,e=Wt){Vs("ec",t,e)}const _o=Symbol.for("v-ndc");function As(t,e,n,s){let u;const l=n,y=yt(t);if(y||It(t)){const v=y&&ke(t);let E=!1,C=!1;v&&(E=!Qt(t),C=fe(t),t=Hs(t)),u=new Array(t.length);for(let m=0,p=t.length;m<p;m++)u[m]=e(E?C?je(ee(t[m])):ee(t[m]):t[m],m,void 0,l)}else if(typeof t=="number"){u=new Array(t);for(let v=0;v<t;v++)u[v]=e(v+1,v,void 0,l)}else if(Rt(t))if(t[Symbol.iterator])u=Array.from(t,(v,E)=>e(v,E,void 0,l));else{const v=Object.keys(t);u=new Array(v.length);for(let E=0,C=v.length;E<C;E++){const m=v[E];u[E]=e(t[m],m,E,l)}}else u=[];return u}const hi=t=>t?yr(t)?Gs(t):hi(t.parent):null,is=zt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>hi(t.parent),$root:t=>hi(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>er(t),$forceUpdate:t=>t.f||(t.f=()=>{Pi(t.update)}),$nextTick:t=>t.n||(t.n=Vn.bind(t.proxy)),$watch:t=>yo.bind(t)}),Zs=(t,e)=>t!==St&&!t.__isScriptSetup&&xt(t,e),Oo={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:u,props:l,accessCache:y,type:v,appContext:E}=t;if(e[0]!=="$"){const g=y[e];if(g!==void 0)switch(g){case 1:return s[e];case 2:return u[e];case 4:return n[e];case 3:return l[e]}else{if(Zs(s,e))return y[e]=1,s[e];if(u!==St&&xt(u,e))return y[e]=2,u[e];if(xt(l,e))return y[e]=3,l[e];if(n!==St&&xt(n,e))return y[e]=4,n[e];di&&(y[e]=0)}}const C=is[e];let m,p;if(C)return e==="$attrs"&&$t(t.attrs,"get",""),C(t);if((m=v.__cssModules)&&(m=m[e]))return m;if(n!==St&&xt(n,e))return y[e]=4,n[e];if(p=E.config.globalProperties,xt(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:u,ctx:l}=t;return Zs(u,e)?(u[e]=n,!0):s!==St&&xt(s,e)?(s[e]=n,!0):xt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:u,props:l,type:y}},v){let E;return!!(n[v]||t!==St&&v[0]!=="$"&&xt(t,v)||Zs(e,v)||xt(l,v)||xt(s,v)||xt(is,v)||xt(u.config.globalProperties,v)||(E=y.__cssModules)&&E[v])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:xt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ui(t){return yt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let di=!0;function No(t){const e=er(t),n=t.proxy,s=t.ctx;di=!1,e.beforeCreate&&ji(e.beforeCreate,t,"bc");const{data:u,computed:l,methods:y,watch:v,provide:E,inject:C,created:m,beforeMount:p,mounted:g,beforeUpdate:A,updated:h,activated:S,deactivated:i,beforeDestroy:f,beforeUnmount:w,destroyed:P,unmounted:T,render:N,renderTracked:O,renderTriggered:B,errorCaptured:z,serverPrefetch:j,expose:X,inheritAttrs:Y,components:Z,directives:nt,filters:q}=e;if(C&&Ho(C,s,null),y)for(const K in y){const Q=y[K];vt(Q)&&(s[K]=Q.bind(n))}if(u){const K=u.call(n,n);Rt(K)&&(t.data=Ti(K))}if(di=!0,l)for(const K in l){const Q=l[K],et=vt(Q)?Q.bind(n,n):vt(Q.get)?Q.get.bind(n,n):re,ht=!vt(Q)&&vt(Q.set)?Q.set.bind(n):re,lt=Ls({get:et,set:ht});Object.defineProperty(s,K,{enumerable:!0,configurable:!0,get:()=>lt.value,set:at=>lt.value=at})}if(v)for(const K in v)tr(v[K],s,n,K);if(E){const K=vt(E)?E.call(n):E;Reflect.ownKeys(K).forEach(Q=>{mo(Q,K[Q])})}m&&ji(m,t,"c");function U(K,Q){yt(Q)?Q.forEach(et=>K(et.bind(n))):Q&&K(Q.bind(n))}if(U(Ro,p),U(zs,g),U(Fo,A),U(Po,h),U(Co,S),U(Eo,i),U(Do,z),U(Io,O),U(Lo,B),U(ko,w),U(ds,T),U(Mo,j),yt(X))if(X.length){const K=t.exposed||(t.exposed={});X.forEach(Q=>{Object.defineProperty(K,Q,{get:()=>n[Q],set:et=>n[Q]=et,enumerable:!0})})}else t.exposed||(t.exposed={});N&&t.render===re&&(t.render=N),Y!=null&&(t.inheritAttrs=Y),Z&&(t.components=Z),nt&&(t.directives=nt),j&&Jn(t)}function Ho(t,e,n=re){yt(t)&&(t=ui(t));for(const s in t){const u=t[s];let l;Rt(u)?"default"in u?l=ws(u.from||s,u.default,!0):l=ws(u.from||s):l=ws(u),Vt(l)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>l.value,set:y=>l.value=y}):e[s]=l}}function ji(t,e,n){oe(yt(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function tr(t,e,n,s){let u=s.includes(".")?Wn(n,s):()=>n[s];if(It(t)){const l=e[t];vt(l)&&xs(u,l)}else if(vt(t))xs(u,t.bind(n));else if(Rt(t))if(yt(t))t.forEach(l=>tr(l,e,n,s));else{const l=vt(t.handler)?t.handler.bind(n):e[t.handler];vt(l)&&xs(u,l,t)}}function er(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:u,optionsCache:l,config:{optionMergeStrategies:y}}=t.appContext,v=l.get(e);let E;return v?E=v:!u.length&&!n&&!s?E=e:(E={},u.length&&u.forEach(C=>ks(E,C,y,!0)),ks(E,e,y)),Rt(e)&&l.set(e,E),E}function ks(t,e,n,s=!1){const{mixins:u,extends:l}=e;l&&ks(t,l,n,!0),u&&u.forEach(y=>ks(t,y,n,!0));for(const y in e)if(!(s&&y==="expose")){const v=Bo[y]||n&&n[y];t[y]=v?v(t[y],e[y]):e[y]}return t}const Bo={data:Gi,props:Xi,emits:Xi,methods:Ke,computed:Ke,beforeCreate:jt,created:jt,beforeMount:jt,mounted:jt,beforeUpdate:jt,updated:jt,beforeDestroy:jt,beforeUnmount:jt,destroyed:jt,unmounted:jt,activated:jt,deactivated:jt,errorCaptured:jt,serverPrefetch:jt,components:Ke,directives:Ke,watch:Vo,provide:Gi,inject:$o};function Gi(t,e){return e?t?function(){return zt(vt(t)?t.call(this,this):t,vt(e)?e.call(this,this):e)}:e:t}function $o(t,e){return Ke(ui(t),ui(e))}function ui(t){if(yt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function jt(t,e){return t?[...new Set([].concat(t,e))]:e}function Ke(t,e){return t?zt(Object.create(null),t,e):e}function Xi(t,e){return t?yt(t)&&yt(e)?[...new Set([...t,...e])]:zt(Object.create(null),Ui(t),Ui(e??{})):e}function Vo(t,e){if(!t)return e;if(!e)return t;const n=zt(Object.create(null),t);for(const s in e)n[s]=jt(t[s],e[s]);return n}function sr(){return{app:null,config:{isNativeTag:pn,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zo=0;function Uo(t,e){return function(s,u=null){vt(s)||(s=zt({},s)),u!=null&&!Rt(u)&&(u=null);const l=sr(),y=new WeakSet,v=[];let E=!1;const C=l.app={_uid:zo++,_component:s,_props:u,_container:null,_context:l,_instance:null,version:wa,get config(){return l.config},set config(m){},use(m,...p){return y.has(m)||(m&&vt(m.install)?(y.add(m),m.install(C,...p)):vt(m)&&(y.add(m),m(C,...p))),C},mixin(m){return l.mixins.includes(m)||l.mixins.push(m),C},component(m,p){return p?(l.components[m]=p,C):l.components[m]},directive(m,p){return p?(l.directives[m]=p,C):l.directives[m]},mount(m,p,g){if(!E){const A=C._ceVNode||te(s,u);return A.appContext=l,g===!0?g="svg":g===!1&&(g=void 0),t(A,m,g),E=!0,C._container=m,m.__vue_app__=C,Gs(A.component)}},onUnmount(m){v.push(m)},unmount(){E&&(oe(v,C._instance,16),t(null,C._container),delete C._container.__vue_app__)},provide(m,p){return l.provides[m]=p,C},runWithContext(m){const p=Ve;Ve=C;try{return m()}finally{Ve=p}}};return C}}let Ve=null;const jo=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ae(e)}Modifiers`]||t[`${Ie(e)}Modifiers`];function Go(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||St;let u=n;const l=e.startsWith("update:"),y=l&&jo(s,e.slice(7));y&&(y.trim&&(u=n.map(m=>It(m)?m.trim():m)),y.number&&(u=n.map(Fr)));let v,E=s[v=Ws(e)]||s[v=Ws(Ae(e))];!E&&l&&(E=s[v=Ws(Ie(e))]),E&&oe(E,t,6,u);const C=s[v+"Once"];if(C){if(!t.emitted)t.emitted={};else if(t.emitted[v])return;t.emitted[v]=!0,oe(C,t,6,u)}}const Xo=new WeakMap;function ir(t,e,n=!1){const s=n?Xo:e.emitsCache,u=s.get(t);if(u!==void 0)return u;const l=t.emits;let y={},v=!1;if(!vt(t)){const E=C=>{const m=ir(C,e,!0);m&&(v=!0,zt(y,m))};!n&&e.mixins.length&&e.mixins.forEach(E),t.extends&&E(t.extends),t.mixins&&t.mixins.forEach(E)}return!l&&!v?(Rt(t)&&s.set(t,null),null):(yt(l)?l.forEach(E=>y[E]=null):zt(y,l),Rt(t)&&s.set(t,y),y)}function Us(t,e){return!t||!Ds(e)?!1:(e=e.slice(2).replace(/Once$/,""),xt(t,e[0].toLowerCase()+e.slice(1))||xt(t,Ie(e))||xt(t,e))}function Wi(t){const{type:e,vnode:n,proxy:s,withProxy:u,propsOptions:[l],slots:y,attrs:v,emit:E,render:C,renderCache:m,props:p,data:g,setupState:A,ctx:h,inheritAttrs:S}=t,i=Fs(t);let f,w;try{if(n.shapeFlag&4){const T=u||s,N=T;f=ne(C.call(N,T,m,p,A,g,h)),w=v}else{const T=e;f=ne(T.length>1?T(p,{attrs:v,slots:y,emit:E}):T(p,null)),w=e.props?v:Wo(v)}}catch(T){ns.length=0,Bs(T,t,1),f=te(we)}let P=f;if(w&&S!==!1){const T=Object.keys(w),{shapeFlag:N}=P;T.length&&N&7&&(l&&T.some(vi)&&(w=Yo(w,l)),P=Ge(P,w,!1,!0))}return n.dirs&&(P=Ge(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(n.dirs):n.dirs),n.transition&&ki(P,n.transition),f=P,Fs(i),f}const Wo=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ds(n))&&((e||(e={}))[n]=t[n]);return e},Yo=(t,e)=>{const n={};for(const s in t)(!vi(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function qo(t,e,n){const{props:s,children:u,component:l}=t,{props:y,children:v,patchFlag:E}=e,C=l.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&E>=0){if(E&1024)return!0;if(E&16)return s?Yi(s,y,C):!!y;if(E&8){const m=e.dynamicProps;for(let p=0;p<m.length;p++){const g=m[p];if(y[g]!==s[g]&&!Us(C,g))return!0}}}else return(u||v)&&(!v||!v.$stable)?!0:s===y?!1:s?y?Yi(s,y,C):!0:!!y;return!1}function Yi(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let u=0;u<s.length;u++){const l=s[u];if(e[l]!==t[l]&&!Us(n,l))return!0}return!1}function Ko({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const nr={},rr=()=>Object.create(nr),or=t=>Object.getPrototypeOf(t)===nr;function Jo(t,e,n,s=!1){const u={},l=rr();t.propsDefaults=Object.create(null),ar(t,e,u,l);for(const y in t.propsOptions[0])y in u||(u[y]=void 0);n?t.props=s?u:eo(u):t.type.props?t.props=u:t.props=l,t.attrs=l}function Qo(t,e,n,s){const{props:u,attrs:l,vnode:{patchFlag:y}}=t,v=wt(u),[E]=t.propsOptions;let C=!1;if((s||y>0)&&!(y&16)){if(y&8){const m=t.vnode.dynamicProps;for(let p=0;p<m.length;p++){let g=m[p];if(Us(t.emitsOptions,g))continue;const A=e[g];if(E)if(xt(l,g))A!==l[g]&&(l[g]=A,C=!0);else{const h=Ae(g);u[h]=fi(E,v,h,A,t,!1)}else A!==l[g]&&(l[g]=A,C=!0)}}}else{ar(t,e,u,l)&&(C=!0);let m;for(const p in v)(!e||!xt(e,p)&&((m=Ie(p))===p||!xt(e,m)))&&(E?n&&(n[p]!==void 0||n[m]!==void 0)&&(u[p]=fi(E,v,p,void 0,t,!0)):delete u[p]);if(l!==v)for(const p in l)(!e||!xt(e,p))&&(delete l[p],C=!0)}C&&ce(t.attrs,"set","")}function ar(t,e,n,s){const[u,l]=t.propsOptions;let y=!1,v;if(e)for(let E in e){if(Je(E))continue;const C=e[E];let m;u&&xt(u,m=Ae(E))?!l||!l.includes(m)?n[m]=C:(v||(v={}))[m]=C:Us(t.emitsOptions,E)||(!(E in s)||C!==s[E])&&(s[E]=C,y=!0)}if(l){const E=wt(n),C=v||St;for(let m=0;m<l.length;m++){const p=l[m];n[p]=fi(u,E,p,C[p],t,!xt(C,p))}}return y}function fi(t,e,n,s,u,l){const y=t[n];if(y!=null){const v=xt(y,"default");if(v&&s===void 0){const E=y.default;if(y.type!==Function&&!y.skipFactory&&vt(E)){const{propsDefaults:C}=u;if(n in C)s=C[n];else{const m=us(u);s=C[n]=E.call(null,e),m()}}else s=E;u.ce&&u.ce._setProp(n,s)}y[0]&&(l&&!v?s=!1:y[1]&&(s===""||s===Ie(n))&&(s=!0))}return s}const Zo=new WeakMap;function lr(t,e,n=!1){const s=n?Zo:e.propsCache,u=s.get(t);if(u)return u;const l=t.props,y={},v=[];let E=!1;if(!vt(t)){const m=p=>{E=!0;const[g,A]=lr(p,e,!0);zt(y,g),A&&v.push(...A)};!n&&e.mixins.length&&e.mixins.forEach(m),t.extends&&m(t.extends),t.mixins&&t.mixins.forEach(m)}if(!l&&!E)return Rt(t)&&s.set(t,He),He;if(yt(l))for(let m=0;m<l.length;m++){const p=Ae(l[m]);qi(p)&&(y[p]=St)}else if(l)for(const m in l){const p=Ae(m);if(qi(p)){const g=l[m],A=y[p]=yt(g)||vt(g)?{type:g}:zt({},g),h=A.type;let S=!1,i=!0;if(yt(h))for(let f=0;f<h.length;++f){const w=h[f],P=vt(w)&&w.name;if(P==="Boolean"){S=!0;break}else P==="String"&&(i=!1)}else S=vt(h)&&h.name==="Boolean";A[0]=S,A[1]=i,(S||xt(A,"default"))&&v.push(p)}}const C=[y,v];return Rt(t)&&s.set(t,C),C}function qi(t){return t[0]!=="$"&&!Je(t)}const Mi=t=>t==="_"||t==="_ctx"||t==="$stable",Li=t=>yt(t)?t.map(ne):[ne(t)],ta=(t,e,n)=>{if(e._n)return e;const s=po((...u)=>Li(e(...u)),n);return s._c=!1,s},cr=(t,e,n)=>{const s=t._ctx;for(const u in t){if(Mi(u))continue;const l=t[u];if(vt(l))e[u]=ta(u,l,s);else if(l!=null){const y=Li(l);e[u]=()=>y}}},hr=(t,e)=>{const n=Li(e);t.slots.default=()=>n},dr=(t,e,n)=>{for(const s in e)(n||!Mi(s))&&(t[s]=e[s])},ea=(t,e,n)=>{const s=t.slots=rr();if(t.vnode.shapeFlag&32){const u=e._;u?(dr(s,e,n),n&&An(s,"_",u,!0)):cr(e,s)}else e&&hr(t,e)},sa=(t,e,n)=>{const{vnode:s,slots:u}=t;let l=!0,y=St;if(s.shapeFlag&32){const v=e._;v?n&&v===1?l=!1:dr(u,e,n):(l=!e.$stable,cr(e,u)),y=e}else e&&(hr(t,e),y={default:1});if(l)for(const v in u)!Mi(v)&&y[v]==null&&delete u[v]},Gt=aa;function ia(t){return na(t)}function na(t,e){const n=Ns();n.__VUE__=!0;const{insert:s,remove:u,patchProp:l,createElement:y,createText:v,createComment:E,setText:C,setElementText:m,parentNode:p,nextSibling:g,setScopeId:A=re,insertStaticContent:h}=t,S=(a,c,b,R=null,k=null,M=null,I=void 0,H=null,$=!!c.dynamicChildren)=>{if(a===c)return;a&&!Ye(a,c)&&(R=F(a),at(a,k,M,!0),a=null),c.patchFlag===-2&&($=!1,c.dynamicChildren=null);const{type:D,ref:L,shapeFlag:_}=c;switch(D){case js:i(a,c,b,R);break;case we:f(a,c,b,R);break;case ei:a==null&&w(c,b,R,I);break;case Ht:Z(a,c,b,R,k,M,I,H,$);break;default:_&1?N(a,c,b,R,k,M,I,H,$):_&6?nt(a,c,b,R,k,M,I,H,$):(_&64||_&128)&&D.process(a,c,b,R,k,M,I,H,$,r)}L!=null&&k?es(L,a&&a.ref,M,c||a,!c):L==null&&a&&a.ref!=null&&es(a.ref,null,M,a,!0)},i=(a,c,b,R)=>{if(a==null)s(c.el=v(c.children),b,R);else{const k=c.el=a.el;c.children!==a.children&&C(k,c.children)}},f=(a,c,b,R)=>{a==null?s(c.el=E(c.children||""),b,R):c.el=a.el},w=(a,c,b,R)=>{[a.el,a.anchor]=h(a.children,c,b,R,a.el,a.anchor)},P=({el:a,anchor:c},b,R)=>{let k;for(;a&&a!==c;)k=g(a),s(a,b,R),a=k;s(c,b,R)},T=({el:a,anchor:c})=>{let b;for(;a&&a!==c;)b=g(a),u(a),a=b;u(c)},N=(a,c,b,R,k,M,I,H,$)=>{if(c.type==="svg"?I="svg":c.type==="math"&&(I="mathml"),a==null)O(c,b,R,k,M,I,H,$);else{const D=a.el&&a.el._isVueCE?a.el:null;try{D&&D._beginPatch(),j(a,c,k,M,I,H,$)}finally{D&&D._endPatch()}}},O=(a,c,b,R,k,M,I,H)=>{let $,D;const{props:L,shapeFlag:_,transition:W,dirs:G}=a;if($=a.el=y(a.type,M,L&&L.is,L),_&8?m($,a.children):_&16&&z(a.children,$,null,R,k,ti(a,M),I,H),G&&Ce(a,null,R,"created"),B($,a,a.scopeId,I,R),L){for(const st in L)st!=="value"&&!Je(st)&&l($,st,null,L[st],M,R);"value"in L&&l($,"value",null,L.value,M),(D=L.onVnodeBeforeMount)&&se(D,R,a)}G&&Ce(a,null,R,"beforeMount");const J=ra(k,W);J&&W.beforeEnter($),s($,c,b),((D=L&&L.onVnodeMounted)||J||G)&&Gt(()=>{D&&se(D,R,a),J&&W.enter($),G&&Ce(a,null,R,"mounted")},k)},B=(a,c,b,R,k)=>{if(b&&A(a,b),R)for(let M=0;M<R.length;M++)A(a,R[M]);if(k){let M=k.subTree;if(c===M||pr(M.type)&&(M.ssContent===c||M.ssFallback===c)){const I=k.vnode;B(a,I,I.scopeId,I.slotScopeIds,k.parent)}}},z=(a,c,b,R,k,M,I,H,$=0)=>{for(let D=$;D<a.length;D++){const L=a[D]=H?ve(a[D]):ne(a[D]);S(null,L,c,b,R,k,M,I,H)}},j=(a,c,b,R,k,M,I)=>{const H=c.el=a.el;let{patchFlag:$,dynamicChildren:D,dirs:L}=c;$|=a.patchFlag&16;const _=a.props||St,W=c.props||St;let G;if(b&&Ee(b,!1),(G=W.onVnodeBeforeUpdate)&&se(G,b,c,a),L&&Ce(c,a,b,"beforeUpdate"),b&&Ee(b,!0),(_.innerHTML&&W.innerHTML==null||_.textContent&&W.textContent==null)&&m(H,""),D?X(a.dynamicChildren,D,H,b,R,ti(c,k),M):I||Q(a,c,H,null,b,R,ti(c,k),M,!1),$>0){if($&16)Y(H,_,W,b,k);else if($&2&&_.class!==W.class&&l(H,"class",null,W.class,k),$&4&&l(H,"style",_.style,W.style,k),$&8){const J=c.dynamicProps;for(let st=0;st<J.length;st++){const tt=J[st],ot=_[tt],rt=W[tt];(rt!==ot||tt==="value")&&l(H,tt,ot,rt,k,b)}}$&1&&a.children!==c.children&&m(H,c.children)}else!I&&D==null&&Y(H,_,W,b,k);((G=W.onVnodeUpdated)||L)&&Gt(()=>{G&&se(G,b,c,a),L&&Ce(c,a,b,"updated")},R)},X=(a,c,b,R,k,M,I)=>{for(let H=0;H<c.length;H++){const $=a[H],D=c[H],L=$.el&&($.type===Ht||!Ye($,D)||$.shapeFlag&198)?p($.el):b;S($,D,L,null,R,k,M,I,!0)}},Y=(a,c,b,R,k)=>{if(c!==b){if(c!==St)for(const M in c)!Je(M)&&!(M in b)&&l(a,M,c[M],null,k,R);for(const M in b){if(Je(M))continue;const I=b[M],H=c[M];I!==H&&M!=="value"&&l(a,M,H,I,k,R)}"value"in b&&l(a,"value",c.value,b.value,k)}},Z=(a,c,b,R,k,M,I,H,$)=>{const D=c.el=a?a.el:v(""),L=c.anchor=a?a.anchor:v("");let{patchFlag:_,dynamicChildren:W,slotScopeIds:G}=c;G&&(H=H?H.concat(G):G),a==null?(s(D,b,R),s(L,b,R),z(c.children||[],b,L,k,M,I,H,$)):_>0&&_&64&&W&&a.dynamicChildren&&a.dynamicChildren.length===W.length?(X(a.dynamicChildren,W,b,k,M,I,H),(c.key!=null||k&&c===k.subTree)&&Ii(a,c,!0)):Q(a,c,b,L,k,M,I,H,$)},nt=(a,c,b,R,k,M,I,H,$)=>{c.slotScopeIds=H,a==null?c.shapeFlag&512?k.ctx.activate(c,b,R,I,$):q(c,b,R,k,M,I,$):V(a,c,$)},q=(a,c,b,R,k,M,I)=>{const H=a.component=pa(a,R,k);if(Qn(a)&&(H.ctx.renderer=r),ma(H,!1,I),H.asyncDep){if(k&&k.registerDep(H,U,I),!a.el){const $=H.subTree=te(we);f(null,$,c,b),a.placeholder=$.el}}else U(H,a,c,b,k,M,I)},V=(a,c,b)=>{const R=c.component=a.component;if(qo(a,c,b))if(R.asyncDep&&!R.asyncResolved){K(R,c,b);return}else R.next=c,R.update();else c.el=a.el,R.vnode=c},U=(a,c,b,R,k,M,I)=>{const H=()=>{if(a.isMounted){let{next:_,bu:W,u:G,parent:J,vnode:st}=a;{const mt=ur(a);if(mt){_&&(_.el=st.el,K(a,_,I)),mt.asyncDep.then(()=>{a.isUnmounted||H()});return}}let tt=_,ot;Ee(a,!1),_?(_.el=st.el,K(a,_,I)):_=st,W&&Ys(W),(ot=_.props&&_.props.onVnodeBeforeUpdate)&&se(ot,J,_,st),Ee(a,!0);const rt=Wi(a),ct=a.subTree;a.subTree=rt,S(ct,rt,p(ct.el),F(ct),a,k,M),_.el=rt.el,tt===null&&Ko(a,rt.el),G&&Gt(G,k),(ot=_.props&&_.props.onVnodeUpdated)&&Gt(()=>se(ot,J,_,st),k)}else{let _;const{el:W,props:G}=c,{bm:J,m:st,parent:tt,root:ot,type:rt}=a,ct=ss(c);Ee(a,!1),J&&Ys(J),!ct&&(_=G&&G.onVnodeBeforeMount)&&se(_,tt,c),Ee(a,!0);{ot.ce&&ot.ce._def.shadowRoot!==!1&&ot.ce._injectChildStyle(rt);const mt=a.subTree=Wi(a);S(null,mt,b,R,a,k,M),c.el=mt.el}if(st&&Gt(st,k),!ct&&(_=G&&G.onVnodeMounted)){const mt=c;Gt(()=>se(_,tt,mt),k)}(c.shapeFlag&256||tt&&ss(tt.vnode)&&tt.vnode.shapeFlag&256)&&a.a&&Gt(a.a,k),a.isMounted=!0,c=b=R=null}};a.scope.on();const $=a.effect=new Cn(H);a.scope.off();const D=a.update=$.run.bind($),L=a.job=$.runIfDirty.bind($);L.i=a,L.id=a.uid,$.scheduler=()=>Pi(L),Ee(a,!0),D()},K=(a,c,b)=>{c.component=a;const R=a.vnode.props;a.vnode=c,a.next=null,Qo(a,c.props,R,b),sa(a,c.children,b),de(),Hi(a),ue()},Q=(a,c,b,R,k,M,I,H,$=!1)=>{const D=a&&a.children,L=a?a.shapeFlag:0,_=c.children,{patchFlag:W,shapeFlag:G}=c;if(W>0){if(W&128){ht(D,_,b,R,k,M,I,H,$);return}else if(W&256){et(D,_,b,R,k,M,I,H,$);return}}G&8?(L&16&&it(D,k,M),_!==D&&m(b,_)):L&16?G&16?ht(D,_,b,R,k,M,I,H,$):it(D,k,M,!0):(L&8&&m(b,""),G&16&&z(_,b,R,k,M,I,H,$))},et=(a,c,b,R,k,M,I,H,$)=>{a=a||He,c=c||He;const D=a.length,L=c.length,_=Math.min(D,L);let W;for(W=0;W<_;W++){const G=c[W]=$?ve(c[W]):ne(c[W]);S(a[W],G,b,null,k,M,I,H,$)}D>L?it(a,k,M,!0,!1,_):z(c,b,R,k,M,I,H,$,_)},ht=(a,c,b,R,k,M,I,H,$)=>{let D=0;const L=c.length;let _=a.length-1,W=L-1;for(;D<=_&&D<=W;){const G=a[D],J=c[D]=$?ve(c[D]):ne(c[D]);if(Ye(G,J))S(G,J,b,null,k,M,I,H,$);else break;D++}for(;D<=_&&D<=W;){const G=a[_],J=c[W]=$?ve(c[W]):ne(c[W]);if(Ye(G,J))S(G,J,b,null,k,M,I,H,$);else break;_--,W--}if(D>_){if(D<=W){const G=W+1,J=G<L?c[G].el:R;for(;D<=W;)S(null,c[D]=$?ve(c[D]):ne(c[D]),b,J,k,M,I,H,$),D++}}else if(D>W)for(;D<=_;)at(a[D],k,M,!0),D++;else{const G=D,J=D,st=new Map;for(D=J;D<=W;D++){const dt=c[D]=$?ve(c[D]):ne(c[D]);dt.key!=null&&st.set(dt.key,D)}let tt,ot=0;const rt=W-J+1;let ct=!1,mt=0;const At=new Array(rt);for(D=0;D<rt;D++)At[D]=0;for(D=G;D<=_;D++){const dt=a[D];if(ot>=rt){at(dt,k,M,!0);continue}let Et;if(dt.key!=null)Et=st.get(dt.key);else for(tt=J;tt<=W;tt++)if(At[tt-J]===0&&Ye(dt,c[tt])){Et=tt;break}Et===void 0?at(dt,k,M,!0):(At[Et-J]=D+1,Et>=mt?mt=Et:ct=!0,S(dt,c[Et],b,null,k,M,I,H,$),ot++)}const Ct=ct?oa(At):He;for(tt=Ct.length-1,D=rt-1;D>=0;D--){const dt=J+D,Et=c[dt],Ft=c[dt+1],Nt=dt+1<L?Ft.el||fr(Ft):R;At[D]===0?S(null,Et,b,Nt,k,M,I,H,$):ct&&(tt<0||D!==Ct[tt]?lt(Et,b,Nt,2):tt--)}}},lt=(a,c,b,R,k=null)=>{const{el:M,type:I,transition:H,children:$,shapeFlag:D}=a;if(D&6){lt(a.component.subTree,c,b,R);return}if(D&128){a.suspense.move(c,b,R);return}if(D&64){I.move(a,c,b,r);return}if(I===Ht){s(M,c,b);for(let _=0;_<$.length;_++)lt($[_],c,b,R);s(a.anchor,c,b);return}if(I===ei){P(a,c,b);return}if(R!==2&&D&1&&H)if(R===0)H.beforeEnter(M),s(M,c,b),Gt(()=>H.enter(M),k);else{const{leave:_,delayLeave:W,afterLeave:G}=H,J=()=>{a.ctx.isUnmounted?u(M):s(M,c,b)},st=()=>{M._isLeaving&&M[So](!0),_(M,()=>{J(),G&&G()})};W?W(M,J,st):st()}else s(M,c,b)},at=(a,c,b,R=!1,k=!1)=>{const{type:M,props:I,ref:H,children:$,dynamicChildren:D,shapeFlag:L,patchFlag:_,dirs:W,cacheIndex:G}=a;if(_===-2&&(k=!1),H!=null&&(de(),es(H,null,b,a,!0),ue()),G!=null&&(c.renderCache[G]=void 0),L&256){c.ctx.deactivate(a);return}const J=L&1&&W,st=!ss(a);let tt;if(st&&(tt=I&&I.onVnodeBeforeUnmount)&&se(tt,c,a),L&6)ft(a.component,b,R);else{if(L&128){a.suspense.unmount(b,R);return}J&&Ce(a,null,c,"beforeUnmount"),L&64?a.type.remove(a,c,b,r,R):D&&!D.hasOnce&&(M!==Ht||_>0&&_&64)?it(D,c,b,!1,!0):(M===Ht&&_&384||!k&&L&16)&&it($,c,b),R&&pt(a)}(st&&(tt=I&&I.onVnodeUnmounted)||J)&&Gt(()=>{tt&&se(tt,c,a),J&&Ce(a,null,c,"unmounted")},b)},pt=a=>{const{type:c,el:b,anchor:R,transition:k}=a;if(c===Ht){ut(b,R);return}if(c===ei){T(a);return}const M=()=>{u(b),k&&!k.persisted&&k.afterLeave&&k.afterLeave()};if(a.shapeFlag&1&&k&&!k.persisted){const{leave:I,delayLeave:H}=k,$=()=>I(b,M);H?H(a.el,M,$):$()}else M()},ut=(a,c)=>{let b;for(;a!==c;)b=g(a),u(a),a=b;u(c)},ft=(a,c,b)=>{const{bum:R,scope:k,job:M,subTree:I,um:H,m:$,a:D}=a;Ki($),Ki(D),R&&Ys(R),k.stop(),M&&(M.flags|=8,at(I,a,c,b)),H&&Gt(H,c),Gt(()=>{a.isUnmounted=!0},c)},it=(a,c,b,R=!1,k=!1,M=0)=>{for(let I=M;I<a.length;I++)at(a[I],c,b,R,k)},F=a=>{if(a.shapeFlag&6)return F(a.component.subTree);if(a.shapeFlag&128)return a.suspense.next();const c=g(a.anchor||a.el),b=c&&c[Yn];return b?g(b):c};let x=!1;const o=(a,c,b)=>{let R;a==null?c._vnode&&(at(c._vnode,null,null,!0),R=c._vnode.component):S(c._vnode||null,a,c,null,null,null,b),c._vnode=a,x||(x=!0,Hi(R),Un(),x=!1)},r={p:S,um:at,m:lt,r:pt,mt:q,mc:z,pc:Q,pbc:X,n:F,o:t};return{render:o,hydrate:void 0,createApp:Uo(o)}}function ti({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ee({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ra(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ii(t,e,n=!1){const s=t.children,u=e.children;if(yt(s)&&yt(u))for(let l=0;l<s.length;l++){const y=s[l];let v=u[l];v.shapeFlag&1&&!v.dynamicChildren&&((v.patchFlag<=0||v.patchFlag===32)&&(v=u[l]=ve(u[l]),v.el=y.el),!n&&v.patchFlag!==-2&&Ii(y,v)),v.type===js&&(v.patchFlag!==-1?v.el=y.el:v.__elIndex=l+(t.type===Ht?1:0)),v.type===we&&!v.el&&(v.el=y.el)}}function oa(t){const e=t.slice(),n=[0];let s,u,l,y,v;const E=t.length;for(s=0;s<E;s++){const C=t[s];if(C!==0){if(u=n[n.length-1],t[u]<C){e[s]=u,n.push(s);continue}for(l=0,y=n.length-1;l<y;)v=l+y>>1,t[n[v]]<C?l=v+1:y=v;C<t[n[l]]&&(l>0&&(e[s]=n[l-1]),n[l]=s)}}for(l=n.length,y=n[l-1];l-- >0;)n[l]=y,y=e[y];return n}function ur(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ur(e)}function Ki(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function fr(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?fr(e.subTree):null}const pr=t=>t.__isSuspense;function aa(t,e){e&&e.pendingBranch?yt(t)?e.effects.push(...t):e.effects.push(t):fo(t)}const Ht=Symbol.for("v-fgt"),js=Symbol.for("v-txt"),we=Symbol.for("v-cmt"),ei=Symbol.for("v-stc"),ns=[];let Kt=null;function Pt(t=!1){ns.push(Kt=t?null:[])}function la(){ns.pop(),Kt=ns[ns.length-1]||null}let ls=1;function Ji(t,e=!1){ls+=t,t<0&&Kt&&e&&(Kt.hasOnce=!0)}function gr(t){return t.dynamicChildren=ls>0?Kt||He:null,la(),ls>0&&Kt&&Kt.push(t),t}function _t(t,e,n,s,u,l){return gr(bt(t,e,n,s,u,l,!0))}function pi(t,e,n,s,u){return gr(te(t,e,n,s,u,!0))}function mr(t){return t?t.__v_isVNode===!0:!1}function Ye(t,e){return t.type===e.type&&t.key===e.key}const br=({key:t})=>t??null,Cs=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?It(t)||Vt(t)||vt(t)?{i:Jt,r:t,k:e,f:!!n}:t:null);function bt(t,e=null,n=null,s=0,u=null,l=t===Ht?0:1,y=!1,v=!1){const E={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&br(e),ref:e&&Cs(e),scopeId:Gn,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:s,dynamicProps:u,dynamicChildren:null,appContext:null,ctx:Jt};return v?(Di(E,n),l&128&&t.normalize(E)):n&&(E.shapeFlag|=It(n)?8:16),ls>0&&!y&&Kt&&(E.patchFlag>0||l&6)&&E.patchFlag!==32&&Kt.push(E),E}const te=ca;function ca(t,e=null,n=null,s=0,u=null,l=!1){if((!t||t===_o)&&(t=we),mr(t)){const v=Ge(t,e,!0);return n&&Di(v,n),ls>0&&!l&&Kt&&(v.shapeFlag&6?Kt[Kt.indexOf(t)]=v:Kt.push(v)),v.patchFlag=-2,v}if(Aa(t)&&(t=t.__vccOpts),e){e=ha(e);let{class:v,style:E}=e;v&&!It(v)&&(e.class=ze(v)),Rt(E)&&(Fi(E)&&!yt(E)&&(E=zt({},E)),e.style=Le(E))}const y=It(t)?1:pr(t)?128:Ao(t)?64:Rt(t)?4:vt(t)?2:0;return bt(t,e,n,s,u,y,l,!0)}function ha(t){return t?Fi(t)||or(t)?zt({},t):t:null}function Ge(t,e,n=!1,s=!1){const{props:u,ref:l,patchFlag:y,children:v,transition:E}=t,C=e?da(u||{},e):u,m={__v_isVNode:!0,__v_skip:!0,type:t.type,props:C,key:C&&br(C),ref:e&&e.ref?n&&l?yt(l)?l.concat(Cs(e)):[l,Cs(e)]:Cs(e):l,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:v,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ht?y===-1?16:y|16:y,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:E,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ge(t.ssContent),ssFallback:t.ssFallback&&Ge(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return E&&s&&ki(m,E.clone(m)),m}function vr(t=" ",e=0){return te(js,null,t,e)}function Fe(t="",e=!1){return e?(Pt(),pi(we,null,t)):te(we,null,t)}function ne(t){return t==null||typeof t=="boolean"?te(we):yt(t)?te(Ht,null,t.slice()):mr(t)?ve(t):te(js,null,String(t))}function ve(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ge(t)}function Di(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(yt(e))n=16;else if(typeof e=="object")if(s&65){const u=e.default;u&&(u._c&&(u._d=!1),Di(t,u()),u._c&&(u._d=!0));return}else{n=32;const u=e._;!u&&!or(e)?e._ctx=Jt:u===3&&Jt&&(Jt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else vt(e)?(e={default:e,_ctx:Jt},n=32):(e=String(e),s&64?(n=16,e=[vr(e)]):n=8);t.children=e,t.shapeFlag|=n}function da(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const u in s)if(u==="class")e.class!==s.class&&(e.class=ze([e.class,s.class]));else if(u==="style")e.style=Le([e.style,s.style]);else if(Ds(u)){const l=e[u],y=s[u];y&&l!==y&&!(yt(l)&&l.includes(y))&&(e[u]=l?[].concat(l,y):y)}else u!==""&&(e[u]=s[u])}return e}function se(t,e,n,s=null){oe(t,e,7,[n,s])}const ua=sr();let fa=0;function pa(t,e,n){const s=t.type,u=(e?e.appContext:t.appContext)||ua,l={uid:fa++,vnode:t,type:s,parent:e,appContext:u,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new _r(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(u.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:lr(s,u),emitsOptions:ir(s,u),emit:null,emitted:null,propsDefaults:St,inheritAttrs:s.inheritAttrs,ctx:St,data:St,props:St,attrs:St,slots:St,refs:St,setupState:St,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=Go.bind(null,l),t.ce&&t.ce(l),l}let Wt=null;const ga=()=>Wt||Jt;let Ms,gi;{const t=Ns(),e=(n,s)=>{let u;return(u=t[n])||(u=t[n]=[]),u.push(s),l=>{u.length>1?u.forEach(y=>y(l)):u[0](l)}};Ms=e("__VUE_INSTANCE_SETTERS__",n=>Wt=n),gi=e("__VUE_SSR_SETTERS__",n=>cs=n)}const us=t=>{const e=Wt;return Ms(t),t.scope.on(),()=>{t.scope.off(),Ms(e)}},Qi=()=>{Wt&&Wt.scope.off(),Ms(null)};function yr(t){return t.vnode.shapeFlag&4}let cs=!1;function ma(t,e=!1,n=!1){e&&gi(e);const{props:s,children:u}=t.vnode,l=yr(t);Jo(t,s,l,e),ea(t,u,n||e);const y=l?ba(t,e):void 0;return e&&gi(!1),y}function ba(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Oo);const{setup:s}=n;if(s){de();const u=t.setupContext=s.length>1?ya(t):null,l=us(t),y=hs(s,t,0,[t.props,u]),v=mn(y);if(ue(),l(),(v||t.sp)&&!ss(t)&&Jn(t),v){if(y.then(Qi,Qi),e)return y.then(E=>{Zi(t,E)}).catch(E=>{Bs(E,t,0)});t.asyncDep=y}else Zi(t,y)}else Ar(t)}function Zi(t,e,n){vt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Rt(e)&&(t.setupState=Bn(e)),Ar(t)}function Ar(t,e,n){const s=t.type;t.render||(t.render=s.render||re);{const u=us(t);de();try{No(t)}finally{ue(),u()}}}const va={get(t,e){return $t(t,"get",""),t[e]}};function ya(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,va),slots:t.slots,emit:t.emit,expose:e}}function Gs(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Bn(Hn(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in is)return is[n](t)},has(e,n){return n in e||n in is}})):t.proxy}function Aa(t){return vt(t)&&"__vccOpts"in t}const Ls=(t,e)=>ao(t,e,cs),wa="3.5.26";let mi;const tn=typeof window<"u"&&window.trustedTypes;if(tn)try{mi=tn.createPolicy("vue",{createHTML:t=>t})}catch{}const wr=mi?t=>mi.createHTML(t):t=>t,xa="http://www.w3.org/2000/svg",Sa="http://www.w3.org/1998/Math/MathML",le=typeof document<"u"?document:null,en=le&&le.createElement("template"),Ca={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const u=e==="svg"?le.createElementNS(xa,t):e==="mathml"?le.createElementNS(Sa,t):n?le.createElement(t,{is:n}):le.createElement(t);return t==="select"&&s&&s.multiple!=null&&u.setAttribute("multiple",s.multiple),u},createText:t=>le.createTextNode(t),createComment:t=>le.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>le.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,u,l){const y=n?n.previousSibling:e.lastChild;if(u&&(u===l||u.nextSibling))for(;e.insertBefore(u.cloneNode(!0),n),!(u===l||!(u=u.nextSibling)););else{en.innerHTML=wr(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const v=en.content;if(s==="svg"||s==="mathml"){const E=v.firstChild;for(;E.firstChild;)v.appendChild(E.firstChild);v.removeChild(E)}e.insertBefore(v,n)}return[y?y.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Ea=Symbol("_vtc");function Ta(t,e,n){const s=t[Ea];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Is=Symbol("_vod"),xr=Symbol("_vsh"),Ra={name:"show",beforeMount(t,{value:e},{transition:n}){t[Is]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):qe(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),qe(t,!0),s.enter(t)):s.leave(t,()=>{qe(t,!1)}):qe(t,e))},beforeUnmount(t,{value:e}){qe(t,e)}};function qe(t,e){t.style.display=e?t[Is]:"none",t[xr]=!e}const Fa=Symbol(""),Pa=/(?:^|;)\s*display\s*:/;function ka(t,e,n){const s=t.style,u=It(n);let l=!1;if(n&&!u){if(e)if(It(e))for(const y of e.split(";")){const v=y.slice(0,y.indexOf(":")).trim();n[v]==null&&Es(s,v,"")}else for(const y in e)n[y]==null&&Es(s,y,"");for(const y in n)y==="display"&&(l=!0),Es(s,y,n[y])}else if(u){if(e!==n){const y=s[Fa];y&&(n+=";"+y),s.cssText=n,l=Pa.test(n)}}else e&&t.removeAttribute("style");Is in t&&(t[Is]=l?s.display:"",t[xr]&&(s.display="none"))}const sn=/\s*!important$/;function Es(t,e,n){if(yt(n))n.forEach(s=>Es(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=Ma(t,e);sn.test(n)?t.setProperty(Ie(s),n.replace(sn,""),"important"):t[s]=n}}const nn=["Webkit","Moz","ms"],si={};function Ma(t,e){const n=si[e];if(n)return n;let s=Ae(e);if(s!=="filter"&&s in t)return si[e]=s;s=yn(s);for(let u=0;u<nn.length;u++){const l=nn[u]+s;if(l in t)return si[e]=l}return e}const rn="http://www.w3.org/1999/xlink";function on(t,e,n,s,u,l=Dr(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(rn,e.slice(6,e.length)):t.setAttributeNS(rn,e,n):n==null||l&&!wn(n)?t.removeAttribute(e):t.setAttribute(e,l?"":xe(n)?String(n):n)}function an(t,e,n,s,u){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?wr(n):n);return}const l=t.tagName;if(e==="value"&&l!=="PROGRESS"&&!l.includes("-")){const v=l==="OPTION"?t.getAttribute("value")||"":t.value,E=n==null?t.type==="checkbox"?"on":"":String(n);(v!==E||!("_value"in t))&&(t.value=E),n==null&&t.removeAttribute(e),t._value=n;return}let y=!1;if(n===""||n==null){const v=typeof t[e];v==="boolean"?n=wn(n):n==null&&v==="string"?(n="",y=!0):v==="number"&&(n=0,y=!0)}try{t[e]=n}catch{}y&&t.removeAttribute(u||e)}function La(t,e,n,s){t.addEventListener(e,n,s)}function Ia(t,e,n,s){t.removeEventListener(e,n,s)}const ln=Symbol("_vei");function Da(t,e,n,s,u=null){const l=t[ln]||(t[ln]={}),y=l[e];if(s&&y)y.value=s;else{const[v,E]=_a(e);if(s){const C=l[e]=Ha(s,u);La(t,v,C,E)}else y&&(Ia(t,v,y,E),l[e]=void 0)}}const cn=/(?:Once|Passive|Capture)$/;function _a(t){let e;if(cn.test(t)){e={};let s;for(;s=t.match(cn);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ie(t.slice(2)),e]}let ii=0;const Oa=Promise.resolve(),Na=()=>ii||(Oa.then(()=>ii=0),ii=Date.now());function Ha(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;oe(Ba(s,n.value),e,5,[s])};return n.value=t,n.attached=Na(),n}function Ba(t,e){if(yt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>u=>!u._stopped&&s&&s(u))}else return e}const hn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,$a=(t,e,n,s,u,l)=>{const y=u==="svg";e==="class"?Ta(t,s,y):e==="style"?ka(t,n,s):Ds(e)?vi(e)||Da(t,e,n,s,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Va(t,e,s,y))?(an(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&on(t,e,s,y,l,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!It(s))?an(t,Ae(e),s,l,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),on(t,e,s,y))};function Va(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&hn(e)&&vt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const u=t.tagName;if(u==="IMG"||u==="VIDEO"||u==="CANVAS"||u==="SOURCE")return!1}return hn(e)&&It(n)?!1:e in t}const za=zt({patchProp:$a},Ca);let dn;function Ua(){return dn||(dn=ia(za))}const ja=((...t)=>{const e=Ua().createApp(...t),{mount:n}=e;return e.mount=s=>{const u=Xa(s);if(!u)return;const l=e._component;!vt(l)&&!l.render&&!l.template&&(l.template=u.innerHTML),u.nodeType===1&&(u.textContent="");const y=n(u,!1,Ga(u));return u instanceof Element&&(u.removeAttribute("v-cloak"),u.setAttribute("data-v-app","")),y},e});function Ga(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Xa(t){return It(t)?document.querySelector(t):t}const Wa="modulepreload",Ya=function(t,e){return new URL(t,e).href},un={},Te=function(e,n,s){let u=Promise.resolve();if(n&&n.length>0){let C=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};const y=document.getElementsByTagName("link"),v=document.querySelector("meta[property=csp-nonce]"),E=v?.nonce||v?.getAttribute("nonce");u=C(n.map(m=>{if(m=Ya(m,s),m in un)return;un[m]=!0;const p=m.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(s)for(let h=y.length-1;h>=0;h--){const S=y[h];if(S.href===m&&(!p||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${g}`))return;const A=document.createElement("link");if(A.rel=p?"stylesheet":Wa,p||(A.as="script"),A.crossOrigin="",A.href=m,E&&A.setAttribute("nonce",E),document.head.appendChild(A),p)return new Promise((h,S)=>{A.addEventListener("load",h),A.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(y){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=y,window.dispatchEvent(v),!v.defaultPrevented)throw y}return u.then(y=>{for(const v of y||[])v.status==="rejected"&&l(v.reason);return e().catch(l)})};var qa={640:((t,e,n)=>{n.d(e,{AnnotationLayer:()=>ft,FreeTextAnnotationElement:()=>Y,InkAnnotationElement:()=>Q,StampAnnotationElement:()=>pt});var s=n(266),u=n(473),l=n(780);function y(it){return Math.floor(Math.max(0,Math.min(1,it))*255).toString(16).padStart(2,"0")}function v(it){return Math.max(0,Math.min(255,255*it))}class E{static CMYK_G([F,x,o,r]){return["G",1-Math.min(1,.3*F+.59*o+.11*x+r)]}static G_CMYK([F]){return["CMYK",0,0,0,1-F]}static G_RGB([F]){return["RGB",F,F,F]}static G_rgb([F]){return F=v(F),[F,F,F]}static G_HTML([F]){const x=y(F);return`#${x}${x}${x}`}static RGB_G([F,x,o]){return["G",.3*F+.59*x+.11*o]}static RGB_rgb(F){return F.map(v)}static RGB_HTML(F){return`#${F.map(y).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([F,x,o,r]){return["RGB",1-Math.min(1,F+r),1-Math.min(1,o+r),1-Math.min(1,x+r)]}static CMYK_rgb([F,x,o,r]){return[v(1-Math.min(1,F+r)),v(1-Math.min(1,o+r)),v(1-Math.min(1,x+r))]}static CMYK_HTML(F){const x=this.CMYK_RGB(F).slice(1);return this.RGB_HTML(x)}static RGB_CMYK([F,x,o]){const r=1-F,d=1-x,a=1-o,c=Math.min(r,d,a);return["CMYK",r,d,a,c]}}var C=n(160);const m=1e3,p=9,g=new WeakSet;function A(it){return{width:it[2]-it[0],height:it[3]-it[1]}}class h{static create(F){switch(F.data.annotationType){case s.AnnotationType.LINK:return new i(F);case s.AnnotationType.TEXT:return new f(F);case s.AnnotationType.WIDGET:switch(F.data.fieldType){case"Tx":return new P(F);case"Btn":return F.data.radioButton?new O(F):F.data.checkBox?new N(F):new B(F);case"Ch":return new z(F);case"Sig":return new T(F)}return new w(F);case s.AnnotationType.POPUP:return new j(F);case s.AnnotationType.FREETEXT:return new Y(F);case s.AnnotationType.LINE:return new Z(F);case s.AnnotationType.SQUARE:return new nt(F);case s.AnnotationType.CIRCLE:return new q(F);case s.AnnotationType.POLYLINE:return new V(F);case s.AnnotationType.CARET:return new K(F);case s.AnnotationType.INK:return new Q(F);case s.AnnotationType.POLYGON:return new U(F);case s.AnnotationType.HIGHLIGHT:return new et(F);case s.AnnotationType.UNDERLINE:return new ht(F);case s.AnnotationType.SQUIGGLY:return new lt(F);case s.AnnotationType.STRIKEOUT:return new at(F);case s.AnnotationType.STAMP:return new pt(F);case s.AnnotationType.FILEATTACHMENT:return new ut(F);default:return new S(F)}}}class S{#t=!1;constructor(F,{isRenderable:x=!1,ignoreBorder:o=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=x,this.data=F.data,this.layer=F.layer,this.linkService=F.linkService,this.downloadManager=F.downloadManager,this.imageResourcesPath=F.imageResourcesPath,this.renderForms=F.renderForms,this.svgFactory=F.svgFactory,this.annotationStorage=F.annotationStorage,this.enableScripting=F.enableScripting,this.hasJSActions=F.hasJSActions,this._fieldObjects=F.fieldObjects,this.parent=F.parent,x&&(this.container=this._createContainer(o)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:F,contentsObj:x,richText:o}){return!!(F?.str||x?.str||o?.str)}get hasPopupData(){return S._hasPopupData(this.data)}_createContainer(F){const{data:x,parent:{page:o,viewport:r}}=this,d=document.createElement("section");d.setAttribute("data-annotation-id",x.id),this instanceof w||(d.tabIndex=m),d.style.zIndex=this.parent.zIndex++,this.data.popupRef&&d.setAttribute("aria-haspopup","dialog"),x.noRotate&&d.classList.add("norotate");const{pageWidth:a,pageHeight:c,pageX:b,pageY:R}=r.rawDims;if(!x.rect||this instanceof j){const{rotation:$}=x;return!x.hasOwnCanvas&&$!==0&&this.setRotation($,d),d}const{width:k,height:M}=A(x.rect),I=s.Util.normalizeRect([x.rect[0],o.view[3]-x.rect[1]+o.view[1],x.rect[2],o.view[3]-x.rect[3]+o.view[1]]);if(!F&&x.borderStyle.width>0){d.style.borderWidth=`${x.borderStyle.width}px`;const $=x.borderStyle.horizontalCornerRadius,D=x.borderStyle.verticalCornerRadius;if($>0||D>0){const _=`calc(${$}px * var(--scale-factor)) / calc(${D}px * var(--scale-factor))`;d.style.borderRadius=_}else if(this instanceof O){const _=`calc(${k}px * var(--scale-factor)) / calc(${M}px * var(--scale-factor))`;d.style.borderRadius=_}switch(x.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:d.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:d.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:d.style.borderBottomStyle="solid";break}const L=x.borderColor||null;L?(this.#t=!0,d.style.borderColor=s.Util.makeHexColor(L[0]|0,L[1]|0,L[2]|0)):d.style.borderWidth=0}d.style.left=`${100*(I[0]-b)/a}%`,d.style.top=`${100*(I[1]-R)/c}%`;const{rotation:H}=x;return x.hasOwnCanvas||H===0?(d.style.width=`${100*k/a}%`,d.style.height=`${100*M/c}%`):this.setRotation(H,d),d}setRotation(F,x=this.container){if(!this.data.rect)return;const{pageWidth:o,pageHeight:r}=this.parent.viewport.rawDims,{width:d,height:a}=A(this.data.rect);let c,b;F%180===0?(c=100*d/o,b=100*a/r):(c=100*a/o,b=100*d/r),x.style.width=`${c}%`,x.style.height=`${b}%`,x.setAttribute("data-main-rotation",(360-F)%360)}get _commonActions(){const F=(x,o,r)=>{const d=r.detail[x],a=d[0],c=d.slice(1);r.target.style[o]=E[`${a}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[o]:E[`${a}_rgb`](c)})};return(0,s.shadow)(this,"_commonActions",{display:x=>{const{display:o}=x.detail,r=o%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:o===1||o===2})},print:x=>{this.annotationStorage.setValue(this.data.id,{noPrint:!x.detail.print})},hidden:x=>{const{hidden:o}=x.detail;this.container.style.visibility=o?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:o,noView:o})},focus:x=>{setTimeout(()=>x.target.focus({preventScroll:!1}),0)},userName:x=>{x.target.title=x.detail.userName},readonly:x=>{x.target.disabled=x.detail.readonly},required:x=>{this._setRequired(x.target,x.detail.required)},bgColor:x=>{F("bgColor","backgroundColor",x)},fillColor:x=>{F("fillColor","backgroundColor",x)},fgColor:x=>{F("fgColor","color",x)},textColor:x=>{F("textColor","color",x)},borderColor:x=>{F("borderColor","borderColor",x)},strokeColor:x=>{F("strokeColor","borderColor",x)},rotation:x=>{const o=x.detail.rotation;this.setRotation(o),this.annotationStorage.setValue(this.data.id,{rotation:o})}})}_dispatchEventFromSandbox(F,x){const o=this._commonActions;for(const r of Object.keys(x.detail))(F[r]||o[r])?.(x)}_setDefaultPropertiesFromJS(F){if(!this.enableScripting)return;const x=this.annotationStorage.getRawValue(this.data.id);if(!x)return;const o=this._commonActions;for(const[r,d]of Object.entries(x)){const a=o[r];if(a){const c={detail:{[r]:d},target:F};a(c),delete x[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:F}=this.data;if(!F)return;const[x,o,r,d]=this.data.rect;if(F.length===1){const[,{x:D,y:L},{x:_,y:W}]=F[0];if(r===D&&d===L&&x===_&&o===W)return}const{style:a}=this.container;let c;if(this.#t){const{borderColor:D,borderWidth:L}=a;a.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${D}" stroke-width="${L}">`],this.container.classList.add("hasBorder")}const b=r-x,R=d-o,{svgFactory:k}=this,M=k.createElement("svg");M.classList.add("quadrilateralsContainer"),M.setAttribute("width",0),M.setAttribute("height",0);const I=k.createElement("defs");M.append(I);const H=k.createElement("clipPath"),$=`clippath_${this.data.id}`;H.setAttribute("id",$),H.setAttribute("clipPathUnits","objectBoundingBox"),I.append(H);for(const[,{x:D,y:L},{x:_,y:W}]of F){const G=k.createElement("rect"),J=(_-x)/b,st=(d-L)/R,tt=(D-_)/b,ot=(L-W)/R;G.setAttribute("x",J),G.setAttribute("y",st),G.setAttribute("width",tt),G.setAttribute("height",ot),H.append(G),c?.push(`<rect vector-effect="non-scaling-stroke" x="${J}" y="${st}" width="${tt}" height="${ot}"/>`)}this.#t&&(c.push("</g></svg>')"),a.backgroundImage=c.join("")),this.container.append(M),this.container.style.clipPath=`url(#${$})`}_createPopup(){const{container:F,data:x}=this;F.setAttribute("aria-haspopup","dialog");const o=new j({data:{color:x.color,titleObj:x.titleObj,modificationDate:x.modificationDate,contentsObj:x.contentsObj,richText:x.richText,parentRect:x.rect,borderStyle:0,id:`popup_${x.id}`,rotation:x.rotation},parent:this.parent,elements:[this]});this.parent.div.append(o.render())}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(F,x=null){const o=[];if(this._fieldObjects){const r=this._fieldObjects[F];if(r)for(const{page:d,id:a,exportValues:c}of r){if(d===-1||a===x)continue;const b=typeof c=="string"?c:null,R=document.querySelector(`[data-element-id="${a}"]`);if(R&&!g.has(R)){(0,s.warn)(`_getElementsByName - element not allowed: ${a}`);continue}o.push({id:a,exportValue:b,domElement:R})}return o}for(const r of document.getElementsByName(F)){const{exportValue:d}=r,a=r.getAttribute("data-element-id");a!==x&&g.has(r)&&o.push({id:a,exportValue:d,domElement:r})}return o}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const F=this.getElementsToTriggerPopup();if(Array.isArray(F))for(const x of F)x.classList.add("highlightArea");else F.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:F,data:{id:x}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:F,editId:x})})}}class i extends S{constructor(F,x=null){super(F,{isRenderable:!0,ignoreBorder:!!x?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=F.data.isTooltipOnly}render(){const{data:F,linkService:x}=this,o=document.createElement("a");o.setAttribute("data-element-id",F.id);let r=!1;return F.url?(x.addLinkAttributes(o,F.url,F.newWindow),r=!0):F.action?(this._bindNamedAction(o,F.action),r=!0):F.attachment?(this.#e(o,F.attachment,F.attachmentDest),r=!0):F.setOCGState?(this.#s(o,F.setOCGState),r=!0):F.dest?(this._bindLink(o,F.dest),r=!0):(F.actions&&(F.actions.Action||F.actions["Mouse Up"]||F.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(o,F),r=!0),F.resetForm?(this._bindResetFormAction(o,F.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(o,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(o),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(F,x){F.href=this.linkService.getDestinationHash(x),F.onclick=()=>(x&&this.linkService.goToDestination(x),!1),(x||x==="")&&this.#t()}_bindNamedAction(F,x){F.href=this.linkService.getAnchorUrl(""),F.onclick=()=>(this.linkService.executeNamedAction(x),!1),this.#t()}#e(F,x,o=null){F.href=this.linkService.getAnchorUrl(""),F.onclick=()=>(this.downloadManager?.openOrDownloadData(x.content,x.filename,o),!1),this.#t()}#s(F,x){F.href=this.linkService.getAnchorUrl(""),F.onclick=()=>(this.linkService.executeSetOCGState(x),!1),this.#t()}_bindJSAction(F,x){F.href=this.linkService.getAnchorUrl("");const o=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(x.actions)){const d=o.get(r);d&&(F[d]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x.id,name:r}}),!1))}F.onclick||(F.onclick=()=>!1),this.#t()}_bindResetFormAction(F,x){const o=F.onclick;if(o||(F.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),o||(F.onclick=()=>!1);return}F.onclick=()=>{o?.();const{fields:r,refs:d,include:a}=x,c=[];if(r.length!==0||d.length!==0){const k=new Set(d);for(const M of r){const I=this._fieldObjects[M]||[];for(const{id:H}of I)k.add(H)}for(const M of Object.values(this._fieldObjects))for(const I of M)k.has(I.id)===a&&c.push(I)}else for(const k of Object.values(this._fieldObjects))c.push(...k);const b=this.annotationStorage,R=[];for(const k of c){const{id:M}=k;switch(R.push(M),k.type){case"text":{const H=k.defaultValue||"";b.setValue(M,{value:H});break}case"checkbox":case"radiobutton":{const H=k.defaultValue===k.exportValues;b.setValue(M,{value:H});break}case"combobox":case"listbox":{const H=k.defaultValue||"";b.setValue(M,{value:H});break}default:continue}const I=document.querySelector(`[data-element-id="${M}"]`);if(I){if(!g.has(I)){(0,s.warn)(`_bindResetFormAction - element not allowed: ${M}`);continue}}else continue;I.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:R,name:"ResetForm"}}),!1}}}class f extends S{constructor(F){super(F,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const F=document.createElement("img");return F.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",F.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),F.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(F),this.container}}class w extends S{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(F){this.data.hasOwnCanvas&&(F.previousSibling?.nodeName==="CANVAS"&&(F.previousSibling.hidden=!0),F.hidden=!1)}_getKeyModifier(F){return s.FeatureTest.platform.isMac?F.metaKey:F.ctrlKey}_setEventListener(F,x,o,r,d){o.includes("mouse")?F.addEventListener(o,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:d(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):F.addEventListener(o,a=>{if(o==="blur"){if(!x.focused||!a.relatedTarget)return;x.focused=!1}else if(o==="focus"){if(x.focused)return;x.focused=!0}d&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:d(a)}})})}_setEventListeners(F,x,o,r){for(const[d,a]of o)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(x||={focused:!1}),this._setEventListener(F,x,d,a,r),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(F,x,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(F,x,"focus","Focus",null))}_setBackgroundColor(F){const x=this.data.backgroundColor||null;F.style.backgroundColor=x===null?"transparent":s.Util.makeHexColor(x[0],x[1],x[2])}_setTextStyle(F){const x=["left","center","right"],{fontColor:o}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||p,d=F.style;let a;const c=2,b=R=>Math.round(10*R)/10;if(this.data.multiLine){const R=Math.abs(this.data.rect[3]-this.data.rect[1]-c),k=Math.round(R/(s.LINE_FACTOR*r))||1,M=R/k;a=Math.min(r,b(M/s.LINE_FACTOR))}else{const R=Math.abs(this.data.rect[3]-this.data.rect[1]-c);a=Math.min(r,b(R/s.LINE_FACTOR))}d.fontSize=`calc(${a}px * var(--scale-factor))`,d.color=s.Util.makeHexColor(o[0],o[1],o[2]),this.data.textAlignment!==null&&(d.textAlign=x[this.data.textAlignment])}_setRequired(F,x){x?F.setAttribute("required",!0):F.removeAttribute("required"),F.setAttribute("aria-required",x)}}class P extends w{constructor(F){const x=F.renderForms||F.data.hasOwnCanvas||!F.data.hasAppearance&&!!F.data.fieldValue;super(F,{isRenderable:x})}setPropertyOnSiblings(F,x,o,r){const d=this.annotationStorage;for(const a of this._getElementsByName(F.name,F.id))a.domElement&&(a.domElement[x]=o),d.setValue(a.id,{[r]:o})}render(){const F=this.annotationStorage,x=this.data.id;this.container.classList.add("textWidgetAnnotation");let o=null;if(this.renderForms){const r=F.getValue(x,{value:this.data.fieldValue});let d=r.value||"";const a=F.getValue(x,{charLimit:this.data.maxLen}).charLimit;a&&d.length>a&&(d=d.slice(0,a));let c=r.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const b={userValue:d,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(o=document.createElement("textarea"),o.textContent=c??d,this.data.doNotScroll&&(o.style.overflowY="hidden")):(o=document.createElement("input"),o.type="text",o.setAttribute("value",c??d),this.data.doNotScroll&&(o.style.overflowX="hidden")),this.data.hasOwnCanvas&&(o.hidden=!0),g.add(o),o.setAttribute("data-element-id",x),o.disabled=this.data.readOnly,o.name=this.data.fieldName,o.tabIndex=m,this._setRequired(o,this.data.required),a&&(o.maxLength=a),o.addEventListener("input",k=>{F.setValue(x,{value:k.target.value}),this.setPropertyOnSiblings(o,"value",k.target.value,"value"),b.formattedValue=null}),o.addEventListener("resetform",k=>{const M=this.data.defaultFieldValue??"";o.value=b.userValue=M,b.formattedValue=null});let R=k=>{const{formattedValue:M}=b;M!=null&&(k.target.value=M),k.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){o.addEventListener("focus",M=>{if(b.focused)return;const{target:I}=M;b.userValue&&(I.value=b.userValue),b.lastCommittedValue=I.value,b.commitKey=1,this.data.actions?.Focus||(b.focused=!0)}),o.addEventListener("updatefromsandbox",M=>{this.showElementAndHideCanvas(M.target);const I={value(H){b.userValue=H.detail.value??"",F.setValue(x,{value:b.userValue.toString()}),H.target.value=b.userValue},formattedValue(H){const{formattedValue:$}=H.detail;b.formattedValue=$,$!=null&&H.target!==document.activeElement&&(H.target.value=$),F.setValue(x,{formattedValue:$})},selRange(H){H.target.setSelectionRange(...H.detail.selRange)},charLimit:H=>{const{charLimit:$}=H.detail,{target:D}=H;if($===0){D.removeAttribute("maxLength");return}D.setAttribute("maxLength",$);let L=b.userValue;!L||L.length<=$||(L=L.slice(0,$),D.value=b.userValue=L,F.setValue(x,{value:L}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:D.selectionStart,selEnd:D.selectionEnd}}))}};this._dispatchEventFromSandbox(I,M)}),o.addEventListener("keydown",M=>{b.commitKey=1;let I=-1;if(M.key==="Escape"?I=0:M.key==="Enter"&&!this.data.multiLine?I=2:M.key==="Tab"&&(b.commitKey=3),I===-1)return;const{value:H}=M.target;b.lastCommittedValue!==H&&(b.lastCommittedValue=H,b.userValue=H,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:H,willCommit:!0,commitKey:I,selStart:M.target.selectionStart,selEnd:M.target.selectionEnd}}))});const k=R;R=null,o.addEventListener("blur",M=>{if(!b.focused||!M.relatedTarget)return;this.data.actions?.Blur||(b.focused=!1);const{value:I}=M.target;b.userValue=I,b.lastCommittedValue!==I&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:I,willCommit:!0,commitKey:b.commitKey,selStart:M.target.selectionStart,selEnd:M.target.selectionEnd}}),k(M)}),this.data.actions?.Keystroke&&o.addEventListener("beforeinput",M=>{b.lastCommittedValue=null;const{data:I,target:H}=M,{value:$,selectionStart:D,selectionEnd:L}=H;let _=D,W=L;switch(M.inputType){case"deleteWordBackward":{const G=$.substring(0,D).match(/\w*[^\w]*$/);G&&(_-=G[0].length);break}case"deleteWordForward":{const G=$.substring(D).match(/^[^\w]*\w*/);G&&(W+=G[0].length);break}case"deleteContentBackward":D===L&&(_-=1);break;case"deleteContentForward":D===L&&(W+=1);break}M.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:$,change:I||"",willCommit:!1,selStart:_,selEnd:W}})}),this._setEventListeners(o,b,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],M=>M.target.value)}if(R&&o.addEventListener("blur",R),this.data.comb){const M=(this.data.rect[2]-this.data.rect[0])/a;o.classList.add("comb"),o.style.letterSpacing=`calc(${M}px * var(--scale-factor) - 1ch)`}}else o=document.createElement("div"),o.textContent=this.data.fieldValue,o.style.verticalAlign="middle",o.style.display="table-cell",this.data.hasOwnCanvas&&(o.hidden=!0);return this._setTextStyle(o),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class T extends w{constructor(F){super(F,{isRenderable:!!F.data.hasOwnCanvas})}}class N extends w{constructor(F){super(F,{isRenderable:F.renderForms})}render(){const F=this.annotationStorage,x=this.data,o=x.id;let r=F.getValue(o,{value:x.exportValue===x.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",F.setValue(o,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const d=document.createElement("input");return g.add(d),d.setAttribute("data-element-id",o),d.disabled=x.readOnly,this._setRequired(d,this.data.required),d.type="checkbox",d.name=x.fieldName,r&&d.setAttribute("checked",!0),d.setAttribute("exportValue",x.exportValue),d.tabIndex=m,d.addEventListener("change",a=>{const{name:c,checked:b}=a.target;for(const R of this._getElementsByName(c,o)){const k=b&&R.exportValue===x.exportValue;R.domElement&&(R.domElement.checked=k),F.setValue(R.id,{value:k})}F.setValue(o,{value:b})}),d.addEventListener("resetform",a=>{const c=x.defaultFieldValue||"Off";a.target.checked=c===x.exportValue}),this.enableScripting&&this.hasJSActions&&(d.addEventListener("updatefromsandbox",a=>{const c={value(b){b.target.checked=b.detail.value!=="Off",F.setValue(o,{value:b.target.checked})}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(d,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(d),this._setDefaultPropertiesFromJS(d),this.container.append(d),this.container}}class O extends w{constructor(F){super(F,{isRenderable:F.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const F=this.annotationStorage,x=this.data,o=x.id;let r=F.getValue(o,{value:x.fieldValue===x.buttonValue}).value;if(typeof r=="string"&&(r=r!==x.buttonValue,F.setValue(o,{value:r})),r)for(const a of this._getElementsByName(x.fieldName,o))F.setValue(a.id,{value:!1});const d=document.createElement("input");if(g.add(d),d.setAttribute("data-element-id",o),d.disabled=x.readOnly,this._setRequired(d,this.data.required),d.type="radio",d.name=x.fieldName,r&&d.setAttribute("checked",!0),d.tabIndex=m,d.addEventListener("change",a=>{const{name:c,checked:b}=a.target;for(const R of this._getElementsByName(c,o))F.setValue(R.id,{value:!1});F.setValue(o,{value:b})}),d.addEventListener("resetform",a=>{const c=x.defaultFieldValue;a.target.checked=c!=null&&c===x.buttonValue}),this.enableScripting&&this.hasJSActions){const a=x.buttonValue;d.addEventListener("updatefromsandbox",c=>{const b={value:R=>{const k=a===R.detail.value;for(const M of this._getElementsByName(R.target.name)){const I=k&&M.id===o;M.domElement&&(M.domElement.checked=I),F.setValue(M.id,{value:I})}}};this._dispatchEventFromSandbox(b,c)}),this._setEventListeners(d,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(d),this._setDefaultPropertiesFromJS(d),this.container.append(d),this.container}}class B extends i{constructor(F){super(F,{ignoreBorder:F.data.hasAppearance})}render(){const F=super.render();F.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(F.title=this.data.alternativeText);const x=F.lastChild;return this.enableScripting&&this.hasJSActions&&x&&(this._setDefaultPropertiesFromJS(x),x.addEventListener("updatefromsandbox",o=>{this._dispatchEventFromSandbox({},o)})),F}}class z extends w{constructor(F){super(F,{isRenderable:F.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const F=this.annotationStorage,x=this.data.id,o=F.getValue(x,{value:this.data.fieldValue}),r=document.createElement("select");g.add(r),r.setAttribute("data-element-id",x),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=m;let d=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",k=>{const M=this.data.defaultFieldValue;for(const I of r.options)I.selected=I.value===M});for(const k of this.data.options){const M=document.createElement("option");M.textContent=k.displayValue,M.value=k.exportValue,o.value.includes(k.exportValue)&&(M.setAttribute("selected",!0),d=!1),r.append(M)}let a=null;if(d){const k=document.createElement("option");k.value=" ",k.setAttribute("hidden",!0),k.setAttribute("selected",!0),r.prepend(k),a=()=>{k.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const c=k=>{const M=k?"value":"textContent",{options:I,multiple:H}=r;return H?Array.prototype.filter.call(I,$=>$.selected).map($=>$[M]):I.selectedIndex===-1?null:I[I.selectedIndex][M]};let b=c(!1);const R=k=>{const M=k.target.options;return Array.prototype.map.call(M,I=>({displayValue:I.textContent,exportValue:I.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",k=>{const M={value(I){a?.();const H=I.detail.value,$=new Set(Array.isArray(H)?H:[H]);for(const D of r.options)D.selected=$.has(D.value);F.setValue(x,{value:c(!0)}),b=c(!1)},multipleSelection(I){r.multiple=!0},remove(I){const H=r.options,$=I.detail.remove;H[$].selected=!1,r.remove($),H.length>0&&Array.prototype.findIndex.call(H,L=>L.selected)===-1&&(H[0].selected=!0),F.setValue(x,{value:c(!0),items:R(I)}),b=c(!1)},clear(I){for(;r.length!==0;)r.remove(0);F.setValue(x,{value:null,items:[]}),b=c(!1)},insert(I){const{index:H,displayValue:$,exportValue:D}=I.detail.insert,L=r.children[H],_=document.createElement("option");_.textContent=$,_.value=D,L?L.before(_):r.append(_),F.setValue(x,{value:c(!0),items:R(I)}),b=c(!1)},items(I){const{items:H}=I.detail;for(;r.length!==0;)r.remove(0);for(const $ of H){const{displayValue:D,exportValue:L}=$,_=document.createElement("option");_.textContent=D,_.value=L,r.append(_)}r.options.length>0&&(r.options[0].selected=!0),F.setValue(x,{value:c(!0),items:R(I)}),b=c(!1)},indices(I){const H=new Set(I.detail.indices);for(const $ of I.target.options)$.selected=H.has($.index);F.setValue(x,{value:c(!0)}),b=c(!1)},editable(I){I.target.disabled=!I.detail.editable}};this._dispatchEventFromSandbox(M,k)}),r.addEventListener("input",k=>{const M=c(!0);F.setValue(x,{value:M}),k.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x,name:"Keystroke",value:b,changeEx:M,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],k=>k.target.value)):r.addEventListener("input",function(k){F.setValue(x,{value:c(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class j extends S{constructor(F){const{data:x,elements:o}=F;super(F,{isRenderable:S._hasPopupData(x)}),this.elements=o}render(){this.container.classList.add("popupAnnotation");const F=new X({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),x=[];for(const o of this.elements)o.popup=F,x.push(o.data.id),o.addHighlightArea();return this.container.setAttribute("aria-controls",x.map(o=>`${s.AnnotationPrefix}${o}`).join(",")),this.container}}class X{#t=this.#v.bind(this);#e=this.#g.bind(this);#s=this.#y.bind(this);#i=this.#A.bind(this);#n=null;#r=null;#a=null;#l=null;#c=null;#h=null;#f=null;#u=!1;#d=null;#o=null;#p=null;#m=null;#b=!1;constructor({container:F,color:x,elements:o,titleObj:r,modificationDate:d,contentsObj:a,richText:c,parent:b,rect:R,parentRect:k,open:M}){this.#r=F,this.#m=r,this.#a=a,this.#p=c,this.#h=b,this.#n=x,this.#o=R,this.#f=k,this.#c=o,this.#l=u.PDFDateString.toDateObject(d),this.trigger=o.flatMap(I=>I.getElementsToTriggerPopup());for(const I of this.trigger)I.addEventListener("click",this.#i),I.addEventListener("mouseenter",this.#s),I.addEventListener("mouseleave",this.#e),I.classList.add("popupTriggerArea");for(const I of o)I.container?.addEventListener("keydown",this.#t);this.#r.hidden=!0,M&&this.#A()}render(){if(this.#d)return;const{page:{view:F},viewport:{rawDims:{pageWidth:x,pageHeight:o,pageX:r,pageY:d}}}=this.#h,a=this.#d=document.createElement("div");if(a.className="popup",this.#n){const G=a.style.outlineColor=s.Util.makeHexColor(...this.#n);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?a.style.backgroundColor=`color-mix(in srgb, ${G} 30%, white)`:a.style.backgroundColor=s.Util.makeHexColor(...this.#n.map(st=>Math.floor(.7*(255-st)+st)))}const c=document.createElement("span");c.className="header";const b=document.createElement("h1");if(c.append(b),{dir:b.dir,str:b.textContent}=this.#m,a.append(c),this.#l){const G=document.createElement("span");G.classList.add("popupDate"),G.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),G.setAttribute("data-l10n-args",JSON.stringify({date:this.#l.toLocaleDateString(),time:this.#l.toLocaleTimeString()})),c.append(G)}const R=this.#a,k=this.#p;if(k?.str&&(!R?.str||R.str===k.str))C.XfaLayer.render({xfaHtml:k.html,intent:"richText",div:a}),a.lastChild.classList.add("richText","popupContent");else{const G=this._formatContents(R);a.append(G)}let M=!!this.#f,I=M?this.#f:this.#o;for(const G of this.#c)if(!I||s.Util.intersect(G.data.rect,I)!==null){I=G.data.rect,M=!0;break}const H=s.Util.normalizeRect([I[0],F[3]-I[1]+F[1],I[2],F[3]-I[3]+F[1]]),D=M?I[2]-I[0]+5:0,L=H[0]+D,_=H[1],{style:W}=this.#r;W.left=`${100*(L-r)/x}%`,W.top=`${100*(_-d)/o}%`,this.#r.append(a)}_formatContents({str:F,dir:x}){const o=document.createElement("p");o.classList.add("popupContent"),o.dir=x;const r=F.split(/(?:\r\n?|\n)/);for(let d=0,a=r.length;d<a;++d){const c=r[d];o.append(document.createTextNode(c)),d<a-1&&o.append(document.createElement("br"))}return o}#v(F){F.altKey||F.shiftKey||F.ctrlKey||F.metaKey||(F.key==="Enter"||F.key==="Escape"&&this.#u)&&this.#A()}#A(){this.#u=!this.#u,this.#u?(this.#y(),this.#r.addEventListener("click",this.#i),this.#r.addEventListener("keydown",this.#t)):(this.#g(),this.#r.removeEventListener("click",this.#i),this.#r.removeEventListener("keydown",this.#t))}#y(){this.#d||this.render(),this.isVisible?this.#u&&this.#r.classList.add("focused"):(this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#g(){this.#r.classList.remove("focused"),!(this.#u||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#b=this.isVisible,this.#b&&(this.#r.hidden=!0)}maybeShow(){this.#b&&(this.#b=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}}class Y extends S{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0}),this.textContent=F.data.textContent,this.textPosition=F.data.textPosition,this.annotationEditorType=s.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const F=document.createElement("div");F.classList.add("annotationTextContent"),F.setAttribute("role","comment");for(const x of this.textContent){const o=document.createElement("span");o.textContent=x,F.append(o)}this.container.append(F)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Z extends S{#t=null;constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const F=this.data,{width:x,height:o}=A(F.rect),r=this.svgFactory.create(x,o,!0),d=this.#t=this.svgFactory.createElement("svg:line");return d.setAttribute("x1",F.rect[2]-F.lineCoordinates[0]),d.setAttribute("y1",F.rect[3]-F.lineCoordinates[1]),d.setAttribute("x2",F.rect[2]-F.lineCoordinates[2]),d.setAttribute("y2",F.rect[3]-F.lineCoordinates[3]),d.setAttribute("stroke-width",F.borderStyle.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),r.append(d),this.container.append(r),!F.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class nt extends S{#t=null;constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const F=this.data,{width:x,height:o}=A(F.rect),r=this.svgFactory.create(x,o,!0),d=F.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",d/2),a.setAttribute("y",d/2),a.setAttribute("width",x-d),a.setAttribute("height",o-d),a.setAttribute("stroke-width",d||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!F.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class q extends S{#t=null;constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const F=this.data,{width:x,height:o}=A(F.rect),r=this.svgFactory.create(x,o,!0),d=F.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",x/2),a.setAttribute("cy",o/2),a.setAttribute("rx",x/2-d/2),a.setAttribute("ry",o/2-d/2),a.setAttribute("stroke-width",d||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!F.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class V extends S{#t=null;constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const F=this.data,{width:x,height:o}=A(F.rect),r=this.svgFactory.create(x,o,!0);let d=[];for(const c of F.vertices){const b=c.x-F.rect[0],R=F.rect[3]-c.y;d.push(b+","+R)}d=d.join(" ");const a=this.#t=this.svgFactory.createElement(this.svgElementName);return a.setAttribute("points",d),a.setAttribute("stroke-width",F.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!F.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class U extends V{constructor(F){super(F),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class K extends S{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Q extends S{#t=[];constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=s.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const F=this.data,{width:x,height:o}=A(F.rect),r=this.svgFactory.create(x,o,!0);for(const d of F.inkLists){let a=[];for(const b of d){const R=b.x-F.rect[0],k=F.rect[3]-b.y;a.push(`${R},${k}`)}a=a.join(" ");const c=this.svgFactory.createElement(this.svgElementName);this.#t.push(c),c.setAttribute("points",a),c.setAttribute("stroke-width",F.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),!F.popupRef&&this.hasPopupData&&this._createPopup(),r.append(c)}return this.container.append(r),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class et extends S{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ht extends S{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class lt extends S{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class at extends S{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class pt extends S{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ut extends S{#t=null;constructor(F){super(F,{isRenderable:!0});const{filename:x,content:o}=this.data.file;this.filename=(0,u.getFilenameFromUrl)(x,!0),this.content=o,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:x,content:o})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:F,data:x}=this;let o;x.hasAppearance||x.fillAlpha===0?o=document.createElement("div"):(o=document.createElement("img"),o.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(x.name)?"paperclip":"pushpin"}.svg`,x.fillAlpha&&x.fillAlpha<1&&(o.style=`filter: opacity(${Math.round(x.fillAlpha*100)}%);`)),o.addEventListener("dblclick",this.#e.bind(this)),this.#t=o;const{isMac:r}=s.FeatureTest.platform;return F.addEventListener("keydown",d=>{d.key==="Enter"&&(r?d.metaKey:d.ctrlKey)&&this.#e()}),!x.popupRef&&this.hasPopupData?this._createPopup():o.classList.add("popupTriggerArea"),F.append(o),F}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class ft{#t=null;#e=null;#s=new Map;constructor({div:F,accessibilityManager:x,annotationCanvasMap:o,page:r,viewport:d}){this.div=F,this.#t=x,this.#e=o,this.page=r,this.viewport=d,this.zIndex=0}#i(F,x){const o=F.firstChild||F;o.id=`${s.AnnotationPrefix}${x}`,this.div.append(F),this.#t?.moveElementInDOM(this.div,F,o,!1)}async render(F){const{annotations:x}=F,o=this.div;(0,u.setLayerDimensions)(o,this.viewport);const r=new Map,d={data:null,layer:o,linkService:F.linkService,downloadManager:F.downloadManager,imageResourcesPath:F.imageResourcesPath||"",renderForms:F.renderForms!==!1,svgFactory:new u.DOMSVGFactory,annotationStorage:F.annotationStorage||new l.AnnotationStorage,enableScripting:F.enableScripting===!0,hasJSActions:F.hasJSActions,fieldObjects:F.fieldObjects,parent:this,elements:null};for(const a of x){if(a.noHTML)continue;const c=a.annotationType===s.AnnotationType.POPUP;if(c){const k=r.get(a.id);if(!k)continue;d.elements=k}else{const{width:k,height:M}=A(a.rect);if(k<=0||M<=0)continue}d.data=a;const b=h.create(d);if(!b.isRenderable)continue;if(!c&&a.popupRef){const k=r.get(a.popupRef);k?k.push(b):r.set(a.popupRef,[b])}b.annotationEditorType>0&&this.#s.set(b.data.id,b);const R=b.render();a.hidden&&(R.style.visibility="hidden"),this.#i(R,a.id)}this.#n()}update({viewport:F}){const x=this.div;this.viewport=F,(0,u.setLayerDimensions)(x,{rotation:F.rotation}),this.#n(),x.hidden=!1}#n(){if(!this.#e)return;const F=this.div;for(const[x,o]of this.#e){const r=F.querySelector(`[data-annotation-id="${x}"]`);if(!r)continue;const{firstChild:d}=r;d?d.nodeName==="CANVAS"?d.replaceWith(o):d.before(o):r.append(o)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#s.values())}getEditableAnnotation(F){return this.#s.get(F)}}}),780:((t,e,n)=>{n.d(e,{AnnotationStorage:()=>v,PrintAnnotationStorage:()=>E,SerializableEmpty:()=>y});var s=n(266),u=n(115),l=n(825);const y=Object.freeze({map:null,hash:"",transfer:void 0});class v{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(m,p){const g=this.#e.get(m);return g===void 0?p:Object.assign(p,g)}getRawValue(m){return this.#e.get(m)}remove(m){if(this.#e.delete(m),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const p of this.#e.values())if(p instanceof u.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(m,p){const g=this.#e.get(m);let A=!1;if(g!==void 0)for(const[h,S]of Object.entries(p))g[h]!==S&&(A=!0,g[h]=S);else A=!0,this.#e.set(m,p);A&&this.#s(),p instanceof u.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(p.constructor._type)}has(m){return this.#e.has(m)}getAll(){return this.#e.size>0?(0,s.objectFromMap)(this.#e):null}setAll(m){for(const[p,g]of Object.entries(m))this.setValue(p,g)}get size(){return this.#e.size}#s(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new E(this)}get serializable(){if(this.#e.size===0)return y;const m=new Map,p=new l.MurmurHash3_64,g=[],A=Object.create(null);let h=!1;for(const[S,i]of this.#e){const f=i instanceof u.AnnotationEditor?i.serialize(!1,A):i;f&&(m.set(S,f),p.update(`${S}:${JSON.stringify(f)}`),h||=!!f.bitmap)}if(h)for(const S of m.values())S.bitmap&&g.push(S.bitmap);return m.size>0?{map:m,hash:p.hexdigest(),transfer:g}:y}}class E extends v{#t;constructor(m){super();const{map:p,hash:g,transfer:A}=m.serializable,h=structuredClone(p,A?{transfer:A}:null);this.#t={map:h,hash:g,transfer:A}}get print(){(0,s.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}}),406:((t,e,n)=>{n.a(t,async(s,u)=>{try{let Z=function(o){if(typeof o=="string"||o instanceof URL?o={url:o}:(0,l.isArrayBuffer)(o)&&(o={data:o}),typeof o!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!o.url&&!o.data&&!o.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const r=new U,{docId:d}=r,a=o.url?q(o.url):null,c=o.data?V(o.data):null,b=o.httpHeaders||null,R=o.withCredentials===!0,k=o.password??null,M=o.range instanceof K?o.range:null,I=Number.isInteger(o.rangeChunkSize)&&o.rangeChunkSize>0?o.rangeChunkSize:N;let H=o.worker instanceof at?o.worker:null;const $=o.verbosity,D=typeof o.docBaseUrl=="string"&&!(0,v.isDataScheme)(o.docBaseUrl)?o.docBaseUrl:null,L=typeof o.cMapUrl=="string"?o.cMapUrl:null,_=o.cMapPacked!==!1,W=o.CMapReaderFactory||j,G=typeof o.standardFontDataUrl=="string"?o.standardFontDataUrl:null,J=o.StandardFontDataFactory||Y,st=o.stopAtErrors!==!0,tt=Number.isInteger(o.maxImageSize)&&o.maxImageSize>-1?o.maxImageSize:-1,ot=o.isEvalSupported!==!1,rt=typeof o.isOffscreenCanvasSupported=="boolean"?o.isOffscreenCanvasSupported:!l.isNodeJS,ct=Number.isInteger(o.canvasMaxAreaInBytes)?o.canvasMaxAreaInBytes:-1,mt=typeof o.disableFontFace=="boolean"?o.disableFontFace:l.isNodeJS,At=o.fontExtraProperties===!0,Ct=o.enableXfa===!0,dt=o.ownerDocument||globalThis.document,Et=o.disableRange===!0,Ft=o.disableStream===!0,Nt=o.disableAutoFetch===!0,kt=o.pdfBug===!0,Lt=M?M.length:o.length??NaN,Mt=typeof o.useSystemFonts=="boolean"?o.useSystemFonts:!l.isNodeJS&&!mt,Yt=typeof o.useWorkerFetch=="boolean"?o.useWorkerFetch:W===v.DOMCMapReaderFactory&&J===v.DOMStandardFontDataFactory&&L&&G&&(0,v.isValidFetchUrl)(L,document.baseURI)&&(0,v.isValidFetchUrl)(G,document.baseURI),ge=o.canvasFactory||new z({ownerDocument:dt}),fs=o.filterFactory||new X({docId:d,ownerDocument:dt}),ps=null;(0,l.setVerbosityLevel)($);const Ut={canvasFactory:ge,filterFactory:fs};if(Yt||(Ut.cMapReaderFactory=new W({baseUrl:L,isCompressed:_}),Ut.standardFontDataFactory=new J({baseUrl:G})),!H){const Se={verbosity:$,port:p.GlobalWorkerOptions.workerPort};H=Se.port?at.fromPort(Se):new at(Se),r._worker=H}const Bt={docId:d,apiVersion:"4.0.379",data:c,password:k,disableAutoFetch:Nt,rangeChunkSize:I,length:Lt,docBaseUrl:D,enableXfa:Ct,evaluatorOptions:{maxImageSize:tt,disableFontFace:mt,ignoreErrors:st,isEvalSupported:ot,isOffscreenCanvasSupported:rt,canvasMaxAreaInBytes:ct,fontExtraProperties:At,useSystemFonts:Mt,cMapUrl:Yt?L:null,standardFontDataUrl:Yt?G:null}},gs={ignoreErrors:st,isEvalSupported:ot,disableFontFace:mt,fontExtraProperties:At,enableXfa:Ct,ownerDocument:dt,disableAutoFetch:Nt,pdfBug:kt,styleElement:ps};return H.promise.then(function(){if(r.destroyed)throw new Error("Loading aborted");const Se=nt(H,Bt),De=new Promise(function(Dt){let Xe;M?Xe=new S.PDFDataTransportStream({length:Lt,initialData:M.initialData,progressiveDone:M.progressiveDone,contentDispositionFilename:M.contentDispositionFilename,disableRange:Et,disableStream:Ft},M):c||(Xe=(_e=>l.isNodeJS?new w.PDFNodeStream(_e):(0,v.isValidFetchUrl)(_e.url)?new i.PDFFetchStream(_e):new f.PDFNetworkStream(_e))({url:a,length:Lt,httpHeaders:b,withCredentials:R,rangeChunkSize:I,disableRange:Et,disableStream:Ft})),Dt(Xe)});return Promise.all([Se,De]).then(function([Dt,Xe]){if(r.destroyed)throw new Error("Loading aborted");const Xs=new g.MessageHandler(d,Dt,H.port),_e=new pt(Xs,r,Xe,gs,Ut);r._transport=_e,Xs.send("Ready",null)})}).catch(r._capability.reject),r},q=function(o){if(o instanceof URL)return o.href;try{return new URL(o,window.location).href}catch{if(l.isNodeJS&&typeof o=="string")return o}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")},V=function(o){if(l.isNodeJS&&typeof Buffer<"u"&&o instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength)return o;if(typeof o=="string")return(0,l.stringToBytes)(o);if(typeof o=="object"&&!isNaN(o?.length)||(0,l.isArrayBuffer)(o))return new Uint8Array(o);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")};n.d(e,{PDFDataRangeTransport:()=>K,PDFWorker:()=>at,build:()=>x,getDocument:()=>Z,version:()=>F});var l=n(266),y=n(780),v=n(473),E=n(742),C=n(738),m=n(250),p=n(368),g=n(694),A=n(472),h=n(890),S=n(92),i=n(171),f=n(474),w=n(498),P=n(521),T=s([C,w]);[C,w]=T.then?(await T)():T;const N=65536,O=100,B=5e3,z=l.isNodeJS?C.NodeCanvasFactory:v.DOMCanvasFactory,j=l.isNodeJS?C.NodeCMapReaderFactory:v.DOMCMapReaderFactory,X=l.isNodeJS?C.NodeFilterFactory:v.DOMFilterFactory,Y=l.isNodeJS?C.NodeStandardFontDataFactory:v.DOMStandardFontDataFactory;async function nt(o,r){if(o.destroyed)throw new Error("Worker was destroyed");const d=await o.messageHandler.sendWithPromise("GetDocRequest",r,r.data?[r.data.buffer]:null);if(o.destroyed)throw new Error("Worker was destroyed");return d}class U{static#t=0;constructor(){this._capability=new l.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${U.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(r){throw this._worker?.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class K{constructor(r,d,a=!1,c=null){this.length=r,this.initialData=d,this.progressiveDone=a,this.contentDispositionFilename=c,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new l.PromiseCapability}addRangeListener(r){this._rangeListeners.push(r)}addProgressListener(r){this._progressListeners.push(r)}addProgressiveReadListener(r){this._progressiveReadListeners.push(r)}addProgressiveDoneListener(r){this._progressiveDoneListeners.push(r)}onDataRange(r,d){for(const a of this._rangeListeners)a(r,d)}onDataProgress(r,d){this._readyCapability.promise.then(()=>{for(const a of this._progressListeners)a(r,d)})}onDataProgressiveRead(r){this._readyCapability.promise.then(()=>{for(const d of this._progressiveReadListeners)d(r)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const r of this._progressiveDoneListeners)r()})}transportReady(){this._readyCapability.resolve()}requestDataRange(r,d){(0,l.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Q{constructor(r,d){this._pdfInfo=r,this._transport=d}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,l.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(r){return this._transport.getPage(r)}getPageIndex(r){return this._transport.getPageIndex(r)}getDestinations(){return this._transport.getDestinations()}getDestination(r){return this._transport.getDestination(r)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(r=!1){return this._transport.startCleanup(r||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class et{#t=null;#e=!1;constructor(r,d,a,c=!1){this._pageIndex=r,this._pageInfo=d,this._transport=a,this._stats=c?new v.StatTimer:null,this._pdfBug=c,this.commonObjs=a.commonObjs,this.objs=new ut,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:r,rotation:d=this.rotate,offsetX:a=0,offsetY:c=0,dontFlip:b=!1}={}){return new v.PageViewport({viewBox:this.view,scale:r,rotation:d,offsetX:a,offsetY:c,dontFlip:b})}getAnnotations({intent:r="display"}={}){const d=this._transport.getRenderingIntent(r);return this._transport.getAnnotations(this._pageIndex,d.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,l.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:r,viewport:d,intent:a="display",annotationMode:c=l.AnnotationMode.ENABLE,transform:b=null,background:R=null,optionalContentConfigPromise:k=null,annotationCanvasMap:M=null,pageColors:I=null,printAnnotationStorage:H=null}){this._stats?.time("Overall");const $=this._transport.getRenderingIntent(a,c,H);this.#e=!1,this.#i(),k||(k=this._transport.getOptionalContentConfig());let D=this._intentStates.get($.cacheKey);D||(D=Object.create(null),this._intentStates.set($.cacheKey,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const L=!!($.renderingIntent&l.RenderingIntentFlag.PRINT);D.displayReadyCapability||(D.displayReadyCapability=new l.PromiseCapability,D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList($));const _=J=>{D.renderTasks.delete(W),(this._maybeCleanupAfterRender||L)&&(this.#e=!0),this.#s(!L),J?(W.capability.reject(J),this._abortOperatorList({intentState:D,reason:J instanceof Error?J:new Error(J)})):W.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},W=new it({callback:_,params:{canvasContext:r,viewport:d,transform:b,background:R},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:M,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!L,pdfBug:this._pdfBug,pageColors:I});(D.renderTasks||=new Set).add(W);const G=W.task;return Promise.all([D.displayReadyCapability.promise,k]).then(([J,st])=>{if(this.destroyed){_();return}this._stats?.time("Rendering"),W.initializeGraphics({transparency:J,optionalContentConfig:st}),W.operatorListChanged()}).catch(_),G}getOperatorList({intent:r="display",annotationMode:d=l.AnnotationMode.ENABLE,printAnnotationStorage:a=null}={}){function c(){R.operatorList.lastChunk&&(R.opListReadCapability.resolve(R.operatorList),R.renderTasks.delete(k))}const b=this._transport.getRenderingIntent(r,d,a,!0);let R=this._intentStates.get(b.cacheKey);R||(R=Object.create(null),this._intentStates.set(b.cacheKey,R));let k;return R.opListReadCapability||(k=Object.create(null),k.operatorListChanged=c,R.opListReadCapability=new l.PromiseCapability,(R.renderTasks||=new Set).add(k),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(b)),R.opListReadCapability.promise}streamTextContent({includeMarkedContent:r=!1,disableNormalization:d=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:r===!0,disableNormalization:d===!0},{highWaterMark:100,size(c){return c.items.length}})}getTextContent(r={}){if(this._transport._htmlForXfa)return this.getXfa().then(a=>P.XfaText.textContent(a));const d=this.streamTextContent(r);return new Promise(function(a,c){function b(){R.read().then(function({value:M,done:I}){if(I){a(k);return}Object.assign(k.styles,M.styles),k.items.push(...M.items),b()},c)}const R=d.getReader(),k={items:[],styles:Object.create(null)};b()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const r=[];for(const d of this._intentStates.values())if(this._abortOperatorList({intentState:d,reason:new Error("Page was destroyed."),force:!0}),!d.opListReadCapability)for(const a of d.renderTasks)r.push(a.completed),a.cancel();return this.objs.clear(),this.#e=!1,this.#i(),Promise.all(r)}cleanup(r=!1){this.#e=!0;const d=this.#s(!1);return r&&d&&(this._stats&&=new v.StatTimer),d}#s(r=!1){if(this.#i(),!this.#e||this.destroyed)return!1;if(r)return this.#t=setTimeout(()=>{this.#t=null,this.#s(!1)},B),!1;for(const{renderTasks:d,operatorList:a}of this._intentStates.values())if(d.size>0||!a.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#i(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(r,d){const a=this._intentStates.get(d);a&&(this._stats?.timeEnd("Page Request"),a.displayReadyCapability?.resolve(r))}_renderPageChunk(r,d){for(let a=0,c=r.length;a<c;a++)d.operatorList.fnArray.push(r.fnArray[a]),d.operatorList.argsArray.push(r.argsArray[a]);d.operatorList.lastChunk=r.lastChunk,d.operatorList.separateAnnots=r.separateAnnots;for(const a of d.renderTasks)a.operatorListChanged();r.lastChunk&&this.#s(!0)}_pumpOperatorList({renderingIntent:r,cacheKey:d,annotationStorageSerializable:a}){const{map:c,transfer:b}=a,k=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:r,cacheKey:d,annotationStorage:c},b).getReader(),M=this._intentStates.get(d);M.streamReader=k;const I=()=>{k.read().then(({value:H,done:$})=>{if($){M.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(H,M),I())},H=>{if(M.streamReader=null,!this._transport.destroyed){if(M.operatorList){M.operatorList.lastChunk=!0;for(const $ of M.renderTasks)$.operatorListChanged();this.#s(!0)}if(M.displayReadyCapability)M.displayReadyCapability.reject(H);else if(M.opListReadCapability)M.opListReadCapability.reject(H);else throw H}})};I()}_abortOperatorList({intentState:r,reason:d,force:a=!1}){if(r.streamReader){if(r.streamReaderCancelTimeout&&(clearTimeout(r.streamReaderCancelTimeout),r.streamReaderCancelTimeout=null),!a){if(r.renderTasks.size>0)return;if(d instanceof v.RenderingCancelledException){let c=O;d.extraDelay>0&&d.extraDelay<1e3&&(c+=d.extraDelay),r.streamReaderCancelTimeout=setTimeout(()=>{r.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:r,reason:d,force:!0})},c);return}}if(r.streamReader.cancel(new l.AbortException(d.message)).catch(()=>{}),r.streamReader=null,!this._transport.destroyed){for(const[c,b]of this._intentStates)if(b===r){this._intentStates.delete(c);break}this.cleanup()}}}get stats(){return this._stats}}class ht{#t=new Set;#e=Promise.resolve();postMessage(r,d){const a={data:structuredClone(r,d?{transfer:d}:null)};this.#e.then(()=>{for(const c of this.#t)c.call(this,a)})}addEventListener(r,d){this.#t.add(d)}removeEventListener(r,d){this.#t.delete(d)}terminate(){this.#t.clear()}}const lt={isWorkerDisabled:!1,fakeWorkerId:0};l.isNodeJS&&(lt.isWorkerDisabled=!0,p.GlobalWorkerOptions.workerSrc||="./pdf.worker.mjs"),lt.isSameOrigin=function(o,r){let d;try{if(d=new URL(o),!d.origin||d.origin==="null")return!1}catch{return!1}const a=new URL(r,d);return d.origin===a.origin},lt.createCDNWrapper=function(o){const r=`await import("${o}");`;return URL.createObjectURL(new Blob([r],{type:"text/javascript"}))};class at{static#t;constructor({name:r=null,port:d=null,verbosity:a=(0,l.getVerbosityLevel)()}={}){if(this.name=r,this.destroyed=!1,this.verbosity=a,this._readyCapability=new l.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,d){if(at.#t?.has(d))throw new Error("Cannot use more than one PDFWorker per port.");(at.#t||=new WeakMap).set(d,this),this._initializeFromPort(d);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(r){this._port=r,this._messageHandler=new g.MessageHandler("main","worker",r),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!lt.isWorkerDisabled&&!at.#e){let{workerSrc:r}=at;try{lt.isSameOrigin(window.location.href,r)||(r=lt.createCDNWrapper(new URL(r,window.location).href));const d=new Worker(r,{type:"module"}),a=new g.MessageHandler("main","worker",d),c=()=>{d.removeEventListener("error",b),a.destroy(),d.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},b=()=>{this._webWorker||c()};d.addEventListener("error",b),a.on("test",k=>{if(d.removeEventListener("error",b),this.destroyed){c();return}k?(this._messageHandler=a,this._port=d,this._webWorker=d,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),a.destroy(),d.terminate())}),a.on("ready",k=>{if(d.removeEventListener("error",b),this.destroyed){c();return}try{R()}catch{this._setupFakeWorker()}});const R=()=>{const k=new Uint8Array;a.send("test",k,[k.buffer])};R();return}catch{(0,l.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){lt.isWorkerDisabled||((0,l.warn)("Setting up fake worker."),lt.isWorkerDisabled=!0),at._setupFakeWorkerGlobal.then(r=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const d=new ht;this._port=d;const a=`fake${lt.fakeWorkerId++}`,c=new g.MessageHandler(a+"_worker",a,d);r.setup(c,d);const b=new g.MessageHandler(a,a+"_worker",d);this._messageHandler=b,this._readyCapability.resolve(),b.send("configure",{verbosity:this.verbosity})}).catch(r=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${r.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),at.#t?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(r){if(!r?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const d=this.#t?.get(r.port);if(d){if(d._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return d}return new at(r)}static get workerSrc(){if(p.GlobalWorkerOptions.workerSrc)return p.GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#e(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const r=async()=>this.#e?this.#e:(await import(this.workerSrc)).WorkerMessageHandler;return(0,l.shadow)(this,"_setupFakeWorkerGlobal",r())}}class pt{#t=new Map;#e=new Map;#s=new Map;#i=null;constructor(r,d,a,c,b){this.messageHandler=r,this.loadingTask=d,this.commonObjs=new ut,this.fontLoader=new E.FontLoader({ownerDocument:c.ownerDocument,styleElement:c.styleElement}),this._params=c,this.canvasFactory=b.canvasFactory,this.filterFactory=b.filterFactory,this.cMapReaderFactory=b.cMapReaderFactory,this.standardFontDataFactory=b.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=a,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new l.PromiseCapability,this.setupMessageHandler()}#n(r,d=null){const a=this.#t.get(r);if(a)return a;const c=this.messageHandler.sendWithPromise(r,d);return this.#t.set(r,c),c}get annotationStorage(){return(0,l.shadow)(this,"annotationStorage",new y.AnnotationStorage)}getRenderingIntent(r,d=l.AnnotationMode.ENABLE,a=null,c=!1){let b=l.RenderingIntentFlag.DISPLAY,R=y.SerializableEmpty;switch(r){case"any":b=l.RenderingIntentFlag.ANY;break;case"display":break;case"print":b=l.RenderingIntentFlag.PRINT;break;default:(0,l.warn)(`getRenderingIntent - invalid intent: ${r}`)}switch(d){case l.AnnotationMode.DISABLE:b+=l.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case l.AnnotationMode.ENABLE:break;case l.AnnotationMode.ENABLE_FORMS:b+=l.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case l.AnnotationMode.ENABLE_STORAGE:b+=l.RenderingIntentFlag.ANNOTATIONS_STORAGE,R=(b&l.RenderingIntentFlag.PRINT&&a instanceof y.PrintAnnotationStorage?a:this.annotationStorage).serializable;break;default:(0,l.warn)(`getRenderingIntent - invalid annotationMode: ${d}`)}return c&&(b+=l.RenderingIntentFlag.OPLIST),{renderingIntent:b,cacheKey:`${b}_${R.hash}`,annotationStorageSerializable:R}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new l.PromiseCapability,this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const r=[];for(const a of this.#e.values())r.push(a._destroy());this.#e.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const d=this.messageHandler.sendWithPromise("Terminate",null);return r.push(d),Promise.all(r).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new l.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:r,loadingTask:d}=this;r.on("GetReader",(a,c)=>{(0,l.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=b=>{this._lastProgress={loaded:b.loaded,total:b.total}},c.onPull=()=>{this._fullReader.read().then(function({value:b,done:R}){if(R){c.close();return}(0,l.assert)(b instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(b),1,[b])}).catch(b=>{c.error(b)})},c.onCancel=b=>{this._fullReader.cancel(b),c.ready.catch(R=>{if(!this.destroyed)throw R})}}),r.on("ReaderHeadersReady",a=>{const c=new l.PromiseCapability,b=this._fullReader;return b.headersReady.then(()=>{(!b.isStreamingSupported||!b.isRangeSupported)&&(this._lastProgress&&d.onProgress?.(this._lastProgress),b.onProgress=R=>{d.onProgress?.({loaded:R.loaded,total:R.total})}),c.resolve({isStreamingSupported:b.isStreamingSupported,isRangeSupported:b.isRangeSupported,contentLength:b.contentLength})},c.reject),c.promise}),r.on("GetRangeReader",(a,c)=>{(0,l.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const b=this._networkStream.getRangeReader(a.begin,a.end);if(!b){c.close();return}c.onPull=()=>{b.read().then(function({value:R,done:k}){if(k){c.close();return}(0,l.assert)(R instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(R),1,[R])}).catch(R=>{c.error(R)})},c.onCancel=R=>{b.cancel(R),c.ready.catch(k=>{if(!this.destroyed)throw k})}}),r.on("GetDoc",({pdfInfo:a})=>{this._numPages=a.numPages,this._htmlForXfa=a.htmlForXfa,delete a.htmlForXfa,d._capability.resolve(new Q(a,this))}),r.on("DocException",function(a){let c;switch(a.name){case"PasswordException":c=new l.PasswordException(a.message,a.code);break;case"InvalidPDFException":c=new l.InvalidPDFException(a.message);break;case"MissingPDFException":c=new l.MissingPDFException(a.message);break;case"UnexpectedResponseException":c=new l.UnexpectedResponseException(a.message,a.status);break;case"UnknownErrorException":c=new l.UnknownErrorException(a.message,a.details);break;default:(0,l.unreachable)("DocException - expected a valid Error.")}d._capability.reject(c)}),r.on("PasswordRequest",a=>{if(this.#i=new l.PromiseCapability,d.onPassword){const c=b=>{b instanceof Error?this.#i.reject(b):this.#i.resolve({password:b})};try{d.onPassword(c,a.code)}catch(b){this.#i.reject(b)}}else this.#i.reject(new l.PasswordException(a.message,a.code));return this.#i.promise}),r.on("DataLoaded",a=>{d.onProgress?.({loaded:a.length,total:a.length}),this.downloadInfoCapability.resolve(a)}),r.on("StartRenderPage",a=>{if(this.destroyed)return;this.#e.get(a.pageIndex)._startRenderPage(a.transparency,a.cacheKey)}),r.on("commonobj",([a,c,b])=>{if(this.destroyed||this.commonObjs.has(a))return null;switch(c){case"Font":const R=this._params;if("error"in b){const H=b.error;(0,l.warn)(`Error during font loading: ${H}`),this.commonObjs.resolve(a,H);break}const k=R.pdfBug&&globalThis.FontInspector?.enabled?(H,$)=>globalThis.FontInspector.fontAdded(H,$):null,M=new E.FontFaceObject(b,{isEvalSupported:R.isEvalSupported,disableFontFace:R.disableFontFace,ignoreErrors:R.ignoreErrors,inspectFont:k});this.fontLoader.bind(M).catch(H=>r.sendWithPromise("FontFallback",{id:a})).finally(()=>{!R.fontExtraProperties&&M.data&&(M.data=null),this.commonObjs.resolve(a,M)});break;case"CopyLocalImage":const{imageRef:I}=b;(0,l.assert)(I,"The imageRef must be defined.");for(const H of this.#e.values())for(const[,$]of H.objs)if($.ref===I)return $.dataLen?(this.commonObjs.resolve(a,structuredClone($)),$.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(a,b);break;default:throw new Error(`Got unknown common object type ${c}`)}return null}),r.on("obj",([a,c,b,R])=>{if(this.destroyed)return;const k=this.#e.get(c);if(!k.objs.has(a)){if(k._intentStates.size===0){R?.bitmap?.close();return}switch(b){case"Image":k.objs.resolve(a,R),R?.dataLen>l.MAX_IMAGE_SIZE_TO_CACHE&&(k._maybeCleanupAfterRender=!0);break;case"Pattern":k.objs.resolve(a,R);break;default:throw new Error(`Got unknown object type ${b}`)}}}),r.on("DocProgress",a=>{this.destroyed||d.onProgress?.({loaded:a.loaded,total:a.total})}),r.on("FetchBuiltInCMap",a=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(a):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),r.on("FetchStandardFontData",a=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(a):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,l.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:r,transfer:d}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:r,filename:this._fullReader?.filename??null},d).finally(()=>{this.annotationStorage.resetModified()})}getPage(r){if(!Number.isInteger(r)||r<=0||r>this._numPages)return Promise.reject(new Error("Invalid page request."));const d=r-1,a=this.#s.get(d);if(a)return a;const c=this.messageHandler.sendWithPromise("GetPage",{pageIndex:d}).then(b=>{if(this.destroyed)throw new Error("Transport destroyed");const R=new et(d,b,this,this._params.pdfBug);return this.#e.set(d,R),R});return this.#s.set(d,c),c}getPageIndex(r){return typeof r!="object"||r===null||!Number.isInteger(r.num)||r.num<0||!Number.isInteger(r.gen)||r.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:r.num,gen:r.gen})}getAnnotations(r,d){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:r,intent:d})}getFieldObjects(){return this.#n("GetFieldObjects")}hasJSActions(){return this.#n("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(r){return typeof r!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:r})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#n("GetDocJSActions")}getPageJSActions(r){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:r})}getStructTree(r){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:r})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(r=>new h.OptionalContentConfig(r))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const r="GetMetadata",d=this.#t.get(r);if(d)return d;const a=this.messageHandler.sendWithPromise(r,null).then(c=>({info:c[0],metadata:c[1]?new A.Metadata(c[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(r,a),a}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(r=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const d of this.#e.values())if(!d.cleanup())throw new Error(`startCleanup: Page ${d.pageNumber} is currently rendering.`);this.commonObjs.clear(),r||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:r,enableXfa:d}=this._params;return(0,l.shadow)(this,"loadingParams",{disableAutoFetch:r,enableXfa:d})}}class ut{#t=Object.create(null);#e(r){return this.#t[r]||={capability:new l.PromiseCapability,data:null}}get(r,d=null){if(d){const c=this.#e(r);return c.capability.promise.then(()=>d(c.data)),null}const a=this.#t[r];if(!a?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${r}.`);return a.data}has(r){return this.#t[r]?.capability.settled??!1}resolve(r,d=null){const a=this.#e(r);a.data=d,a.capability.resolve()}clear(){for(const r in this.#t){const{data:d}=this.#t[r];d?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const r in this.#t){const{capability:d,data:a}=this.#t[r];d.settled&&(yield[r,a])}}}class ft{#t=null;constructor(r){this.#t=r,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(r=0){this.#t.cancel(null,r)}get separateAnnots(){const{separateAnnots:r}=this.#t.operatorList;if(!r)return!1;const{annotationCanvasMap:d}=this.#t;return r.form||r.canvas&&d?.size>0}}class it{static#t=new WeakSet;constructor({callback:r,params:d,objs:a,commonObjs:c,annotationCanvasMap:b,operatorList:R,pageIndex:k,canvasFactory:M,filterFactory:I,useRequestAnimationFrame:H=!1,pdfBug:$=!1,pageColors:D=null}){this.callback=r,this.params=d,this.objs=a,this.commonObjs=c,this.annotationCanvasMap=b,this.operatorListIdx=null,this.operatorList=R,this._pageIndex=k,this.canvasFactory=M,this.filterFactory=I,this._pdfBug=$,this.pageColors=D,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=H===!0&&typeof window<"u",this.cancelled=!1,this.capability=new l.PromiseCapability,this.task=new ft(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=d.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:r=!1,optionalContentConfig:d}){if(this.cancelled)return;if(this._canvas){if(it.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");it.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:a,viewport:c,transform:b,background:R}=this.params;this.gfx=new m.CanvasGraphics(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:d},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:b,viewport:c,transparency:r,background:R}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(r=null,d=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),it.#t.delete(this._canvas),this.callback(r||new v.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,d))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),it.#t.delete(this._canvas),this.callback())))}}const F="4.0.379",x="9e14d04fd";u()}catch(N){u(N)}})}),822:((t,e,n)=>{n.d(e,{BaseCMapReaderFactory:()=>y,BaseCanvasFactory:()=>l,BaseFilterFactory:()=>u,BaseSVGFactory:()=>E,BaseStandardFontDataFactory:()=>v});var s=n(266);class u{constructor(){this.constructor===u&&(0,s.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(m){return"none"}addHCMFilter(m,p){return"none"}addHighlightHCMFilter(m,p,g,A){return"none"}destroy(m=!1){}}class l{constructor(){this.constructor===l&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(m,p){if(m<=0||p<=0)throw new Error("Invalid canvas size");const g=this._createCanvas(m,p);return{canvas:g,context:g.getContext("2d")}}reset(m,p,g){if(!m.canvas)throw new Error("Canvas is not specified");if(p<=0||g<=0)throw new Error("Invalid canvas size");m.canvas.width=p,m.canvas.height=g}destroy(m){if(!m.canvas)throw new Error("Canvas is not specified");m.canvas.width=0,m.canvas.height=0,m.canvas=null,m.context=null}_createCanvas(m,p){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}class y{constructor({baseUrl:m=null,isCompressed:p=!0}){this.constructor===y&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=m,this.isCompressed=p}async fetch({name:m}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!m)throw new Error("CMap name must be specified.");const p=this.baseUrl+m+(this.isCompressed?".bcmap":""),g=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(p,g).catch(A=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${p}`)})}_fetchData(m,p){(0,s.unreachable)("Abstract method `_fetchData` called.")}}class v{constructor({baseUrl:m=null}){this.constructor===v&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=m}async fetch({filename:m}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!m)throw new Error("Font filename must be specified.");const p=`${this.baseUrl}${m}`;return this._fetchData(p).catch(g=>{throw new Error(`Unable to load font data at: ${p}`)})}_fetchData(m){(0,s.unreachable)("Abstract method `_fetchData` called.")}}class E{constructor(){this.constructor===E&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(m,p,g=!1){if(m<=0||p<=0)throw new Error("Invalid SVG dimensions");const A=this._createSVG("svg:svg");return A.setAttribute("version","1.1"),g||(A.setAttribute("width",`${m}px`),A.setAttribute("height",`${p}px`)),A.setAttribute("preserveAspectRatio","none"),A.setAttribute("viewBox",`0 0 ${m} ${p}`),A}createElement(m){if(typeof m!="string")throw new Error("Invalid SVG element type");return this._createSVG(m)}_createSVG(m){(0,s.unreachable)("Abstract method `_createSVG` called.")}}}),250:((t,e,n)=>{n.d(e,{CanvasGraphics:()=>F});var s=n(266),u=n(473);const l={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function y(x,o){if(!o)return;const r=o[2]-o[0],d=o[3]-o[1],a=new Path2D;a.rect(o[0],o[1],r,d),x.clip(a)}class v{constructor(){this.constructor===v&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class E extends v{constructor(o){super(),this._type=o[1],this._bbox=o[2],this._colorStops=o[3],this._p0=o[4],this._p1=o[5],this._r0=o[6],this._r1=o[7],this.matrix=null}_createGradient(o){let r;this._type==="axial"?r=o.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(r=o.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const d of this._colorStops)r.addColorStop(d[0],d[1]);return r}getPattern(o,r,d,a){let c;if(a===l.STROKE||a===l.FILL){const b=r.current.getClippedPathBoundingBox(a,(0,u.getCurrentTransform)(o))||[0,0,0,0],R=Math.ceil(b[2]-b[0])||1,k=Math.ceil(b[3]-b[1])||1,M=r.cachedCanvases.getCanvas("pattern",R,k,!0),I=M.context;I.clearRect(0,0,I.canvas.width,I.canvas.height),I.beginPath(),I.rect(0,0,I.canvas.width,I.canvas.height),I.translate(-b[0],-b[1]),d=s.Util.transform(d,[1,0,0,1,b[0],b[1]]),I.transform(...r.baseTransform),this.matrix&&I.transform(...this.matrix),y(I,this._bbox),I.fillStyle=this._createGradient(I),I.fill(),c=o.createPattern(M.canvas,"no-repeat");const H=new DOMMatrix(d);c.setTransform(H)}else y(o,this._bbox),c=this._createGradient(o);return c}}function C(x,o,r,d,a,c,b,R){const k=o.coords,M=o.colors,I=x.data,H=x.width*4;let $;k[r+1]>k[d+1]&&($=r,r=d,d=$,$=c,c=b,b=$),k[d+1]>k[a+1]&&($=d,d=a,a=$,$=b,b=R,R=$),k[r+1]>k[d+1]&&($=r,r=d,d=$,$=c,c=b,b=$);const D=(k[r]+o.offsetX)*o.scaleX,L=(k[r+1]+o.offsetY)*o.scaleY,_=(k[d]+o.offsetX)*o.scaleX,W=(k[d+1]+o.offsetY)*o.scaleY,G=(k[a]+o.offsetX)*o.scaleX,J=(k[a+1]+o.offsetY)*o.scaleY;if(L>=J)return;const st=M[c],tt=M[c+1],ot=M[c+2],rt=M[b],ct=M[b+1],mt=M[b+2],At=M[R],Ct=M[R+1],dt=M[R+2],Et=Math.round(L),Ft=Math.round(J);let Nt,kt,Lt,Mt,Yt,ge,fs,ps;for(let Ut=Et;Ut<=Ft;Ut++){if(Ut<W){const Dt=Ut<L?0:(L-Ut)/(L-W);Nt=D-(D-_)*Dt,kt=st-(st-rt)*Dt,Lt=tt-(tt-ct)*Dt,Mt=ot-(ot-mt)*Dt}else{let Dt;Ut>J?Dt=1:W===J?Dt=0:Dt=(W-Ut)/(W-J),Nt=_-(_-G)*Dt,kt=rt-(rt-At)*Dt,Lt=ct-(ct-Ct)*Dt,Mt=mt-(mt-dt)*Dt}let Bt;Ut<L?Bt=0:Ut>J?Bt=1:Bt=(L-Ut)/(L-J),Yt=D-(D-G)*Bt,ge=st-(st-At)*Bt,fs=tt-(tt-Ct)*Bt,ps=ot-(ot-dt)*Bt;const gs=Math.round(Math.min(Nt,Yt)),Se=Math.round(Math.max(Nt,Yt));let De=H*Ut+gs*4;for(let Dt=gs;Dt<=Se;Dt++)Bt=(Nt-Dt)/(Nt-Yt),Bt<0?Bt=0:Bt>1&&(Bt=1),I[De++]=kt-(kt-ge)*Bt|0,I[De++]=Lt-(Lt-fs)*Bt|0,I[De++]=Mt-(Mt-ps)*Bt|0,I[De++]=255}}function m(x,o,r){const d=o.coords,a=o.colors;let c,b;switch(o.type){case"lattice":const R=o.verticesPerRow,k=Math.floor(d.length/R)-1,M=R-1;for(c=0;c<k;c++){let I=c*R;for(let H=0;H<M;H++,I++)C(x,r,d[I],d[I+1],d[I+R],a[I],a[I+1],a[I+R]),C(x,r,d[I+R+1],d[I+1],d[I+R],a[I+R+1],a[I+1],a[I+R])}break;case"triangles":for(c=0,b=d.length;c<b;c+=3)C(x,r,d[c],d[c+1],d[c+2],a[c],a[c+1],a[c+2]);break;default:throw new Error("illegal figure")}}class p extends v{constructor(o){super(),this._coords=o[2],this._colors=o[3],this._figures=o[4],this._bounds=o[5],this._bbox=o[7],this._background=o[8],this.matrix=null}_createMeshCanvas(o,r,d){const R=Math.floor(this._bounds[0]),k=Math.floor(this._bounds[1]),M=Math.ceil(this._bounds[2])-R,I=Math.ceil(this._bounds[3])-k,H=Math.min(Math.ceil(Math.abs(M*o[0]*1.1)),3e3),$=Math.min(Math.ceil(Math.abs(I*o[1]*1.1)),3e3),D=M/H,L=I/$,_={coords:this._coords,colors:this._colors,offsetX:-R,offsetY:-k,scaleX:1/D,scaleY:1/L},W=H+4,G=$+4,J=d.getCanvas("mesh",W,G,!1),st=J.context,tt=st.createImageData(H,$);if(r){const rt=tt.data;for(let ct=0,mt=rt.length;ct<mt;ct+=4)rt[ct]=r[0],rt[ct+1]=r[1],rt[ct+2]=r[2],rt[ct+3]=255}for(const rt of this._figures)m(tt,rt,_);return st.putImageData(tt,2,2),{canvas:J.canvas,offsetX:R-2*D,offsetY:k-2*L,scaleX:D,scaleY:L}}getPattern(o,r,d,a){y(o,this._bbox);let c;if(a===l.SHADING)c=s.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(o));else if(c=s.Util.singularValueDecompose2dScale(r.baseTransform),this.matrix){const R=s.Util.singularValueDecompose2dScale(this.matrix);c=[c[0]*R[0],c[1]*R[1]]}const b=this._createMeshCanvas(c,a===l.SHADING?null:this._background,r.cachedCanvases);return a!==l.SHADING&&(o.setTransform(...r.baseTransform),this.matrix&&o.transform(...this.matrix)),o.translate(b.offsetX,b.offsetY),o.scale(b.scaleX,b.scaleY),o.createPattern(b.canvas,"no-repeat")}}class g extends v{getPattern(){return"hotpink"}}function A(x){switch(x[0]){case"RadialAxial":return new E(x);case"Mesh":return new p(x);case"Dummy":return new g}throw new Error(`Unknown IR type: ${x[0]}`)}const h={COLORED:1,UNCOLORED:2};class S{static MAX_PATTERN_SIZE=3e3;constructor(o,r,d,a,c){this.operatorList=o[2],this.matrix=o[3]||[1,0,0,1,0,0],this.bbox=o[4],this.xstep=o[5],this.ystep=o[6],this.paintType=o[7],this.tilingType=o[8],this.color=r,this.ctx=d,this.canvasGraphicsFactory=a,this.baseTransform=c}createPatternCanvas(o){const r=this.operatorList,d=this.bbox,a=this.xstep,c=this.ystep,b=this.paintType,R=this.tilingType,k=this.color,M=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+R);const I=d[0],H=d[1],$=d[2],D=d[3],L=s.Util.singularValueDecompose2dScale(this.matrix),_=s.Util.singularValueDecompose2dScale(this.baseTransform),W=[L[0]*_[0],L[1]*_[1]],G=this.getSizeAndScale(a,this.ctx.canvas.width,W[0]),J=this.getSizeAndScale(c,this.ctx.canvas.height,W[1]),st=o.cachedCanvases.getCanvas("pattern",G.size,J.size,!0),tt=st.context,ot=M.createCanvasGraphics(tt);ot.groupLevel=o.groupLevel,this.setFillAndStrokeStyleToContext(ot,b,k);let rt=I,ct=H,mt=$,At=D;return I<0&&(rt=0,mt+=Math.abs(I)),H<0&&(ct=0,At+=Math.abs(H)),tt.translate(-(G.scale*rt),-(J.scale*ct)),ot.transform(G.scale,0,0,J.scale,0,0),tt.save(),this.clipBbox(ot,rt,ct,mt,At),ot.baseTransform=(0,u.getCurrentTransform)(ot.ctx),ot.executeOperatorList(r),ot.endDrawing(),{canvas:st.canvas,scaleX:G.scale,scaleY:J.scale,offsetX:rt,offsetY:ct}}getSizeAndScale(o,r,d){o=Math.abs(o);const a=Math.max(S.MAX_PATTERN_SIZE,r);let c=Math.ceil(o*d);return c>=a?c=a:d=c/o,{scale:d,size:c}}clipBbox(o,r,d,a,c){const b=a-r,R=c-d;o.ctx.rect(r,d,b,R),o.current.updateRectMinMax((0,u.getCurrentTransform)(o.ctx),[r,d,a,c]),o.clip(),o.endPath()}setFillAndStrokeStyleToContext(o,r,d){const a=o.ctx,c=o.current;switch(r){case h.COLORED:const b=this.ctx;a.fillStyle=b.fillStyle,a.strokeStyle=b.strokeStyle,c.fillColor=b.fillStyle,c.strokeColor=b.strokeStyle;break;case h.UNCOLORED:const R=s.Util.makeHexColor(d[0],d[1],d[2]);a.fillStyle=R,a.strokeStyle=R,c.fillColor=R,c.strokeColor=R;break;default:throw new s.FormatError(`Unsupported paint type: ${r}`)}}getPattern(o,r,d,a){let c=d;a!==l.SHADING&&(c=s.Util.transform(c,r.baseTransform),this.matrix&&(c=s.Util.transform(c,this.matrix)));const b=this.createPatternCanvas(r);let R=new DOMMatrix(c);R=R.translate(b.offsetX,b.offsetY),R=R.scale(1/b.scaleX,1/b.scaleY);const k=o.createPattern(b.canvas,"repeat");return k.setTransform(R),k}}function i({src:x,srcPos:o=0,dest:r,width:d,height:a,nonBlackColor:c=4294967295,inverseDecode:b=!1}){const R=s.FeatureTest.isLittleEndian?4278190080:255,[k,M]=b?[c,R]:[R,c],I=d>>3,H=d&7,$=x.length;r=new Uint32Array(r.buffer);let D=0;for(let L=0;L<a;L++){for(const W=o+I;o<W;o++){const G=o<$?x[o]:255;r[D++]=G&128?M:k,r[D++]=G&64?M:k,r[D++]=G&32?M:k,r[D++]=G&16?M:k,r[D++]=G&8?M:k,r[D++]=G&4?M:k,r[D++]=G&2?M:k,r[D++]=G&1?M:k}if(H===0)continue;const _=o<$?x[o++]:255;for(let W=0;W<H;W++)r[D++]=_&1<<7-W?M:k}return{srcPos:o,destPos:D}}const f=16,w=100,P=4096,T=15,N=10,O=1e3,B=16;function z(x,o){if(x._removeMirroring)throw new Error("Context is already forwarding operations.");x.__originalSave=x.save,x.__originalRestore=x.restore,x.__originalRotate=x.rotate,x.__originalScale=x.scale,x.__originalTranslate=x.translate,x.__originalTransform=x.transform,x.__originalSetTransform=x.setTransform,x.__originalResetTransform=x.resetTransform,x.__originalClip=x.clip,x.__originalMoveTo=x.moveTo,x.__originalLineTo=x.lineTo,x.__originalBezierCurveTo=x.bezierCurveTo,x.__originalRect=x.rect,x.__originalClosePath=x.closePath,x.__originalBeginPath=x.beginPath,x._removeMirroring=()=>{x.save=x.__originalSave,x.restore=x.__originalRestore,x.rotate=x.__originalRotate,x.scale=x.__originalScale,x.translate=x.__originalTranslate,x.transform=x.__originalTransform,x.setTransform=x.__originalSetTransform,x.resetTransform=x.__originalResetTransform,x.clip=x.__originalClip,x.moveTo=x.__originalMoveTo,x.lineTo=x.__originalLineTo,x.bezierCurveTo=x.__originalBezierCurveTo,x.rect=x.__originalRect,x.closePath=x.__originalClosePath,x.beginPath=x.__originalBeginPath,delete x._removeMirroring},x.save=function(){o.save(),this.__originalSave()},x.restore=function(){o.restore(),this.__originalRestore()},x.translate=function(d,a){o.translate(d,a),this.__originalTranslate(d,a)},x.scale=function(d,a){o.scale(d,a),this.__originalScale(d,a)},x.transform=function(d,a,c,b,R,k){o.transform(d,a,c,b,R,k),this.__originalTransform(d,a,c,b,R,k)},x.setTransform=function(d,a,c,b,R,k){o.setTransform(d,a,c,b,R,k),this.__originalSetTransform(d,a,c,b,R,k)},x.resetTransform=function(){o.resetTransform(),this.__originalResetTransform()},x.rotate=function(d){o.rotate(d),this.__originalRotate(d)},x.clip=function(d){o.clip(d),this.__originalClip(d)},x.moveTo=function(r,d){o.moveTo(r,d),this.__originalMoveTo(r,d)},x.lineTo=function(r,d){o.lineTo(r,d),this.__originalLineTo(r,d)},x.bezierCurveTo=function(r,d,a,c,b,R){o.bezierCurveTo(r,d,a,c,b,R),this.__originalBezierCurveTo(r,d,a,c,b,R)},x.rect=function(r,d,a,c){o.rect(r,d,a,c),this.__originalRect(r,d,a,c)},x.closePath=function(){o.closePath(),this.__originalClosePath()},x.beginPath=function(){o.beginPath(),this.__originalBeginPath()}}class j{constructor(o){this.canvasFactory=o,this.cache=Object.create(null)}getCanvas(o,r,d){let a;return this.cache[o]!==void 0?(a=this.cache[o],this.canvasFactory.reset(a,r,d)):(a=this.canvasFactory.create(r,d),this.cache[o]=a),a}delete(o){delete this.cache[o]}clear(){for(const o in this.cache){const r=this.cache[o];this.canvasFactory.destroy(r),delete this.cache[o]}}}function X(x,o,r,d,a,c,b,R,k,M){const[I,H,$,D,L,_]=(0,u.getCurrentTransform)(x);if(H===0&&$===0){const J=b*I+L,st=Math.round(J),tt=R*D+_,ot=Math.round(tt),rt=(b+k)*I+L,ct=Math.abs(Math.round(rt)-st)||1,mt=(R+M)*D+_,At=Math.abs(Math.round(mt)-ot)||1;return x.setTransform(Math.sign(I),0,0,Math.sign(D),st,ot),x.drawImage(o,r,d,a,c,0,0,ct,At),x.setTransform(I,H,$,D,L,_),[ct,At]}if(I===0&&D===0){const J=R*$+L,st=Math.round(J),tt=b*H+_,ot=Math.round(tt),rt=(R+M)*$+L,ct=Math.abs(Math.round(rt)-st)||1,mt=(b+k)*H+_,At=Math.abs(Math.round(mt)-ot)||1;return x.setTransform(0,Math.sign(H),Math.sign($),0,st,ot),x.drawImage(o,r,d,a,c,0,0,At,ct),x.setTransform(I,H,$,D,L,_),[At,ct]}x.drawImage(o,r,d,a,c,b,R,k,M);const W=Math.hypot(I,H),G=Math.hypot($,D);return[W*k,G*M]}function Y(x){const{width:o,height:r}=x;if(o>O||r>O)return null;const d=1e3,a=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),c=o+1;let b=new Uint8Array(c*(r+1)),R,k,M;const I=o+7&-8;let H=new Uint8Array(I*r),$=0;for(const G of x.data){let J=128;for(;J>0;)H[$++]=G&J?0:255,J>>=1}let D=0;for($=0,H[$]!==0&&(b[0]=1,++D),k=1;k<o;k++)H[$]!==H[$+1]&&(b[k]=H[$]?2:1,++D),$++;for(H[$]!==0&&(b[k]=2,++D),R=1;R<r;R++){$=R*I,M=R*c,H[$-I]!==H[$]&&(b[M]=H[$]?1:8,++D);let G=(H[$]?4:0)+(H[$-I]?8:0);for(k=1;k<o;k++)G=(G>>2)+(H[$+1]?4:0)+(H[$-I+1]?8:0),a[G]&&(b[M+k]=a[G],++D),$++;if(H[$-I]!==H[$]&&(b[M+k]=H[$]?2:4,++D),D>d)return null}for($=I*(r-1),M=R*c,H[$]!==0&&(b[M]=8,++D),k=1;k<o;k++)H[$]!==H[$+1]&&(b[M+k]=H[$]?4:8,++D),$++;if(H[$]!==0&&(b[M+k]=4,++D),D>d)return null;const L=new Int32Array([0,c,-1,0,-c,0,0,0,1]),_=new Path2D;for(R=0;D&&R<=r;R++){let G=R*c;const J=G+o;for(;G<J&&!b[G];)G++;if(G===J)continue;_.moveTo(G%c,R);const st=G;let tt=b[G];do{const ot=L[tt];do G+=ot;while(!b[G]);const rt=b[G];rt!==5&&rt!==10?(tt=rt,b[G]=0):(tt=rt&51*tt>>4,b[G]&=tt>>2|tt<<2),_.lineTo(G%c,G/c|0),b[G]||--D}while(st!==G);--R}return H=null,b=null,function(G){G.save(),G.scale(1/o,-1/r),G.translate(0,-r),G.fill(_),G.beginPath(),G.restore()}}class Z{constructor(o,r){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,o,r])}clone(){const o=Object.create(this);return o.clipBox=this.clipBox.slice(),o}setCurrentPoint(o,r){this.x=o,this.y=r}updatePathMinMax(o,r,d){[r,d]=s.Util.applyTransform([r,d],o),this.minX=Math.min(this.minX,r),this.minY=Math.min(this.minY,d),this.maxX=Math.max(this.maxX,r),this.maxY=Math.max(this.maxY,d)}updateRectMinMax(o,r){const d=s.Util.applyTransform(r,o),a=s.Util.applyTransform(r.slice(2),o),c=s.Util.applyTransform([r[0],r[3]],o),b=s.Util.applyTransform([r[2],r[1]],o);this.minX=Math.min(this.minX,d[0],a[0],c[0],b[0]),this.minY=Math.min(this.minY,d[1],a[1],c[1],b[1]),this.maxX=Math.max(this.maxX,d[0],a[0],c[0],b[0]),this.maxY=Math.max(this.maxY,d[1],a[1],c[1],b[1])}updateScalingPathMinMax(o,r){s.Util.scaleMinMax(o,r),this.minX=Math.min(this.minX,r[0]),this.maxX=Math.max(this.maxX,r[1]),this.minY=Math.min(this.minY,r[2]),this.maxY=Math.max(this.maxY,r[3])}updateCurvePathMinMax(o,r,d,a,c,b,R,k,M,I){const H=s.Util.bezierBoundingBox(r,d,a,c,b,R,k,M);if(I){I[0]=Math.min(I[0],H[0],H[2]),I[1]=Math.max(I[1],H[0],H[2]),I[2]=Math.min(I[2],H[1],H[3]),I[3]=Math.max(I[3],H[1],H[3]);return}this.updateRectMinMax(o,H)}getPathBoundingBox(o=l.FILL,r=null){const d=[this.minX,this.minY,this.maxX,this.maxY];if(o===l.STROKE){r||(0,s.unreachable)("Stroke bounding box must include transform.");const a=s.Util.singularValueDecompose2dScale(r),c=a[0]*this.lineWidth/2,b=a[1]*this.lineWidth/2;d[0]-=c,d[1]-=b,d[2]+=c,d[3]+=b}return d}updateClipFromPath(){const o=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(o||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(o){this.clipBox=o,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(o=l.FILL,r=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(o,r))}}function nt(x,o){if(typeof ImageData<"u"&&o instanceof ImageData){x.putImageData(o,0,0);return}const r=o.height,d=o.width,a=r%B,c=(r-a)/B,b=a===0?c:c+1,R=x.createImageData(d,B);let k=0,M;const I=o.data,H=R.data;let $,D,L,_;if(o.kind===s.ImageKind.GRAYSCALE_1BPP){const W=I.byteLength,G=new Uint32Array(H.buffer,0,H.byteLength>>2),J=G.length,st=d+7>>3,tt=4294967295,ot=s.FeatureTest.isLittleEndian?4278190080:255;for($=0;$<b;$++){for(L=$<c?B:a,M=0,D=0;D<L;D++){const rt=W-k;let ct=0;const mt=rt>st?d:rt*8-7,At=mt&-8;let Ct=0,dt=0;for(;ct<At;ct+=8)dt=I[k++],G[M++]=dt&128?tt:ot,G[M++]=dt&64?tt:ot,G[M++]=dt&32?tt:ot,G[M++]=dt&16?tt:ot,G[M++]=dt&8?tt:ot,G[M++]=dt&4?tt:ot,G[M++]=dt&2?tt:ot,G[M++]=dt&1?tt:ot;for(;ct<mt;ct++)Ct===0&&(dt=I[k++],Ct=128),G[M++]=dt&Ct?tt:ot,Ct>>=1}for(;M<J;)G[M++]=0;x.putImageData(R,0,$*B)}}else if(o.kind===s.ImageKind.RGBA_32BPP){for(D=0,_=d*B*4,$=0;$<c;$++)H.set(I.subarray(k,k+_)),k+=_,x.putImageData(R,0,D),D+=B;$<b&&(_=d*a*4,H.set(I.subarray(k,k+_)),x.putImageData(R,0,D))}else if(o.kind===s.ImageKind.RGB_24BPP)for(L=B,_=d*L,$=0;$<b;$++){for($>=c&&(L=a,_=d*L),M=0,D=_;D--;)H[M++]=I[k++],H[M++]=I[k++],H[M++]=I[k++],H[M++]=255;x.putImageData(R,0,$*B)}else throw new Error(`bad image kind: ${o.kind}`)}function q(x,o){if(o.bitmap){x.drawImage(o.bitmap,0,0);return}const r=o.height,d=o.width,a=r%B,c=(r-a)/B,b=a===0?c:c+1,R=x.createImageData(d,B);let k=0;const M=o.data,I=R.data;for(let H=0;H<b;H++){const $=H<c?B:a;({srcPos:k}=i({src:M,srcPos:k,dest:I,width:d,height:$,nonBlackColor:0})),x.putImageData(R,0,H*B)}}function V(x,o){const r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const d of r)x[d]!==void 0&&(o[d]=x[d]);x.setLineDash!==void 0&&(o.setLineDash(x.getLineDash()),o.lineDashOffset=x.lineDashOffset)}function U(x){if(x.strokeStyle=x.fillStyle="#000000",x.fillRule="nonzero",x.globalAlpha=1,x.lineWidth=1,x.lineCap="butt",x.lineJoin="miter",x.miterLimit=10,x.globalCompositeOperation="source-over",x.font="10px sans-serif",x.setLineDash!==void 0&&(x.setLineDash([]),x.lineDashOffset=0),!s.isNodeJS){const{filter:o}=x;o!=="none"&&o!==""&&(x.filter="none")}}function K(x,o,r,d){const a=x.length;for(let c=3;c<a;c+=4){const b=x[c];if(b===0)x[c-3]=o,x[c-2]=r,x[c-1]=d;else if(b<255){const R=255-b;x[c-3]=x[c-3]*b+o*R>>8,x[c-2]=x[c-2]*b+r*R>>8,x[c-1]=x[c-1]*b+d*R>>8}}}function Q(x,o,r){const d=x.length,a=1/255;for(let c=3;c<d;c+=4){const b=r?r[x[c]]:x[c];o[c]=o[c]*b*a|0}}function et(x,o,r){const d=x.length;for(let a=3;a<d;a+=4){const c=x[a-3]*77+x[a-2]*152+x[a-1]*28;o[a]=r?o[a]*r[c>>8]>>8:o[a]*c>>16}}function ht(x,o,r,d,a,c,b,R,k,M,I){const H=!!c,$=H?c[0]:0,D=H?c[1]:0,L=H?c[2]:0,_=a==="Luminosity"?et:Q,G=Math.min(d,Math.ceil(1048576/r));for(let J=0;J<d;J+=G){const st=Math.min(G,d-J),tt=x.getImageData(R-M,J+(k-I),r,st),ot=o.getImageData(R,J+k,r,st);H&&K(tt.data,$,D,L),_(tt.data,ot.data,b),o.putImageData(ot,R,J+k)}}function lt(x,o,r,d){const a=d[0],c=d[1],b=d[2]-a,R=d[3]-c;b===0||R===0||(ht(o.context,r,b,R,o.subtype,o.backdrop,o.transferMap,a,c,o.offsetX,o.offsetY),x.save(),x.globalAlpha=1,x.globalCompositeOperation="source-over",x.setTransform(1,0,0,1,0,0),x.drawImage(r.canvas,0,0),x.restore())}function at(x,o){const r=s.Util.singularValueDecompose2dScale(x);r[0]=Math.fround(r[0]),r[1]=Math.fround(r[1]);const d=Math.fround((globalThis.devicePixelRatio||1)*u.PixelsPerInch.PDF_TO_CSS_UNITS);return o!==void 0?o:r[0]<=d||r[1]<=d}const pt=["butt","round","square"],ut=["miter","round","bevel"],ft={},it={};class F{constructor(o,r,d,a,c,{optionalContentConfig:b,markedContentStack:R=null},k,M){this.ctx=o,this.current=new Z(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=d,this.canvasFactory=a,this.filterFactory=c,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=R||[],this.optionalContentConfig=b,this.cachedCanvases=new j(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=k,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=M,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(o,r=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):r}beginDrawing({transform:o,viewport:r,transparency:d=!1,background:a=null}){const c=this.ctx.canvas.width,b=this.ctx.canvas.height,R=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,c,b),this.ctx.fillStyle=R,d){const k=this.cachedCanvases.getCanvas("transparent",c,b);this.compositeCtx=this.ctx,this.transparentCanvas=k.canvas,this.ctx=k.context,this.ctx.save(),this.ctx.transform(...(0,u.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),U(this.ctx),o&&(this.ctx.transform(...o),this.outputScaleX=o[0],this.outputScaleY=o[0]),this.ctx.transform(...r.transform),this.viewportScale=r.scale,this.baseTransform=(0,u.getCurrentTransform)(this.ctx)}executeOperatorList(o,r,d,a){const c=o.argsArray,b=o.fnArray;let R=r||0;const k=c.length;if(k===R)return R;const M=k-R>N&&typeof d=="function",I=M?Date.now()+T:0;let H=0;const $=this.commonObjs,D=this.objs;let L;for(;;){if(a!==void 0&&R===a.nextBreakPoint)return a.breakIt(R,d),R;if(L=b[R],L!==s.OPS.dependency)this[L].apply(this,c[R]);else for(const _ of c[R]){const W=_.startsWith("g_")?$:D;if(!W.has(_))return W.get(_,d),R}if(R++,R===k)return R;if(M&&++H>N){if(Date.now()>I)return d(),R;H=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const o of this._cachedBitmapsMap.values()){for(const r of o.values())typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&(r.width=r.height=0);o.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const o=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(o!=="none"){const r=this.ctx.filter;this.ctx.filter=o,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=r}}}_scaleImage(o,r){const d=o.width,a=o.height;let c=Math.max(Math.hypot(r[0],r[1]),1),b=Math.max(Math.hypot(r[2],r[3]),1),R=d,k=a,M="prescale1",I,H;for(;c>2&&R>1||b>2&&k>1;){let $=R,D=k;c>2&&R>1&&($=R>=16384?Math.floor(R/2)-1||1:Math.ceil(R/2),c/=R/$),b>2&&k>1&&(D=k>=16384?Math.floor(k/2)-1||1:Math.ceil(k)/2,b/=k/D),I=this.cachedCanvases.getCanvas(M,$,D),H=I.context,H.clearRect(0,0,$,D),H.drawImage(o,0,0,R,k,0,0,$,D),o=I.canvas,R=$,k=D,M=M==="prescale1"?"prescale2":"prescale1"}return{img:o,paintWidth:R,paintHeight:k}}_createMaskCanvas(o){const r=this.ctx,{width:d,height:a}=o,c=this.current.fillColor,b=this.current.patternFill,R=(0,u.getCurrentTransform)(r);let k,M,I,H;if((o.bitmap||o.data)&&o.count>1){const mt=o.bitmap||o.data.buffer;M=JSON.stringify(b?R:[R.slice(0,4),c]),k=this._cachedBitmapsMap.get(mt),k||(k=new Map,this._cachedBitmapsMap.set(mt,k));const At=k.get(M);if(At&&!b){const Ct=Math.round(Math.min(R[0],R[2])+R[4]),dt=Math.round(Math.min(R[1],R[3])+R[5]);return{canvas:At,offsetX:Ct,offsetY:dt}}I=At}I||(H=this.cachedCanvases.getCanvas("maskCanvas",d,a),q(H.context,o));let $=s.Util.transform(R,[1/d,0,0,-1/a,0,0]);$=s.Util.transform($,[1,0,0,1,0,-a]);const[D,L,_,W]=s.Util.getAxialAlignedBoundingBox([0,0,d,a],$),G=Math.round(_-D)||1,J=Math.round(W-L)||1,st=this.cachedCanvases.getCanvas("fillCanvas",G,J),tt=st.context,ot=D,rt=L;tt.translate(-ot,-rt),tt.transform(...$),I||(I=this._scaleImage(H.canvas,(0,u.getCurrentTransformInverse)(tt)),I=I.img,k&&b&&k.set(M,I)),tt.imageSmoothingEnabled=at((0,u.getCurrentTransform)(tt),o.interpolate),X(tt,I,0,0,I.width,I.height,0,0,d,a),tt.globalCompositeOperation="source-in";const ct=s.Util.transform((0,u.getCurrentTransformInverse)(tt),[1,0,0,1,-ot,-rt]);return tt.fillStyle=b?c.getPattern(r,this,ct,l.FILL):c,tt.fillRect(0,0,d,a),k&&!b&&(this.cachedCanvases.delete("fillCanvas"),k.set(M,st.canvas)),{canvas:st.canvas,offsetX:Math.round(ot),offsetY:Math.round(rt)}}setLineWidth(o){o!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=o,this.ctx.lineWidth=o}setLineCap(o){this.ctx.lineCap=pt[o]}setLineJoin(o){this.ctx.lineJoin=ut[o]}setMiterLimit(o){this.ctx.miterLimit=o}setDash(o,r){const d=this.ctx;d.setLineDash!==void 0&&(d.setLineDash(o),d.lineDashOffset=r)}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[r,d]of o)switch(r){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d[0],d[1]);break;case"CA":this.current.strokeAlpha=d;break;case"ca":this.current.fillAlpha=d,this.ctx.globalAlpha=d;break;case"BM":this.ctx.globalCompositeOperation=d;break;case"SMask":this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(d);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const o=this.inSMaskMode;this.current.activeSMask&&!o?this.beginSMaskMode():!this.current.activeSMask&&o&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const o=this.ctx.canvas.width,r=this.ctx.canvas.height,d="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(d,o,r);this.suspendedCtx=this.ctx,this.ctx=a.context;const c=this.ctx;c.setTransform(...(0,u.getCurrentTransform)(this.suspendedCtx)),V(this.suspendedCtx,c),z(c,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),V(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(o){if(!this.current.activeSMask)return;o?(o[0]=Math.floor(o[0]),o[1]=Math.floor(o[1]),o[2]=Math.ceil(o[2]),o[3]=Math.ceil(o[3])):o=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const r=this.current.activeSMask,d=this.suspendedCtx;lt(d,r,this.ctx,o),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(V(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const o=this.current;this.stateStack.push(o),this.current=o.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),V(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(o,r,d,a,c,b){this.ctx.transform(o,r,d,a,c,b),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(o,r,d){const a=this.ctx,c=this.current;let b=c.x,R=c.y,k,M;const I=(0,u.getCurrentTransform)(a),H=I[0]===0&&I[3]===0||I[1]===0&&I[2]===0,$=H?d.slice(0):null;for(let D=0,L=0,_=o.length;D<_;D++)switch(o[D]|0){case s.OPS.rectangle:b=r[L++],R=r[L++];const W=r[L++],G=r[L++],J=b+W,st=R+G;a.moveTo(b,R),W===0||G===0?a.lineTo(J,st):(a.lineTo(J,R),a.lineTo(J,st),a.lineTo(b,st)),H||c.updateRectMinMax(I,[b,R,J,st]),a.closePath();break;case s.OPS.moveTo:b=r[L++],R=r[L++],a.moveTo(b,R),H||c.updatePathMinMax(I,b,R);break;case s.OPS.lineTo:b=r[L++],R=r[L++],a.lineTo(b,R),H||c.updatePathMinMax(I,b,R);break;case s.OPS.curveTo:k=b,M=R,b=r[L+4],R=r[L+5],a.bezierCurveTo(r[L],r[L+1],r[L+2],r[L+3],b,R),c.updateCurvePathMinMax(I,k,M,r[L],r[L+1],r[L+2],r[L+3],b,R,$),L+=6;break;case s.OPS.curveTo2:k=b,M=R,a.bezierCurveTo(b,R,r[L],r[L+1],r[L+2],r[L+3]),c.updateCurvePathMinMax(I,k,M,b,R,r[L],r[L+1],r[L+2],r[L+3],$),b=r[L+2],R=r[L+3],L+=4;break;case s.OPS.curveTo3:k=b,M=R,b=r[L+2],R=r[L+3],a.bezierCurveTo(r[L],r[L+1],b,R,b,R),c.updateCurvePathMinMax(I,k,M,r[L],r[L+1],b,R,b,R,$),L+=4;break;case s.OPS.closePath:a.closePath();break}H&&c.updateScalingPathMinMax(I,$),c.setCurrentPoint(b,R)}closePath(){this.ctx.closePath()}stroke(o=!0){const r=this.ctx,d=this.current.strokeColor;r.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof d=="object"&&d?.getPattern?(r.save(),r.strokeStyle=d.getPattern(r,this,(0,u.getCurrentTransformInverse)(r),l.STROKE),this.rescaleAndStroke(!1),r.restore()):this.rescaleAndStroke(!0)),o&&this.consumePath(this.current.getClippedPathBoundingBox()),r.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(o=!0){const r=this.ctx,d=this.current.fillColor,a=this.current.patternFill;let c=!1;a&&(r.save(),r.fillStyle=d.getPattern(r,this,(0,u.getCurrentTransformInverse)(r),l.FILL),c=!0);const b=this.current.getClippedPathBoundingBox();this.contentVisible&&b!==null&&(this.pendingEOFill?(r.fill("evenodd"),this.pendingEOFill=!1):r.fill()),c&&r.restore(),o&&this.consumePath(b)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ft}eoClip(){this.pendingClip=it}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const o=this.pendingTextPaths,r=this.ctx;if(o===void 0){r.beginPath();return}r.save(),r.beginPath();for(const d of o)r.setTransform(...d.transform),r.translate(d.x,d.y),d.addToPath(r,d.fontSize);r.restore(),r.clip(),r.beginPath(),delete this.pendingTextPaths}setCharSpacing(o){this.current.charSpacing=o}setWordSpacing(o){this.current.wordSpacing=o}setHScale(o){this.current.textHScale=o/100}setLeading(o){this.current.leading=-o}setFont(o,r){const d=this.commonObjs.get(o),a=this.current;if(!d)throw new Error(`Can't find font for ${o}`);if(a.fontMatrix=d.fontMatrix||s.FONT_IDENTITY_MATRIX,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+o),r<0?(r=-r,a.fontDirection=-1):a.fontDirection=1,this.current.font=d,this.current.fontSize=r,d.isType3Font)return;const c=d.loadedName||"sans-serif",b=d.systemFontInfo?.css||`"${c}", ${d.fallbackName}`;let R="normal";d.black?R="900":d.bold&&(R="bold");const k=d.italic?"italic":"normal";let M=r;r<f?M=f:r>w&&(M=w),this.current.fontSizeScale=r/M,this.ctx.font=`${k} ${R} ${M}px ${b}`}setTextRenderingMode(o){this.current.textRenderingMode=o}setTextRise(o){this.current.textRise=o}moveText(o,r){this.current.x=this.current.lineX+=o,this.current.y=this.current.lineY+=r}setLeadingMoveText(o,r){this.setLeading(-r),this.moveText(o,r)}setTextMatrix(o,r,d,a,c,b){this.current.textMatrix=[o,r,d,a,c,b],this.current.textMatrixScale=Math.hypot(o,r),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(o,r,d,a){const c=this.ctx,b=this.current,R=b.font,k=b.textRenderingMode,M=b.fontSize/b.fontSizeScale,I=k&s.TextRenderingMode.FILL_STROKE_MASK,H=!!(k&s.TextRenderingMode.ADD_TO_PATH_FLAG),$=b.patternFill&&!R.missingFile;let D;(R.disableFontFace||H||$)&&(D=R.getPathGenerator(this.commonObjs,o)),R.disableFontFace||$?(c.save(),c.translate(r,d),c.beginPath(),D(c,M),a&&c.setTransform(...a),(I===s.TextRenderingMode.FILL||I===s.TextRenderingMode.FILL_STROKE)&&c.fill(),(I===s.TextRenderingMode.STROKE||I===s.TextRenderingMode.FILL_STROKE)&&c.stroke(),c.restore()):((I===s.TextRenderingMode.FILL||I===s.TextRenderingMode.FILL_STROKE)&&c.fillText(o,r,d),(I===s.TextRenderingMode.STROKE||I===s.TextRenderingMode.FILL_STROKE)&&c.strokeText(o,r,d)),H&&(this.pendingTextPaths||=[]).push({transform:(0,u.getCurrentTransform)(c),x:r,y:d,fontSize:M,addToPath:D})}get isFontSubpixelAAEnabled(){const{context:o}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);o.scale(1.5,1),o.fillText("I",0,10);const r=o.getImageData(0,0,10,10).data;let d=!1;for(let a=3;a<r.length;a+=4)if(r[a]>0&&r[a]<255){d=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",d)}showText(o){const r=this.current,d=r.font;if(d.isType3Font)return this.showType3Text(o);const a=r.fontSize;if(a===0)return;const c=this.ctx,b=r.fontSizeScale,R=r.charSpacing,k=r.wordSpacing,M=r.fontDirection,I=r.textHScale*M,H=o.length,$=d.vertical,D=$?1:-1,L=d.defaultVMetrics,_=a*r.fontMatrix[0],W=r.textRenderingMode===s.TextRenderingMode.FILL&&!d.disableFontFace&&!r.patternFill;c.save(),c.transform(...r.textMatrix),c.translate(r.x,r.y+r.textRise),M>0?c.scale(I,-1):c.scale(I,1);let G;if(r.patternFill){c.save();const rt=r.fillColor.getPattern(c,this,(0,u.getCurrentTransformInverse)(c),l.FILL);G=(0,u.getCurrentTransform)(c),c.restore(),c.fillStyle=rt}let J=r.lineWidth;const st=r.textMatrixScale;if(st===0||J===0){const rt=r.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(rt===s.TextRenderingMode.STROKE||rt===s.TextRenderingMode.FILL_STROKE)&&(J=this.getSinglePixelWidth())}else J/=st;if(b!==1&&(c.scale(b,b),J/=b),c.lineWidth=J,d.isInvalidPDFjsFont){const rt=[];let ct=0;for(const mt of o)rt.push(mt.unicode),ct+=mt.width;c.fillText(rt.join(""),0,0),r.x+=ct*_*I,c.restore(),this.compose();return}let tt=0,ot;for(ot=0;ot<H;++ot){const rt=o[ot];if(typeof rt=="number"){tt+=D*rt*a/1e3;continue}let ct=!1;const mt=(rt.isSpace?k:0)+R,At=rt.fontChar,Ct=rt.accent;let dt,Et,Ft=rt.width;if($){const kt=rt.vmetric||L,Lt=-(rt.vmetric?kt[1]:Ft*.5)*_,Mt=kt[2]*_;Ft=kt?-kt[0]:Ft,dt=Lt/b,Et=(tt+Mt)/b}else dt=tt/b,Et=0;if(d.remeasure&&Ft>0){const kt=c.measureText(At).width*1e3/a*b;if(Ft<kt&&this.isFontSubpixelAAEnabled){const Lt=Ft/kt;ct=!0,c.save(),c.scale(Lt,1),dt/=Lt}else Ft!==kt&&(dt+=(Ft-kt)/2e3*a/b)}if(this.contentVisible&&(rt.isInFont||d.missingFile)){if(W&&!Ct)c.fillText(At,dt,Et);else if(this.paintChar(At,dt,Et,G),Ct){const kt=dt+a*Ct.offset.x/b,Lt=Et-a*Ct.offset.y/b;this.paintChar(Ct.fontChar,kt,Lt,G)}}const Nt=$?Ft*_-mt*M:Ft*_+mt*M;tt+=Nt,ct&&c.restore()}$?r.y-=tt:r.x+=tt*I,c.restore(),this.compose()}showType3Text(o){const r=this.ctx,d=this.current,a=d.font,c=d.fontSize,b=d.fontDirection,R=a.vertical?1:-1,k=d.charSpacing,M=d.wordSpacing,I=d.textHScale*b,H=d.fontMatrix||s.FONT_IDENTITY_MATRIX,$=o.length,D=d.textRenderingMode===s.TextRenderingMode.INVISIBLE;let L,_,W,G;if(!(D||c===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),r.transform(...d.textMatrix),r.translate(d.x,d.y),r.scale(I,b),L=0;L<$;++L){if(_=o[L],typeof _=="number"){G=R*_*c/1e3,this.ctx.translate(G,0),d.x+=G*I;continue}const J=(_.isSpace?M:0)+k,st=a.charProcOperatorList[_.operatorListId];if(!st){(0,s.warn)(`Type3 character "${_.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=_,this.save(),r.scale(c,c),r.transform(...H),this.executeOperatorList(st),this.restore()),W=s.Util.applyTransform([_.width,0],H)[0]*c+J,r.translate(W,0),d.x+=W*I}r.restore(),this.processingType3=null}}setCharWidth(o,r){}setCharWidthAndBounds(o,r,d,a,c,b){this.ctx.rect(d,a,c-d,b-a),this.ctx.clip(),this.endPath()}getColorN_Pattern(o){let r;if(o[0]==="TilingPattern"){const d=o[1],a=this.baseTransform||(0,u.getCurrentTransform)(this.ctx),c={createCanvasGraphics:b=>new F(b,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};r=new S(o,d,this.ctx,c,a)}else r=this._getPattern(o[1],o[2]);return r}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(o,r,d){const a=s.Util.makeHexColor(o,r,d);this.ctx.strokeStyle=a,this.current.strokeColor=a}setFillRGBColor(o,r,d){const a=s.Util.makeHexColor(o,r,d);this.ctx.fillStyle=a,this.current.fillColor=a,this.current.patternFill=!1}_getPattern(o,r=null){let d;return this.cachedPatterns.has(o)?d=this.cachedPatterns.get(o):(d=A(this.getObject(o)),this.cachedPatterns.set(o,d)),r&&(d.matrix=r),d}shadingFill(o){if(!this.contentVisible)return;const r=this.ctx;this.save();const d=this._getPattern(o);r.fillStyle=d.getPattern(r,this,(0,u.getCurrentTransformInverse)(r),l.SHADING);const a=(0,u.getCurrentTransformInverse)(r);if(a){const{width:c,height:b}=r.canvas,[R,k,M,I]=s.Util.getAxialAlignedBoundingBox([0,0,c,b],a);this.ctx.fillRect(R,k,M-R,I-k)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(o,r){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(o)&&o.length===6&&this.transform(...o),this.baseTransform=(0,u.getCurrentTransform)(this.ctx),r)){const d=r[2]-r[0],a=r[3]-r[1];this.ctx.rect(r[0],r[1],d,a),this.current.updateRectMinMax((0,u.getCurrentTransform)(this.ctx),r),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(o){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;o.isolated||(0,s.info)("TODO: Support non-isolated groups."),o.knockout&&(0,s.warn)("Knockout groups not supported.");const d=(0,u.getCurrentTransform)(r);if(o.matrix&&r.transform(...o.matrix),!o.bbox)throw new Error("Bounding box is required.");let a=s.Util.getAxialAlignedBoundingBox(o.bbox,(0,u.getCurrentTransform)(r));const c=[0,0,r.canvas.width,r.canvas.height];a=s.Util.intersect(a,c)||[0,0,0,0];const b=Math.floor(a[0]),R=Math.floor(a[1]);let k=Math.max(Math.ceil(a[2])-b,1),M=Math.max(Math.ceil(a[3])-R,1),I=1,H=1;k>P&&(I=k/P,k=P),M>P&&(H=M/P,M=P),this.current.startNewPathAndClipBox([0,0,k,M]);let $="groupAt"+this.groupLevel;o.smask&&($+="_smask_"+this.smaskCounter++%2);const D=this.cachedCanvases.getCanvas($,k,M),L=D.context;L.scale(1/I,1/H),L.translate(-b,-R),L.transform(...d),o.smask?this.smaskStack.push({canvas:D.canvas,context:L,offsetX:b,offsetY:R,scaleX:I,scaleY:H,subtype:o.smask.subtype,backdrop:o.smask.backdrop,transferMap:o.smask.transferMap||null,startTransformInverse:null}):(r.setTransform(1,0,0,1,0,0),r.translate(b,R),r.scale(I,H),r.save()),V(r,L),this.ctx=L,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(o){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,d=this.groupStack.pop();if(this.ctx=d,this.ctx.imageSmoothingEnabled=!1,o.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=(0,u.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const c=s.Util.getAxialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],a);this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(o,r,d,a,c){if(this.#t(),U(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(r)&&r.length===4){const b=r[2]-r[0],R=r[3]-r[1];if(c&&this.annotationCanvasMap){d=d.slice(),d[4]-=r[0],d[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=b,r[3]=R;const[k,M]=s.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(this.ctx)),{viewportScale:I}=this,H=Math.ceil(b*this.outputScaleX*I),$=Math.ceil(R*this.outputScaleY*I);this.annotationCanvas=this.canvasFactory.create(H,$);const{canvas:D,context:L}=this.annotationCanvas;this.annotationCanvasMap.set(o,D),this.annotationCanvas.savedCtx=this.ctx,this.ctx=L,this.ctx.save(),this.ctx.setTransform(k,0,0,-M,0,R*M),U(this.ctx)}else U(this.ctx),this.ctx.rect(r[0],r[1],b,R),this.ctx.clip(),this.endPath()}this.current=new Z(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...d),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(o){if(!this.contentVisible)return;const r=o.count;o=this.getObject(o.data,o),o.count=r;const d=this.ctx,a=this.processingType3;if(a&&(a.compiled===void 0&&(a.compiled=Y(o)),a.compiled)){a.compiled(d);return}const c=this._createMaskCanvas(o),b=c.canvas;d.save(),d.setTransform(1,0,0,1,0,0),d.drawImage(b,c.offsetX,c.offsetY),d.restore(),this.compose()}paintImageMaskXObjectRepeat(o,r,d=0,a=0,c,b){if(!this.contentVisible)return;o=this.getObject(o.data,o);const R=this.ctx;R.save();const k=(0,u.getCurrentTransform)(R);R.transform(r,d,a,c,0,0);const M=this._createMaskCanvas(o);R.setTransform(1,0,0,1,M.offsetX-k[4],M.offsetY-k[5]);for(let I=0,H=b.length;I<H;I+=2){const $=s.Util.transform(k,[r,d,a,c,b[I],b[I+1]]),[D,L]=s.Util.applyTransform([0,0],$);R.drawImage(M.canvas,D,L)}R.restore(),this.compose()}paintImageMaskXObjectGroup(o){if(!this.contentVisible)return;const r=this.ctx,d=this.current.fillColor,a=this.current.patternFill;for(const c of o){const{data:b,width:R,height:k,transform:M}=c,I=this.cachedCanvases.getCanvas("maskCanvas",R,k),H=I.context;H.save();const $=this.getObject(b,c);q(H,$),H.globalCompositeOperation="source-in",H.fillStyle=a?d.getPattern(H,this,(0,u.getCurrentTransformInverse)(r),l.FILL):d,H.fillRect(0,0,R,k),H.restore(),r.save(),r.transform(...M),r.scale(1,-1),X(r,I.canvas,0,0,R,k,0,-1,1,1),r.restore()}this.compose()}paintImageXObject(o){if(!this.contentVisible)return;const r=this.getObject(o);if(!r){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(r)}paintImageXObjectRepeat(o,r,d,a){if(!this.contentVisible)return;const c=this.getObject(o);if(!c){(0,s.warn)("Dependent image isn't ready yet");return}const b=c.width,R=c.height,k=[];for(let M=0,I=a.length;M<I;M+=2)k.push({transform:[r,0,0,d,a[M],a[M+1]],x:0,y:0,w:b,h:R});this.paintInlineImageXObjectGroup(c,k)}applyTransferMapsToCanvas(o){return this.current.transferMaps!=="none"&&(o.filter=this.current.transferMaps,o.drawImage(o.canvas,0,0),o.filter="none"),o.canvas}applyTransferMapsToBitmap(o){if(this.current.transferMaps==="none")return o.bitmap;const{bitmap:r,width:d,height:a}=o,c=this.cachedCanvases.getCanvas("inlineImage",d,a),b=c.context;return b.filter=this.current.transferMaps,b.drawImage(r,0,0),b.filter="none",c.canvas}paintInlineImageXObject(o){if(!this.contentVisible)return;const r=o.width,d=o.height,a=this.ctx;if(this.save(),!s.isNodeJS){const{filter:R}=a;R!=="none"&&R!==""&&(a.filter="none")}a.scale(1/r,-1/d);let c;if(o.bitmap)c=this.applyTransferMapsToBitmap(o);else if(typeof HTMLElement=="function"&&o instanceof HTMLElement||!o.data)c=o;else{const k=this.cachedCanvases.getCanvas("inlineImage",r,d).context;nt(k,o),c=this.applyTransferMapsToCanvas(k)}const b=this._scaleImage(c,(0,u.getCurrentTransformInverse)(a));a.imageSmoothingEnabled=at((0,u.getCurrentTransform)(a),o.interpolate),X(a,b.img,0,0,b.paintWidth,b.paintHeight,0,-d,r,d),this.compose(),this.restore()}paintInlineImageXObjectGroup(o,r){if(!this.contentVisible)return;const d=this.ctx;let a;if(o.bitmap)a=o.bitmap;else{const c=o.width,b=o.height,k=this.cachedCanvases.getCanvas("inlineImage",c,b).context;nt(k,o),a=this.applyTransferMapsToCanvas(k)}for(const c of r)d.save(),d.transform(...c.transform),d.scale(1,-1),X(d,a,c.x,c.y,c.w,c.h,0,-1,1,1),d.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(o){}markPointProps(o,r){}beginMarkedContent(o){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(o,r){o==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(o){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(o);const d=this.ctx;this.pendingClip&&(r||(this.pendingClip===it?d.clip("evenodd"):d.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),d.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const o=(0,u.getCurrentTransform)(this.ctx);if(o[1]===0&&o[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(o[0]),Math.abs(o[3]));else{const r=Math.abs(o[0]*o[3]-o[2]*o[1]),d=Math.hypot(o[0],o[2]),a=Math.hypot(o[1],o[3]);this._cachedGetSinglePixelWidth=Math.max(d,a)/r}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:o}=this.current,{a:r,b:d,c:a,d:c}=this.ctx.getTransform();let b,R;if(d===0&&a===0){const k=Math.abs(r),M=Math.abs(c);if(k===M)if(o===0)b=R=1/k;else{const I=k*o;b=R=I<1?1/I:1}else if(o===0)b=1/k,R=1/M;else{const I=k*o,H=M*o;b=I<1?1/I:1,R=H<1?1/H:1}}else{const k=Math.abs(r*c-d*a),M=Math.hypot(r,d),I=Math.hypot(a,c);if(o===0)b=I/k,R=M/k;else{const H=o*k;b=I>H?I/H:1,R=M>H?M/H:1}}this._cachedScaleForStroking[0]=b,this._cachedScaleForStroking[1]=R}return this._cachedScaleForStroking}rescaleAndStroke(o){const{ctx:r}=this,{lineWidth:d}=this.current,[a,c]=this.getScaleForStroking();if(r.lineWidth=d||1,a===1&&c===1){r.stroke();return}const b=r.getLineDash();if(o&&r.save(),r.scale(a,c),b.length>0){const R=Math.max(a,c);r.setLineDash(b.map(k=>k/R)),r.lineDashOffset/=R}r.stroke(),o&&r.restore()}isContentVisible(){for(let o=this.markedContentStack.length-1;o>=0;o--)if(!this.markedContentStack[o].visible)return!1;return!0}}for(const x in s.OPS)F.prototype[x]!==void 0&&(F.prototype[s.OPS[x]]=F.prototype[x])}),473:((t,e,n)=>{n.d(e,{DOMCMapReaderFactory:()=>m,DOMCanvasFactory:()=>E,DOMFilterFactory:()=>v,DOMSVGFactory:()=>g,DOMStandardFontDataFactory:()=>p,PDFDateString:()=>B,PageViewport:()=>A,PixelsPerInch:()=>y,RenderingCancelledException:()=>h,StatTimer:()=>P,fetchData:()=>C,getColorValues:()=>X,getCurrentTransform:()=>Y,getCurrentTransformInverse:()=>Z,getFilenameFromUrl:()=>f,getPdfFilenameFromUrl:()=>w,getRGB:()=>j,getXfaPageViewport:()=>z,isDataScheme:()=>S,isPdfFile:()=>i,isValidFetchUrl:()=>T,noContextMenu:()=>N,setLayerDimensions:()=>nt});var s=n(822),u=n(266);const l="http://www.w3.org/2000/svg";class y{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}class v extends s.BaseFilterFactory{#t;#e;#s;#i;#n;#r;#a;#l;#c;#h;#f=0;constructor({docId:V,ownerDocument:U=globalThis.document}={}){super(),this.#s=V,this.#i=U}get#u(){return this.#t||=new Map}get#d(){if(!this.#e){const V=this.#i.createElement("div"),{style:U}=V;U.visibility="hidden",U.contain="strict",U.width=U.height=0,U.position="absolute",U.top=U.left=0,U.zIndex=-1;const K=this.#i.createElementNS(l,"svg");K.setAttribute("width",0),K.setAttribute("height",0),this.#e=this.#i.createElementNS(l,"defs"),V.append(K),K.append(this.#e),this.#i.body.append(V)}return this.#e}addFilter(V){if(!V)return"none";let U=this.#u.get(V);if(U)return U;let K,Q,et,ht;if(V.length===1){const ut=V[0],ft=new Array(256);for(let it=0;it<256;it++)ft[it]=ut[it]/255;ht=K=Q=et=ft.join(",")}else{const[ut,ft,it]=V,F=new Array(256),x=new Array(256),o=new Array(256);for(let r=0;r<256;r++)F[r]=ut[r]/255,x[r]=ft[r]/255,o[r]=it[r]/255;K=F.join(","),Q=x.join(","),et=o.join(","),ht=`${K}${Q}${et}`}if(U=this.#u.get(ht),U)return this.#u.set(V,U),U;const lt=`g_${this.#s}_transfer_map_${this.#f++}`,at=`url(#${lt})`;this.#u.set(V,at),this.#u.set(ht,at);const pt=this.#p(lt);return this.#b(K,Q,et,pt),at}addHCMFilter(V,U){const K=`${V}-${U}`;if(this.#r===K)return this.#a;if(this.#r=K,this.#a="none",this.#n?.remove(),!V||!U)return this.#a;const Q=this.#v(V);V=u.Util.makeHexColor(...Q);const et=this.#v(U);if(U=u.Util.makeHexColor(...et),this.#d.style.color="",V==="#000000"&&U==="#ffffff"||V===U)return this.#a;const ht=new Array(256);for(let ft=0;ft<=255;ft++){const it=ft/255;ht[ft]=it<=.03928?it/12.92:((it+.055)/1.055)**2.4}const lt=ht.join(","),at=`g_${this.#s}_hcm_filter`,pt=this.#l=this.#p(at);this.#b(lt,lt,lt,pt),this.#o(pt);const ut=(ft,it)=>{const F=Q[ft]/255,x=et[ft]/255,o=new Array(it+1);for(let r=0;r<=it;r++)o[r]=F+r/it*(x-F);return o.join(",")};return this.#b(ut(0,5),ut(1,5),ut(2,5),pt),this.#a=`url(#${at})`,this.#a}addHighlightHCMFilter(V,U,K,Q){const et=`${V}-${U}-${K}-${Q}`;if(this.#c===et)return this.#h;if(this.#c=et,this.#h="none",this.#l?.remove(),!V||!U)return this.#h;const[ht,lt]=[V,U].map(this.#v.bind(this));let at=Math.round(.2126*ht[0]+.7152*ht[1]+.0722*ht[2]),pt=Math.round(.2126*lt[0]+.7152*lt[1]+.0722*lt[2]),[ut,ft]=[K,Q].map(this.#v.bind(this));pt<at&&([at,pt,ut,ft]=[pt,at,ft,ut]),this.#d.style.color="";const it=(o,r,d)=>{const a=new Array(256),c=(pt-at)/d,b=o/255,R=(r-o)/(255*d);let k=0;for(let M=0;M<=d;M++){const I=Math.round(at+M*c),H=b+M*R;for(let $=k;$<=I;$++)a[$]=H;k=I+1}for(let M=k;M<256;M++)a[M]=a[k-1];return a.join(",")},F=`g_${this.#s}_hcm_highlight_filter`,x=this.#l=this.#p(F);return this.#o(x),this.#b(it(ut[0],ft[0],5),it(ut[1],ft[1],5),it(ut[2],ft[2],5),x),this.#h=`url(#${F})`,this.#h}destroy(V=!1){V&&(this.#a||this.#h)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#f=0)}#o(V){const U=this.#i.createElementNS(l,"feColorMatrix");U.setAttribute("type","matrix"),U.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),V.append(U)}#p(V){const U=this.#i.createElementNS(l,"filter");return U.setAttribute("color-interpolation-filters","sRGB"),U.setAttribute("id",V),this.#d.append(U),U}#m(V,U,K){const Q=this.#i.createElementNS(l,U);Q.setAttribute("type","discrete"),Q.setAttribute("tableValues",K),V.append(Q)}#b(V,U,K,Q){const et=this.#i.createElementNS(l,"feComponentTransfer");Q.append(et),this.#m(et,"feFuncR",V),this.#m(et,"feFuncG",U),this.#m(et,"feFuncB",K)}#v(V){return this.#d.style.color=V,j(getComputedStyle(this.#d).getPropertyValue("color"))}}class E extends s.BaseCanvasFactory{constructor({ownerDocument:V=globalThis.document}={}){super(),this._document=V}_createCanvas(V,U){const K=this._document.createElement("canvas");return K.width=V,K.height=U,K}}async function C(q,V="text"){if(T(q,document.baseURI)){const U=await fetch(q);if(!U.ok)throw new Error(U.statusText);switch(V){case"arraybuffer":return U.arrayBuffer();case"blob":return U.blob();case"json":return U.json()}return U.text()}return new Promise((U,K)=>{const Q=new XMLHttpRequest;Q.open("GET",q,!0),Q.responseType=V,Q.onreadystatechange=()=>{if(Q.readyState===XMLHttpRequest.DONE){if(Q.status===200||Q.status===0){let et;switch(V){case"arraybuffer":case"blob":case"json":et=Q.response;break;default:et=Q.responseText;break}if(et){U(et);return}}K(new Error(Q.statusText))}},Q.send(null)})}class m extends s.BaseCMapReaderFactory{_fetchData(V,U){return C(V,this.isCompressed?"arraybuffer":"text").then(K=>({cMapData:K instanceof ArrayBuffer?new Uint8Array(K):(0,u.stringToBytes)(K),compressionType:U}))}}class p extends s.BaseStandardFontDataFactory{_fetchData(V){return C(V,"arraybuffer").then(U=>new Uint8Array(U))}}class g extends s.BaseSVGFactory{_createSVG(V){return document.createElementNS(l,V)}}class A{constructor({viewBox:V,scale:U,rotation:K,offsetX:Q=0,offsetY:et=0,dontFlip:ht=!1}){this.viewBox=V,this.scale=U,this.rotation=K,this.offsetX=Q,this.offsetY=et;const lt=(V[2]+V[0])/2,at=(V[3]+V[1])/2;let pt,ut,ft,it;switch(K%=360,K<0&&(K+=360),K){case 180:pt=-1,ut=0,ft=0,it=1;break;case 90:pt=0,ut=1,ft=1,it=0;break;case 270:pt=0,ut=-1,ft=-1,it=0;break;case 0:pt=1,ut=0,ft=0,it=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ht&&(ft=-ft,it=-it);let F,x,o,r;pt===0?(F=Math.abs(at-V[1])*U+Q,x=Math.abs(lt-V[0])*U+et,o=(V[3]-V[1])*U,r=(V[2]-V[0])*U):(F=Math.abs(lt-V[0])*U+Q,x=Math.abs(at-V[1])*U+et,o=(V[2]-V[0])*U,r=(V[3]-V[1])*U),this.transform=[pt*U,ut*U,ft*U,it*U,F-pt*U*lt-ft*U*at,x-ut*U*lt-it*U*at],this.width=o,this.height=r}get rawDims(){const{viewBox:V}=this;return(0,u.shadow)(this,"rawDims",{pageWidth:V[2]-V[0],pageHeight:V[3]-V[1],pageX:V[0],pageY:V[1]})}clone({scale:V=this.scale,rotation:U=this.rotation,offsetX:K=this.offsetX,offsetY:Q=this.offsetY,dontFlip:et=!1}={}){return new A({viewBox:this.viewBox.slice(),scale:V,rotation:U,offsetX:K,offsetY:Q,dontFlip:et})}convertToViewportPoint(V,U){return u.Util.applyTransform([V,U],this.transform)}convertToViewportRectangle(V){const U=u.Util.applyTransform([V[0],V[1]],this.transform),K=u.Util.applyTransform([V[2],V[3]],this.transform);return[U[0],U[1],K[0],K[1]]}convertToPdfPoint(V,U){return u.Util.applyInverseTransform([V,U],this.transform)}}class h extends u.BaseException{constructor(V,U=0){super(V,"RenderingCancelledException"),this.extraDelay=U}}function S(q){const V=q.length;let U=0;for(;U<V&&q[U].trim()==="";)U++;return q.substring(U,U+5).toLowerCase()==="data:"}function i(q){return typeof q=="string"&&/\.pdf$/i.test(q)}function f(q,V=!1){return V||([q]=q.split(/[#?]/,1)),q.substring(q.lastIndexOf("/")+1)}function w(q,V="document.pdf"){if(typeof q!="string")return V;if(S(q))return(0,u.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),V;const U=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,K=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Q=U.exec(q);let et=K.exec(Q[1])||K.exec(Q[2])||K.exec(Q[3]);if(et&&(et=et[0],et.includes("%")))try{et=K.exec(decodeURIComponent(et))[0]}catch{}return et||V}class P{started=Object.create(null);times=[];time(V){V in this.started&&(0,u.warn)(`Timer is already running for ${V}`),this.started[V]=Date.now()}timeEnd(V){V in this.started||(0,u.warn)(`Timer has not been started for ${V}`),this.times.push({name:V,start:this.started[V],end:Date.now()}),delete this.started[V]}toString(){const V=[];let U=0;for(const{name:K}of this.times)U=Math.max(K.length,U);for(const{name:K,start:Q,end:et}of this.times)V.push(`${K.padEnd(U)} ${et-Q}ms
`);return V.join("")}}function T(q,V){try{const{protocol:U}=V?new URL(q,V):new URL(q);return U==="http:"||U==="https:"}catch{return!1}}function N(q){q.preventDefault()}let O;class B{static toDateObject(V){if(!V||typeof V!="string")return null;O||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const U=O.exec(V);if(!U)return null;const K=parseInt(U[1],10);let Q=parseInt(U[2],10);Q=Q>=1&&Q<=12?Q-1:0;let et=parseInt(U[3],10);et=et>=1&&et<=31?et:1;let ht=parseInt(U[4],10);ht=ht>=0&&ht<=23?ht:0;let lt=parseInt(U[5],10);lt=lt>=0&&lt<=59?lt:0;let at=parseInt(U[6],10);at=at>=0&&at<=59?at:0;const pt=U[7]||"Z";let ut=parseInt(U[8],10);ut=ut>=0&&ut<=23?ut:0;let ft=parseInt(U[9],10)||0;return ft=ft>=0&&ft<=59?ft:0,pt==="-"?(ht+=ut,lt+=ft):pt==="+"&&(ht-=ut,lt-=ft),new Date(Date.UTC(K,Q,et,ht,lt,at))}}function z(q,{scale:V=1,rotation:U=0}){const{width:K,height:Q}=q.attributes.style,et=[0,0,parseInt(K),parseInt(Q)];return new A({viewBox:et,scale:V,rotation:U})}function j(q){if(q.startsWith("#")){const V=parseInt(q.slice(1),16);return[(V&16711680)>>16,(V&65280)>>8,V&255]}return q.startsWith("rgb(")?q.slice(4,-1).split(",").map(V=>parseInt(V)):q.startsWith("rgba(")?q.slice(5,-1).split(",").map(V=>parseInt(V)).slice(0,3):((0,u.warn)(`Not a valid color format: "${q}"`),[0,0,0])}function X(q){const V=document.createElement("span");V.style.visibility="hidden",document.body.append(V);for(const U of q.keys()){V.style.color=U;const K=window.getComputedStyle(V).color;q.set(U,j(K))}V.remove()}function Y(q){const{a:V,b:U,c:K,d:Q,e:et,f:ht}=q.getTransform();return[V,U,K,Q,et,ht]}function Z(q){const{a:V,b:U,c:K,d:Q,e:et,f:ht}=q.getTransform().invertSelf();return[V,U,K,Q,et,ht]}function nt(q,V,U=!1,K=!0){if(V instanceof A){const{pageWidth:Q,pageHeight:et}=V.rawDims,{style:ht}=q,lt=u.FeatureTest.isCSSRoundSupported,at=`var(--scale-factor) * ${Q}px`,pt=`var(--scale-factor) * ${et}px`,ut=lt?`round(${at}, 1px)`:`calc(${at})`,ft=lt?`round(${pt}, 1px)`:`calc(${pt})`;!U||V.rotation%180===0?(ht.width=ut,ht.height=ft):(ht.width=ft,ht.height=ut)}K&&q.setAttribute("data-main-rotation",V.rotation)}}),423:((t,e,n)=>{n.d(e,{DrawLayer:()=>l});var s=n(473),u=n(266);class l{#t=null;#e=0;#s=new Map;constructor({pageIndex:v}){this.pageIndex=v}setParent(v){if(!this.#t){this.#t=v;return}if(this.#t!==v){if(this.#s.size>0)for(const E of this.#s.values())E.remove(),v.append(E);this.#t=v}}static get _svgFactory(){return(0,u.shadow)(this,"_svgFactory",new s.DOMSVGFactory)}static#i(v,{x:E,y:C,width:m,height:p}){const{style:g}=v;g.top=`${100*C}%`,g.left=`${100*E}%`,g.width=`${100*m}%`,g.height=`${100*p}%`}#n(v){const E=l._svgFactory.create(1,1,!0);return this.#t.append(E),l.#i(E,v),E}highlight({outlines:v,box:E},C,m){const p=this.#e++,g=this.#n(E);g.classList.add("highlight");const A=l._svgFactory.createElement("defs");g.append(A);const h=l._svgFactory.createElement("path");A.append(h);const S=`path_p${this.pageIndex}_${p}`;h.setAttribute("id",S),h.setAttribute("d",l.#r(v));const i=l._svgFactory.createElement("clipPath");A.append(i);const f=`clip_${S}`;i.setAttribute("id",f),i.setAttribute("clipPathUnits","objectBoundingBox");const w=l._svgFactory.createElement("use");i.append(w),w.setAttribute("href",`#${S}`),w.classList.add("clip");const P=l._svgFactory.createElement("use");return g.append(P),g.setAttribute("fill",C),g.setAttribute("fill-opacity",m),P.setAttribute("href",`#${S}`),this.#s.set(p,g),{id:p,clipPathId:`url(#${f})`}}highlightOutline({outlines:v,box:E}){const C=this.#e++,m=this.#n(E);m.classList.add("highlightOutline");const p=l._svgFactory.createElement("defs");m.append(p);const g=l._svgFactory.createElement("path");p.append(g);const A=`path_p${this.pageIndex}_${C}`;g.setAttribute("id",A),g.setAttribute("d",l.#r(v)),g.setAttribute("vector-effect","non-scaling-stroke");const h=l._svgFactory.createElement("use");m.append(h),h.setAttribute("href",`#${A}`);const S=h.cloneNode();return m.append(S),h.classList.add("mainOutline"),S.classList.add("secondaryOutline"),this.#s.set(C,m),C}static#r(v){const E=[];for(const C of v){let[m,p]=C;E.push(`M${m} ${p}`);for(let g=2;g<C.length;g+=2){const A=C[g],h=C[g+1];A===m?(E.push(`V${h}`),p=h):h===p&&(E.push(`H${A}`),m=A)}E.push("Z")}return E.join(" ")}updateBox(v,E){l.#i(this.#s.get(v),E)}rotate(v,E){this.#s.get(v).setAttribute("data-main-rotation",E)}changeColor(v,E){this.#s.get(v).setAttribute("fill",E)}changeOpacity(v,E){this.#s.get(v).setAttribute("fill-opacity",E)}addClass(v,E){this.#s.get(v).classList.add(E)}removeClass(v,E){this.#s.get(v).classList.remove(E)}remove(v){this.#t!==null&&(this.#s.get(v).remove(),this.#s.delete(v))}destroy(){this.#t=null;for(const v of this.#s.values())v.remove();this.#s.clear()}}}),629:((t,e,n)=>{n.d(e,{AnnotationEditorLayer:()=>h});var s=n(266),u=n(115),l=n(812),y=n(640);class v extends u.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#s=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#n;#r="";#a=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const i=v.prototype,f=T=>T.isEmpty(),w=l.AnnotationEditorUIManager.TRANSLATE_SMALL,P=l.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new l.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],i.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],i.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],i._translateEmpty,{args:[-w,0],checker:f}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],i._translateEmpty,{args:[-P,0],checker:f}],[["ArrowRight","mac+ArrowRight"],i._translateEmpty,{args:[w,0],checker:f}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],i._translateEmpty,{args:[P,0],checker:f}],[["ArrowUp","mac+ArrowUp"],i._translateEmpty,{args:[0,-w],checker:f}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],i._translateEmpty,{args:[0,-P],checker:f}],[["ArrowDown","mac+ArrowDown"],i._translateEmpty,{args:[0,w],checker:f}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],i._translateEmpty,{args:[0,P],checker:f}]]))}static _type="freetext";static _editorType=s.AnnotationEditorType.FREETEXT;constructor(i){super({...i,name:"freeTextEditor"}),this.#n=i.color||v._defaultColor||u.AnnotationEditor._defaultLineColor,this.#l=i.fontSize||v._defaultFontSize}static initialize(i){u.AnnotationEditor.initialize(i,{strings:["pdfjs-free-text-default-content"]});const f=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(f.getPropertyValue("--freetext-padding"))}static updateDefaultParams(i,f){switch(i){case s.AnnotationEditorParamsType.FREETEXT_SIZE:v._defaultFontSize=f;break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:v._defaultColor=f;break}}updateParams(i,f){switch(i){case s.AnnotationEditorParamsType.FREETEXT_SIZE:this.#h(f);break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(f);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,v._defaultFontSize],[s.AnnotationEditorParamsType.FREETEXT_COLOR,v._defaultColor||u.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[s.AnnotationEditorParamsType.FREETEXT_COLOR,this.#n]]}#h(i){const f=P=>{this.editorDiv.style.fontSize=`calc(${P}px * var(--scale-factor))`,this.translate(0,-(P-this.#l)*this.parentScale),this.#l=P,this.#d()},w=this.#l;this.addCommands({cmd:()=>{f(i)},undo:()=>{f(w)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(i){const f=this.#n;this.addCommands({cmd:()=>{this.#n=this.editorDiv.style.color=i},undo:()=>{this.#n=this.editorDiv.style.color=f},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(i,f){this._uiManager.translateSelectedEditors(i,f,!0)}getInitialTranslation(){const i=this.parentScale;return[-v._internalPadding*i,-(v._internalPadding+this.#l)*i]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(s.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#s))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#a),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#s),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(i){this._focusEventsAllowed&&(super.focusin(i),i.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#u(){const i=this.editorDiv.getElementsByTagName("div");if(i.length===0)return this.editorDiv.innerText;const f=[];for(const w of i)f.push(w.innerText.replace(/\r\n?|\n/,""));return f.join(`
`)}#d(){const[i,f]=this.parentDimensions;let w;if(this.isAttachedToDOM)w=this.div.getBoundingClientRect();else{const{currentLayer:P,div:T}=this,N=T.style.display;T.style.display="hidden",P.div.append(this.div),w=T.getBoundingClientRect(),T.remove(),T.style.display=N}this.rotation%180===this.parentRotation%180?(this.width=w.width/i,this.height=w.height/f):(this.width=w.height/i,this.height=w.width/f),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const i=this.#r,f=this.#r=this.#u().trimEnd();if(i===f)return;const w=P=>{if(this.#r=P,!P){this.remove();return}this.#o(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{w(f)},undo:()=>{w(i)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(i){this.enterInEditMode()}keydown(i){i.target===this.div&&i.key==="Enter"&&(this.enterInEditMode(),i.preventDefault())}editorDivKeydown(i){v._keyboardManager.exec(this,i)}editorDivFocus(i){this.isEditing=!0}editorDivBlur(i){this.isEditing=!1}editorDivInput(i){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let i,f;this.width&&(i=this.x,f=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#a),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),u.AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(P=>this.editorDiv?.setAttribute("default-content",P)),this.editorDiv.contentEditable=!0;const{style:w}=this.editorDiv;if(w.fontSize=`calc(${this.#l}px * var(--scale-factor))`,w.color=this.#n,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,l.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[P,T]=this.parentDimensions;if(this.annotationElementId){const{position:N}=this.#c;let[O,B]=this.getInitialTranslation();[O,B]=this.pageTranslationToScreen(O,B);const[z,j]=this.pageDimensions,[X,Y]=this.pageTranslation;let Z,nt;switch(this.rotation){case 0:Z=i+(N[0]-X)/z,nt=f+this.height-(N[1]-Y)/j;break;case 90:Z=i+(N[0]-X)/z,nt=f-(N[1]-Y)/j,[O,B]=[B,-O];break;case 180:Z=i-this.width+(N[0]-X)/z,nt=f-(N[1]-Y)/j,[O,B]=[-O,-B];break;case 270:Z=i+(N[0]-X-this.height*j)/z,nt=f+(N[1]-Y-this.width*z)/j,[O,B]=[-B,O];break}this.setAt(Z*P,nt*T,O,B)}else this.setAt(i*P,f*T,this.width*P,this.height*T);this.#o(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#o(){if(this.editorDiv.replaceChildren(),!!this.#r)for(const i of this.#r.split(`
`)){const f=document.createElement("div");f.append(i?document.createTextNode(i):document.createElement("br")),this.editorDiv.append(f)}}get contentDiv(){return this.editorDiv}static deserialize(i,f,w){let P=null;if(i instanceof y.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:N,fontColor:O},rect:B,rotation:z,id:j},textContent:X,textPosition:Y,parent:{page:{pageNumber:Z}}}=i;if(!X||X.length===0)return null;P=i={annotationType:s.AnnotationEditorType.FREETEXT,color:Array.from(O),fontSize:N,value:X.join(`
`),position:Y,pageIndex:Z-1,rect:B,rotation:z,id:j,deleted:!1}}const T=super.deserialize(i,f,w);return T.#l=i.fontSize,T.#n=s.Util.makeHexColor(...i.color),T.#r=i.value,T.annotationElementId=i.id||null,T.#c=P,T}serialize(i=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const f=v._internalPadding*this.parentScale,w=this.getRect(f,f),P=u.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#n),T={annotationType:s.AnnotationEditorType.FREETEXT,color:P,fontSize:this.#l,value:this.#r,pageIndex:this.pageIndex,rect:w,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return i?T:this.annotationElementId&&!this.#p(T)?null:(T.id=this.annotationElementId,T)}#p(i){const{value:f,fontSize:w,color:P,rect:T,pageIndex:N}=this.#c;return i.value!==f||i.fontSize!==w||i.rect.some((O,B)=>Math.abs(O-T[B])>=1)||i.color.some((O,B)=>O!==P[B])||i.pageIndex!==N}#m(i=!1){if(!this.annotationElementId)return;if(this.#d(),!i&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}const f=v._internalPadding*this.parentScale;this.#c.rect=this.getRect(f,f)}}var E=n(97),C=n(405);class m extends u.AnnotationEditor{#t;#e=null;#s=null;#i=null;#n=null;#r=null;#a=null;#l=null;#c;#h=null;static _defaultColor=null;static _defaultOpacity=1;static _l10nPromise;static _type="highlight";static _editorType=s.AnnotationEditorType.HIGHLIGHT;constructor(i){super({...i,name:"highlightEditor"}),m._defaultColor||=this._uiManager.highlightColors?.values().next().value||"#fff066",this.color=i.color||m._defaultColor,this.#c=i.opacity||m._defaultOpacity,this.#t=i.boxes||null,this._isDraggable=!1,this.#f(),this.#o(),this.rotate(this.rotation)}#f(){const i=new C.Outliner(this.#t,.001);this.#r=i.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#r.box;const f=new C.Outliner(this.#t,.0025,.001,this._uiManager.direction==="ltr");this.#i=f.getOutlines();const{lastPoint:w}=this.#i.box;this.#l=[(w[0]-this.x)/this.width,(w[1]-this.y)/this.height]}static initialize(i){u.AnnotationEditor.initialize(i)}static updateDefaultParams(i,f){i===s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR&&(m._defaultColor=f)}get toolbarPosition(){return this.#l}updateParams(i,f){i===s.AnnotationEditorParamsType.HIGHLIGHT_COLOR&&this.#u(f)}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,m._defaultColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||m._defaultColor]]}#u(i){const f=this.color;this.addCommands({cmd:()=>{this.color=i,this.parent.drawLayer.changeColor(this.#a,i),this.#s?.updateColor(i)},undo:()=>{this.color=f,this.parent.drawLayer.changeColor(this.#a,f),this.#s?.updateColor(f)},mustExec:!0,type:s.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}async addEditToolbar(){const i=await super.addEditToolbar();return i?(this._uiManager.highlightColors&&(this.#s=new E.ColorPicker({editor:this}),i.addColorPicker(this.#s)),i):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(0)}getRect(i,f){return super.getRect(i,f,0)}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){super.remove(),this.#d()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#o(),this.isAttachedToDOM||this.parent.add(this)))}setParent(i){let f=!1;this.parent&&!i?this.#d():i&&(this.#o(i),f=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(i),f&&this.select()}#d(){this.#a===null||!this.parent||(this.parent.drawLayer.remove(this.#a),this.#a=null,this.parent.drawLayer.remove(this.#h),this.#h=null)}#o(i=this.parent){this.#a===null&&({id:this.#a,clipPathId:this.#e}=i.drawLayer.highlight(this.#r,this.color,this.#c),this.#n&&(this.#n.style.clipPath=this.#e),this.#h=i.drawLayer.highlightOutline(this.#i))}static#p({x:i,y:f,width:w,height:P},T){switch(T){case 90:return{x:1-f-P,y:i,width:P,height:w};case 180:return{x:1-i-w,y:1-f-P,width:w,height:P};case 270:return{x:f,y:1-i-w,width:P,height:w}}return{x:i,y:f,width:w,height:P}}rotate(i){const{drawLayer:f}=this.parent;f.rotate(this.#a,i),f.rotate(this.#h,i),f.updateBox(this.#a,m.#p(this,i)),f.updateBox(this.#h,m.#p(this.#i.box,i))}render(){if(this.div)return this.div;const i=super.render(),f=this.#n=document.createElement("div");i.append(f),f.className="internal",f.style.clipPath=this.#e;const[w,P]=this.parentDimensions;return this.setDims(this.width*w,this.height*P),(0,l.bindEvents)(this,this.#n,["pointerover","pointerleave"]),this.enableEditing(),i}pointerover(){this.parent.drawLayer.addClass(this.#h,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#h,"hovered")}select(){super.select(),this.parent?.drawLayer.removeClass(this.#h,"hovered"),this.parent?.drawLayer.addClass(this.#h,"selected")}unselect(){super.unselect(),this.parent?.drawLayer.removeClass(this.#h,"selected")}#m(){const[i,f]=this.pageDimensions,w=this.#t,P=new Array(w.length*8);let T=0;for(const{x:N,y:O,width:B,height:z}of w){const j=N*i,X=(1-O-z)*f;P[T]=P[T+4]=j,P[T+1]=P[T+3]=X,P[T+2]=P[T+6]=j+B*i,P[T+5]=P[T+7]=X+z*f,T+=8}return P}#b(){const[i,f]=this.pageDimensions,w=this.width*i,P=this.height*f,T=this.x*i,N=(1-this.y-this.height)*f,O=[];for(const B of this.#r.outlines){const z=new Array(B.length);for(let j=0;j<B.length;j+=2)z[j]=T+B[j]*w,z[j+1]=N+(1-B[j+1])*P;O.push(z)}return O}static deserialize(i,f,w){const P=super.deserialize(i,f,w),{rect:T,color:N,quadPoints:O}=i;P.color=s.Util.makeHexColor(...N),P.#c=i.opacity;const[B,z]=P.pageDimensions;P.width=(T[2]-T[0])/B,P.height=(T[3]-T[1])/z;const j=P.#t=[];for(let X=0;X<O.length;X+=8)j.push({x:O[4]/B,y:1-O[X+5]/z,width:(O[X+2]-O[X])/B,height:(O[X+5]-O[X+1])/z});return P.#f(),P}serialize(i=!1){if(this.isEmpty()||i)return null;const f=this.getRect(0,0),w=u.AnnotationEditor._colorManager.convert(this.color);return{annotationType:s.AnnotationEditorType.HIGHLIGHT,color:w,opacity:this.#c,quadPoints:this.#m(),outlines:this.#b(),pageIndex:this.pageIndex,rect:f,rotation:0,structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}}var p=n(473);class g extends u.AnnotationEditor{#t=0;#e=0;#s=this.canvasPointermove.bind(this);#i=this.canvasPointerleave.bind(this);#n=this.canvasPointerup.bind(this);#r=this.canvasPointerdown.bind(this);#a=null;#l=new Path2D;#c=!1;#h=!1;#f=!1;#u=null;#d=0;#o=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=s.AnnotationEditorType.INK;constructor(i){super({...i,name:"inkEditor"}),this.color=i.color||null,this.thickness=i.thickness||null,this.opacity=i.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(i){u.AnnotationEditor.initialize(i)}static updateDefaultParams(i,f){switch(i){case s.AnnotationEditorParamsType.INK_THICKNESS:g._defaultThickness=f;break;case s.AnnotationEditorParamsType.INK_COLOR:g._defaultColor=f;break;case s.AnnotationEditorParamsType.INK_OPACITY:g._defaultOpacity=f/100;break}}updateParams(i,f){switch(i){case s.AnnotationEditorParamsType.INK_THICKNESS:this.#m(f);break;case s.AnnotationEditorParamsType.INK_COLOR:this.#b(f);break;case s.AnnotationEditorParamsType.INK_OPACITY:this.#v(f);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,g._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,g._defaultColor||u.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(g._defaultOpacity*100)]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||g._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,this.color||g._defaultColor||u.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??g._defaultOpacity))]]}#m(i){const f=this.thickness;this.addCommands({cmd:()=>{this.thickness=i,this.#P()},undo:()=>{this.thickness=f,this.#P()},mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#b(i){const f=this.color;this.addCommands({cmd:()=>{this.color=i,this.#w()},undo:()=>{this.color=f,this.#w()},mustExec:!0,type:s.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#v(i){i/=100;const f=this.opacity;this.addCommands({cmd:()=>{this.opacity=i,this.#w()},undo:()=>{this.opacity=f,this.#w()},mustExec:!0,type:s.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#E(),this.#x()),this.isAttachedToDOM||(this.parent.add(this),this.#k()),this.#P()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#a&&(clearTimeout(this.#a),this.#a=null),this.#u.disconnect(),this.#u=null,super.remove())}setParent(i){!this.parent&&i?this._uiManager.removeShouldRescale(this):this.parent&&i===null&&this._uiManager.addShouldRescale(this),super.setParent(i)}onScaleChanging(){const[i,f]=this.parentDimensions,w=this.width*i,P=this.height*f;this.setDimensions(w,P)}enableEditMode(){this.#c||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#r))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#r))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#A(){const{parentRotation:i,parentDimensions:[f,w]}=this;switch(i){case 90:return[0,w,w,f];case 180:return[f,w,f,w];case 270:return[f,0,w,f];default:return[0,0,f,w]}}#y(){const{ctx:i,color:f,opacity:w,thickness:P,parentScale:T,scaleFactor:N}=this;i.lineWidth=P*T/N,i.lineCap="round",i.lineJoin="round",i.miterLimit=10,i.strokeStyle=`${f}${(0,l.opacityToHex)(w)}`}#g(i,f){this.canvas.addEventListener("contextmenu",p.noContextMenu),this.canvas.addEventListener("pointerleave",this.#i),this.canvas.addEventListener("pointermove",this.#s),this.canvas.addEventListener("pointerup",this.#n),this.canvas.removeEventListener("pointerdown",this.#r),this.isEditing=!0,this.#f||(this.#f=!0,this.#k(),this.thickness||=g._defaultThickness,this.color||=g._defaultColor||u.AnnotationEditor._defaultLineColor,this.opacity??=g._defaultOpacity),this.currentPath.push([i,f]),this.#h=!1,this.#y(),this.#p=()=>{this.#I(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#C(i,f){const[w,P]=this.currentPath.at(-1);if(this.currentPath.length>1&&i===w&&f===P)return;const T=this.currentPath;let N=this.#l;if(T.push([i,f]),this.#h=!0,T.length<=2){N.moveTo(...T[0]),N.lineTo(i,f);return}T.length===3&&(this.#l=N=new Path2D,N.moveTo(...T[0])),this.#_(N,...T.at(-3),...T.at(-2),i,f)}#M(){if(this.currentPath.length===0)return;const i=this.currentPath.at(-1);this.#l.lineTo(...i)}#L(i,f){this.#p=null,i=Math.min(Math.max(i,0),this.canvas.width),f=Math.min(Math.max(f,0),this.canvas.height),this.#C(i,f),this.#M();let w;if(this.currentPath.length!==1)w=this.#O();else{const B=[i,f];w=[[B,B.slice(),B.slice(),B]]}const P=this.#l,T=this.currentPath;this.currentPath=[],this.#l=new Path2D;const N=()=>{this.allRawPaths.push(T),this.paths.push(w),this.bezierPath2D.push(P),this.rebuild()},O=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#E(),this.#x()),this.#P())};this.addCommands({cmd:N,undo:O,mustExec:!0})}#I(){if(!this.#h)return;this.#h=!1;const i=Math.ceil(this.thickness*this.parentScale),f=this.currentPath.slice(-3),w=f.map(N=>N[0]),P=f.map(N=>N[1]);Math.min(...w)-i,Math.max(...w)+i,Math.min(...P)-i,Math.max(...P)+i;const{ctx:T}=this;T.save(),T.clearRect(0,0,this.canvas.width,this.canvas.height);for(const N of this.bezierPath2D)T.stroke(N);T.stroke(this.#l),T.restore()}#_(i,f,w,P,T,N,O){const B=(f+P)/2,z=(w+T)/2,j=(P+N)/2,X=(T+O)/2;i.bezierCurveTo(B+2*(P-B)/3,z+2*(T-z)/3,j+2*(P-j)/3,X+2*(T-X)/3,j,X)}#O(){const i=this.currentPath;if(i.length<=2)return[[i[0],i[0],i.at(-1),i.at(-1)]];const f=[];let w,[P,T]=i[0];for(w=1;w<i.length-2;w++){const[Y,Z]=i[w],[nt,q]=i[w+1],V=(Y+nt)/2,U=(Z+q)/2,K=[P+2*(Y-P)/3,T+2*(Z-T)/3],Q=[V+2*(Y-V)/3,U+2*(Z-U)/3];f.push([[P,T],K,Q,[V,U]]),[P,T]=[V,U]}const[N,O]=i[w],[B,z]=i[w+1],j=[P+2*(N-P)/3,T+2*(O-T)/3],X=[B+2*(N-B)/3,z+2*(O-z)/3];return f.push([[P,T],j,X,[B,z]]),f}#w(){if(this.isEmpty()){this.#T();return}this.#y();const{canvas:i,ctx:f}=this;f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,i.width,i.height),this.#T();for(const w of this.bezierPath2D)f.stroke(w)}commit(){this.#c||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#c=!0,this.div.classList.add("disabled"),this.#P(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(i){this._focusEventsAllowed&&(super.focusin(i),this.enableEditMode())}canvasPointerdown(i){i.button!==0||!this.isInEditMode()||this.#c||(this.setInForeground(),i.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#g(i.offsetX,i.offsetY))}canvasPointermove(i){i.preventDefault(),this.#C(i.offsetX,i.offsetY)}canvasPointerup(i){i.preventDefault(),this.#D(i)}canvasPointerleave(i){this.#D(i)}#D(i){this.canvas.removeEventListener("pointerleave",this.#i),this.canvas.removeEventListener("pointermove",this.#s),this.canvas.removeEventListener("pointerup",this.#n),this.canvas.addEventListener("pointerdown",this.#r),this.#a&&clearTimeout(this.#a),this.#a=setTimeout(()=>{this.#a=null,this.canvas.removeEventListener("contextmenu",p.noContextMenu)},10),this.#L(i.offsetX,i.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#E(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#x(){this.#u=new ResizeObserver(i=>{const f=i[0].contentRect;f.width&&f.height&&this.setDimensions(f.width,f.height)}),this.#u.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#c}render(){if(this.div)return this.div;let i,f;this.width&&(i=this.x,f=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[w,P,T,N]=this.#A();if(this.setAt(w,P,0,0),this.setDims(T,N),this.#E(),this.width){const[O,B]=this.parentDimensions;this.setAspectRatio(this.width*O,this.height*B),this.setAt(i*O,f*B,this.width*O,this.height*B),this.#f=!0,this.#k(),this.setDims(this.width*O,this.height*B),this.#w(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#x(),this.div}#k(){if(!this.#f)return;const[i,f]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*i),this.canvas.height=Math.ceil(this.height*f),this.#T()}setDimensions(i,f){const w=Math.round(i),P=Math.round(f);if(this.#d===w&&this.#o===P)return;this.#d=w,this.#o=P,this.canvas.style.visibility="hidden";const[T,N]=this.parentDimensions;this.width=i/T,this.height=f/N,this.fixAndSetPosition(),this.#c&&this.#H(i,f),this.#k(),this.#w(),this.canvas.style.visibility="visible",this.fixDims()}#H(i,f){const w=this.#N(),P=(i-w)/this.#e,T=(f-w)/this.#t;this.scaleFactor=Math.min(P,T)}#T(){const i=this.#N()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+i,this.translationY*this.scaleFactor+i)}static#R(i){const f=new Path2D;for(let w=0,P=i.length;w<P;w++){const[T,N,O,B]=i[w];w===0&&f.moveTo(...T),f.bezierCurveTo(N[0],N[1],O[0],O[1],B[0],B[1])}return f}static#F(i,f,w){const[P,T,N,O]=f;switch(w){case 0:for(let B=0,z=i.length;B<z;B+=2)i[B]+=P,i[B+1]=O-i[B+1];break;case 90:for(let B=0,z=i.length;B<z;B+=2){const j=i[B];i[B]=i[B+1]+P,i[B+1]=j+T}break;case 180:for(let B=0,z=i.length;B<z;B+=2)i[B]=N-i[B],i[B+1]+=T;break;case 270:for(let B=0,z=i.length;B<z;B+=2){const j=i[B];i[B]=N-i[B+1],i[B+1]=O-j}break;default:throw new Error("Invalid rotation")}return i}static#$(i,f,w){const[P,T,N,O]=f;switch(w){case 0:for(let B=0,z=i.length;B<z;B+=2)i[B]-=P,i[B+1]=O-i[B+1];break;case 90:for(let B=0,z=i.length;B<z;B+=2){const j=i[B];i[B]=i[B+1]-T,i[B+1]=j-P}break;case 180:for(let B=0,z=i.length;B<z;B+=2)i[B]=N-i[B],i[B+1]-=T;break;case 270:for(let B=0,z=i.length;B<z;B+=2){const j=i[B];i[B]=O-i[B+1],i[B+1]=N-j}break;default:throw new Error("Invalid rotation")}return i}#U(i,f,w,P){const T=[],N=this.thickness/2,O=i*f+N,B=i*w+N;for(const z of this.paths){const j=[],X=[];for(let Y=0,Z=z.length;Y<Z;Y++){const[nt,q,V,U]=z[Y],K=i*nt[0]+O,Q=i*nt[1]+B,et=i*q[0]+O,ht=i*q[1]+B,lt=i*V[0]+O,at=i*V[1]+B,pt=i*U[0]+O,ut=i*U[1]+B;Y===0&&(j.push(K,Q),X.push(K,Q)),j.push(et,ht,lt,at,pt,ut),X.push(et,ht),Y===Z-1&&X.push(pt,ut)}T.push({bezier:g.#F(j,P,this.rotation),points:g.#F(X,P,this.rotation)})}return T}#B(){let i=1/0,f=-1/0,w=1/0,P=-1/0;for(const T of this.paths)for(const[N,O,B,z]of T){const j=s.Util.bezierBoundingBox(...N,...O,...B,...z);i=Math.min(i,j[0]),w=Math.min(w,j[1]),f=Math.max(f,j[2]),P=Math.max(P,j[3])}return[i,w,f,P]}#N(){return this.#c?Math.ceil(this.thickness*this.parentScale):0}#P(i=!1){if(this.isEmpty())return;if(!this.#c){this.#w();return}const f=this.#B(),w=this.#N();this.#e=Math.max(u.AnnotationEditor.MIN_SIZE,f[2]-f[0]),this.#t=Math.max(u.AnnotationEditor.MIN_SIZE,f[3]-f[1]);const P=Math.ceil(w+this.#e*this.scaleFactor),T=Math.ceil(w+this.#t*this.scaleFactor),[N,O]=this.parentDimensions;this.width=P/N,this.height=T/O,this.setAspectRatio(P,T);const B=this.translationX,z=this.translationY;this.translationX=-f[0],this.translationY=-f[1],this.#k(),this.#w(),this.#d=P,this.#o=T,this.setDims(P,T);const j=i?w/this.scaleFactor/2:0;this.translate(B-this.translationX-j,z-this.translationY-j)}static deserialize(i,f,w){if(i instanceof y.InkAnnotationElement)return null;const P=super.deserialize(i,f,w);P.thickness=i.thickness,P.color=s.Util.makeHexColor(...i.color),P.opacity=i.opacity;const[T,N]=P.pageDimensions,O=P.width*T,B=P.height*N,z=P.parentScale,j=i.thickness/2;P.#c=!0,P.#d=Math.round(O),P.#o=Math.round(B);const{paths:X,rect:Y,rotation:Z}=i;for(let{bezier:q}of X){q=g.#$(q,Y,Z);const V=[];P.paths.push(V);let U=z*(q[0]-j),K=z*(q[1]-j);for(let et=2,ht=q.length;et<ht;et+=6){const lt=z*(q[et]-j),at=z*(q[et+1]-j),pt=z*(q[et+2]-j),ut=z*(q[et+3]-j),ft=z*(q[et+4]-j),it=z*(q[et+5]-j);V.push([[U,K],[lt,at],[pt,ut],[ft,it]]),U=ft,K=it}const Q=this.#R(V);P.bezierPath2D.push(Q)}const nt=P.#B();return P.#e=Math.max(u.AnnotationEditor.MIN_SIZE,nt[2]-nt[0]),P.#t=Math.max(u.AnnotationEditor.MIN_SIZE,nt[3]-nt[1]),P.#H(O,B),P}serialize(){if(this.isEmpty())return null;const i=this.getRect(0,0),f=u.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:s.AnnotationEditorType.INK,color:f,thickness:this.thickness,opacity:this.opacity,paths:this.#U(this.scaleFactor/this.parentScale,this.translationX,this.translationY,i),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class A extends u.AnnotationEditor{#t=null;#e=null;#s=null;#i=null;#n=null;#r="";#a=null;#l=null;#c=null;#h=!1;#f=!1;static _type="stamp";static _editorType=s.AnnotationEditorType.STAMP;constructor(i){super({...i,name:"stampEditor"}),this.#i=i.bitmapUrl,this.#n=i.bitmapFile}static initialize(i){u.AnnotationEditor.initialize(i)}static get supportedTypes(){const i=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,s.shadow)(this,"supportedTypes",i.map(f=>`image/${f}`))}static get supportedTypesStr(){return(0,s.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(i){return this.supportedTypes.includes(i)}static paste(i,f){f.pasteEditor(s.AnnotationEditorType.STAMP,{bitmapFile:i.getAsFile()})}#u(i,f=!1){if(!i){this.remove();return}this.#t=i.bitmap,f||(this.#e=i.id,this.#h=i.isSvg),i.file&&(this.#r=i.file.name),this.#p()}#d(){this.#s=null,this._uiManager.enableWaiting(!1),this.#a&&this.div.focus()}#o(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(f=>this.#u(f,!0)).finally(()=>this.#d());return}if(this.#i){const f=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(f).then(w=>this.#u(w)).finally(()=>this.#d());return}if(this.#n){const f=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(f).then(w=>this.#u(w)).finally(()=>this.#d());return}const i=document.createElement("input");i.type="file",i.accept=A.supportedTypesStr,this.#s=new Promise(f=>{i.addEventListener("change",async()=>{if(!i.files||i.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const w=await this._uiManager.imageManager.getFromFile(i.files[0]);this.#u(w)}f()}),i.addEventListener("cancel",()=>{this.remove(),f()})}).finally(()=>this.#d()),i.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#l?.disconnect(),this.#l=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#o();return}super.rebuild(),this.div!==null&&(this.#e&&this.#o(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#s||this.#t||this.#i||this.#n)}get isResizable(){return!0}render(){if(this.div)return this.div;let i,f;if(this.width&&(i=this.x,f=this.y),super.render(),this.div.hidden=!0,this.#t?this.#p():this.#o(),this.width){const[w,P]=this.parentDimensions;this.setAt(i*w,f*P,this.width*w,this.height*P)}return this.div}#p(){const{div:i}=this;let{width:f,height:w}=this.#t;const[P,T]=this.pageDimensions,N=.75;if(this.width)f=this.width*P,w=this.height*T;else if(f>N*P||w>N*T){const j=Math.min(N*P/f,N*T/w);f*=j,w*=j}const[O,B]=this.parentDimensions;this.setDims(f*O/P,w*B/T),this._uiManager.enableWaiting(!1);const z=this.#a=document.createElement("canvas");i.append(z),i.hidden=!1,this.#v(f,w),this.#y(),this.#f||(this.parent.addUndoableEditor(this),this.#f=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton(),this.#r&&z.setAttribute("aria-label",this.#r)}#m(i,f){const[w,P]=this.parentDimensions;this.width=i/w,this.height=f/P,this.setDims(i,f),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#c!==null&&clearTimeout(this.#c);const T=200;this.#c=setTimeout(()=>{this.#c=null,this.#v(i,f)},T)}#b(i,f){const{width:w,height:P}=this.#t;let T=w,N=P,O=this.#t;for(;T>2*i||N>2*f;){const B=T,z=N;T>2*i&&(T=T>=16384?Math.floor(T/2)-1:Math.ceil(T/2)),N>2*f&&(N=N>=16384?Math.floor(N/2)-1:Math.ceil(N/2));const j=new OffscreenCanvas(T,N);j.getContext("2d").drawImage(O,0,0,B,z,0,0,T,N),O=j.transferToImageBitmap()}return O}#v(i,f){i=Math.ceil(i),f=Math.ceil(f);const w=this.#a;if(!w||w.width===i&&w.height===f)return;w.width=i,w.height=f;const P=this.#h?this.#t:this.#b(i,f),T=w.getContext("2d");T.filter=this._uiManager.hcmFilter,T.drawImage(P,0,0,P.width,P.height,0,0,i,f)}getImageForAltText(){return this.#a}#A(i){if(i){if(this.#h){const P=this._uiManager.imageManager.getSvgUrl(this.#e);if(P)return P}const f=document.createElement("canvas");return{width:f.width,height:f.height}=this.#t,f.getContext("2d").drawImage(this.#t,0,0),f.toDataURL()}if(this.#h){const[f,w]=this.pageDimensions,P=Math.round(this.width*f*p.PixelsPerInch.PDF_TO_CSS_UNITS),T=Math.round(this.height*w*p.PixelsPerInch.PDF_TO_CSS_UNITS),N=new OffscreenCanvas(P,T);return N.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,P,T),N.transferToImageBitmap()}return structuredClone(this.#t)}#y(){this.#l=new ResizeObserver(i=>{const f=i[0].contentRect;f.width&&f.height&&this.#m(f.width,f.height)}),this.#l.observe(this.div)}static deserialize(i,f,w){if(i instanceof y.StampAnnotationElement)return null;const P=super.deserialize(i,f,w),{rect:T,bitmapUrl:N,bitmapId:O,isSvg:B,accessibilityData:z}=i;O&&w.imageManager.isValidId(O)?P.#e=O:P.#i=N,P.#h=B;const[j,X]=P.pageDimensions;return P.width=(T[2]-T[0])/j,P.height=(T[3]-T[1])/X,z&&(P.altTextData=z),P}serialize(i=!1,f=null){if(this.isEmpty())return null;const w={annotationType:s.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#h,structTreeParentId:this._structTreeParentId};if(i)return w.bitmapUrl=this.#A(!0),w.accessibilityData=this.altTextData,w;const{decorative:P,altText:T}=this.altTextData;if(!P&&T&&(w.accessibilityData={type:"Figure",alt:T}),f===null)return w;f.stamps||=new Map;const N=this.#h?(w.rect[2]-w.rect[0])*(w.rect[3]-w.rect[1]):null;if(!f.stamps.has(this.#e))f.stamps.set(this.#e,{area:N,serialized:w}),w.bitmap=this.#A(!1);else if(this.#h){const O=f.stamps.get(this.#e);N>O.area&&(O.area=N,O.serialized.bitmap.close(),O.serialized.bitmap=this.#A(!1))}return w}}class h{#t;#e=!1;#s=null;#i=this.pointerup.bind(this);#n=this.pointerUpAfterSelection.bind(this);#r=this.pointerdown.bind(this);#a=null;#l=this.selectionStart.bind(this);#c=new Map;#h=!1;#f=!1;#u=!1;#d=null;#o;static _initialized=!1;static#p=new Map([v,g,A,m].map(i=>[i._editorType,i]));constructor({uiManager:i,pageIndex:f,div:w,accessibilityManager:P,annotationLayer:T,drawLayer:N,textLayer:O,viewport:B,l10n:z}){const j=[...h.#p.values()];if(!h._initialized){h._initialized=!0;for(const X of j)X.initialize(z)}i.registerEditorTypes(j),this.#o=i,this.pageIndex=f,this.div=w,this.#t=P,this.#s=T,this.viewport=B,this.#d=O,this.drawLayer=N,this.#o.addLayer(this)}get isEmpty(){return this.#c.size===0}updateToolbar(i){this.#o.updateToolbar(i)}updateMode(i=this.#o.getMode()){switch(this.#y(),i){case s.AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;case s.AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case s.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}if(i!==s.AnnotationEditorType.NONE){const{classList:f}=this.div;for(const w of h.#p.values())f.toggle(`${w._type}Editing`,i===w._editorType);this.div.hidden=!1}}addInkEditorIfNeeded(i){if(this.#o.getMode()!==s.AnnotationEditorType.INK)return;if(!i){for(const w of this.#c.values())if(w.isEmpty()){w.setInBackground();return}}this.#v({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(i){this.#o.setEditingState(i)}addCommands(i){this.#o.addCommands(i)}togglePointerEvents(i=!1){this.div.classList.toggle("disabled",!i)}enable(){this.togglePointerEvents(!0);const i=new Set;for(const w of this.#c.values())w.enableEditing(),w.annotationElementId&&i.add(w.annotationElementId);if(!this.#s)return;const f=this.#s.getEditableAnnotations();for(const w of f){if(w.hide(),this.#o.isDeletedAnnotationElement(w.data.id)||i.has(w.data.id))continue;const P=this.deserialize(w);P&&(this.addOrRebuild(P),P.enableEditing())}}disable(){this.#u=!0,this.togglePointerEvents(!1);const i=new Set;for(const w of this.#c.values()){if(w.disableEditing(),!w.annotationElementId||w.serialize()!==null){i.add(w.annotationElementId);continue}this.getEditableAnnotation(w.annotationElementId)?.show(),w.remove()}if(this.#s){const w=this.#s.getEditableAnnotations();for(const P of w){const{id:T}=P.data;i.has(T)||this.#o.isDeletedAnnotationElement(T)||P.show()}}this.#y(),this.isEmpty&&(this.div.hidden=!0);const{classList:f}=this.div;for(const w of h.#p.values())f.remove(`${w._type}Editing`);this.disableTextSelection(),this.#u=!1}getEditableAnnotation(i){return this.#s?.getEditableAnnotation(i)||null}setActiveEditor(i){this.#o.getActive()!==i&&this.#o.setActiveEditor(i)}enableTextSelection(){this.#d?.div&&document.addEventListener("selectstart",this.#l)}disableTextSelection(){this.#d?.div&&document.removeEventListener("selectstart",this.#l)}enableClick(){this.div.addEventListener("pointerdown",this.#r),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#r),this.div.removeEventListener("pointerup",this.#i)}attach(i){this.#c.set(i.id,i);const{annotationElementId:f}=i;f&&this.#o.isDeletedAnnotationElement(f)&&this.#o.removeDeletedAnnotationElement(i)}detach(i){this.#c.delete(i.id),this.#t?.removePointerInTextLayer(i.contentDiv),!this.#u&&i.annotationElementId&&this.#o.addDeletedAnnotationElement(i)}remove(i){this.detach(i),this.#o.removeEditor(i),i.div.remove(),i.isAttachedToDOM=!1,this.#f||this.addInkEditorIfNeeded(!1)}changeParent(i){i.parent!==this&&(i.annotationElementId&&(this.#o.addDeletedAnnotationElement(i.annotationElementId),u.AnnotationEditor.deleteAnnotationElement(i),i.annotationElementId=null),this.attach(i),i.parent?.detach(i),i.setParent(this),i.div&&i.isAttachedToDOM&&(i.div.remove(),this.div.append(i.div)))}add(i){if(this.changeParent(i),this.#o.addEditor(i),this.attach(i),!i.isAttachedToDOM){const f=i.render();this.div.append(f),i.isAttachedToDOM=!0}i.fixAndSetPosition(),i.onceAdded(),this.#o.addToAnnotationStorage(i)}moveEditorInDOM(i){if(!i.isAttachedToDOM)return;const{activeElement:f}=document;i.div.contains(f)&&!this.#a&&(i._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,i.div.contains(document.activeElement)?i._focusEventsAllowed=!0:(i.div.addEventListener("focusin",()=>{i._focusEventsAllowed=!0},{once:!0}),f.focus())},0)),i._structTreeParentId=this.#t?.moveElementInDOM(this.div,i.div,i.contentDiv,!0)}addOrRebuild(i){i.needsToBeRebuilt()?(i.parent||=this,i.rebuild()):this.add(i)}addUndoableEditor(i){const f=()=>i._uiManager.rebuild(i),w=()=>{i.remove()};this.addCommands({cmd:f,undo:w,mustExec:!1})}getNextId(){return this.#o.getId()}get#m(){return h.#p.get(this.#o.getMode())}#b(i){const f=this.#m;return f?new f.prototype.constructor(i):null}canCreateNewEmptyEditor(){return this.#m?.canCreateNewEmptyEditor()}pasteEditor(i,f){this.#o.updateToolbar(i),this.#o.updateMode(i);const{offsetX:w,offsetY:P}=this.#A(),T=this.getNextId(),N=this.#b({parent:this,id:T,x:w,y:P,uiManager:this.#o,isCentered:!0,...f});N&&this.add(N)}deserialize(i){return h.#p.get(i.annotationType??i.annotationEditorType)?.deserialize(i,this,this.#o)||null}#v(i,f,w={}){const P=this.getNextId(),T=this.#b({parent:this,id:P,x:i.offsetX,y:i.offsetY,uiManager:this.#o,isCentered:f,...w});return T&&this.add(T),T}#A(){const{x:i,y:f,width:w,height:P}=this.div.getBoundingClientRect(),T=Math.max(0,i),N=Math.max(0,f),O=Math.min(window.innerWidth,i+w),B=Math.min(window.innerHeight,f+P),z=(T+O)/2-i,j=(N+B)/2-f,[X,Y]=this.viewport.rotation%180===0?[z,j]:[j,z];return{offsetX:X,offsetY:Y}}addNewEditor(){this.#v(this.#A(),!0)}setSelected(i){this.#o.setSelected(i)}toggleSelected(i){this.#o.toggleSelected(i)}isSelected(i){return this.#o.isSelected(i)}unselect(i){this.#o.unselect(i)}selectionStart(i){this.#d?.div.addEventListener("pointerup",this.#n,{once:!0})}pointerUpAfterSelection(i){const f=document.getSelection();if(f.rangeCount===0)return;const w=f.getRangeAt(0);if(w.collapsed||!this.#d?.div.contains(w.commonAncestorContainer))return;const{x:P,y:T,width:N,height:O}=this.#d.div.getBoundingClientRect(),B=w.getClientRects();let z;switch(this.viewport.rotation){case 90:z=(X,Y,Z,nt)=>({x:(Y-T)/O,y:1-(X+Z-P)/N,width:nt/O,height:Z/N});break;case 180:z=(X,Y,Z,nt)=>({x:1-(X+Z-P)/N,y:1-(Y+nt-T)/O,width:Z/N,height:nt/O});break;case 270:z=(X,Y,Z,nt)=>({x:1-(Y+nt-T)/O,y:(X-P)/N,width:nt/O,height:Z/N});break;default:z=(X,Y,Z,nt)=>({x:(X-P)/N,y:(Y-T)/O,width:Z/N,height:nt/O});break}const j=[];for(const{x:X,y:Y,width:Z,height:nt}of B)Z===0||nt===0||j.push(z(X,Y,Z,nt));j.length!==0&&this.#v(i,!1,{boxes:j}),f.empty()}pointerup(i){const{isMac:f}=s.FeatureTest.platform;if(!(i.button!==0||i.ctrlKey&&f)&&i.target===this.div&&this.#h){if(this.#h=!1,!this.#e){this.#e=!0;return}if(this.#o.getMode()===s.AnnotationEditorType.STAMP){this.#o.unselectAll();return}this.#v(i,!1)}}pointerdown(i){if(this.#o.getMode()===s.AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),this.#h){this.#h=!1;return}const{isMac:f}=s.FeatureTest.platform;if(i.button!==0||i.ctrlKey&&f||i.target!==this.div)return;this.#h=!0;const w=this.#o.getActive();this.#e=!w||w.isEmpty()}findNewParent(i,f,w){const P=this.#o.findParent(f,w);return P===null||P===this?!1:(P.changeParent(i),!0)}destroy(){this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const i of this.#c.values())this.#t?.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,this.#c.clear(),this.#o.removeLayer(this)}#y(){this.#f=!0;for(const i of this.#c.values())i.isEmpty()&&i.remove();this.#f=!1}render({viewport:i}){this.viewport=i,(0,p.setLayerDimensions)(this.div,i);for(const f of this.#o.getEditors(this.pageIndex))this.add(f);this.updateMode()}update({viewport:i}){this.#o.commitOrRemove();const f=this.viewport.rotation,w=i.rotation;if(this.viewport=i,(0,p.setLayerDimensions)(this.div,{rotation:w}),f!==w)for(const P of this.#c.values())P.rotate(w);this.updateMode()}get pageDimensions(){const{pageWidth:i,pageHeight:f}=this.viewport.rawDims;return[i,f]}}}),97:((t,e,n)=>{n.d(e,{ColorPicker:()=>y});var s=n(266),u=n(812),l=n(473);class y{#t=this.#u.bind(this);#e=null;#s=null;#i;#n=null;#r=!1;#a=!1;#l;#c=null;static get _keyboardManager(){return(0,s.shadow)(this,"_keyboardManager",new u.KeyboardManager([[["Escape","mac+Escape"],y.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],y.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],y.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],y.prototype._moveToPrevious],[["Home","mac+Home"],y.prototype._moveToBeginning],[["End","mac+End"],y.prototype._moveToEnd]]))}constructor({editor:E=null,uiManager:C=null}){this.#a=!E,this.#c=E?._uiManager||C,this.#l=this.#c._eventBus,this.#i=E?.color||this.#c?.highlightColors.values().next().value||"#FFFF98"}renderButton(){const E=this.#e=document.createElement("button");E.className="colorPicker",E.tabIndex="0",E.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),E.setAttribute("aria-haspopup",!0),E.addEventListener("click",this.#d.bind(this));const C=this.#s=document.createElement("span");return C.className="swatch",C.style.backgroundColor=this.#i,E.append(C),E}renderMainDropdown(){const E=this.#n=this.#h(s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR);return E.setAttribute("aria-orientation","horizontal"),E.setAttribute("aria-labelledby","highlightColorPickerLabel"),E}#h(E){const C=document.createElement("div");C.addEventListener("contextmenu",l.noContextMenu),C.className="dropdown",C.role="listbox",C.setAttribute("aria-multiselectable",!1),C.setAttribute("aria-orientation","vertical"),C.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[m,p]of this.#c.highlightColors){const g=document.createElement("button");g.tabIndex="0",g.role="option",g.setAttribute("data-color",p),g.title=m,g.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${m}`);const A=document.createElement("span");g.append(A),A.className="swatch",A.style.backgroundColor=p,g.setAttribute("aria-selected",p===this.#i),g.addEventListener("click",this.#f.bind(this,E,p)),C.append(g)}return C.addEventListener("keydown",this.#t),C}#f(E,C,m){m.stopPropagation(),this.#l.dispatch("switchannotationeditorparams",{source:this,type:E,value:C})}_colorSelectFromKeyboard(E){const C=E.target.getAttribute("data-color");C&&this.#f(C,E)}_moveToNext(E){if(E.target===this.#e){this.#n.firstChild?.focus();return}E.target.nextSibling?.focus()}_moveToPrevious(E){E.target.previousSibling?.focus()}_moveToBeginning(){this.#n.firstChild?.focus()}_moveToEnd(){this.#n.lastChild?.focus()}#u(E){y._keyboardManager.exec(this,E)}#d(E){if(this.#n&&!this.#n.classList.contains("hidden")){this.hideDropdown();return}if(this.#e.addEventListener("keydown",this.#t),this.#r=E.detail===0,this.#n){this.#n.classList.remove("hidden");return}const C=this.#n=this.#h(s.AnnotationEditorParamsType.HIGHLIGHT_COLOR);this.#e.append(C)}hideDropdown(){this.#n?.classList.add("hidden")}_hideDropdownFromKeyboard(){this.#a||!this.#n||this.#n.classList.contains("hidden")||(this.hideDropdown(),this.#e.removeEventListener("keydown",this.#t),this.#e.focus({preventScroll:!0,focusVisible:this.#r}))}updateColor(E){if(this.#s&&(this.#s.style.backgroundColor=E),!this.#n)return;const C=this.#c.highlightColors.values();for(const m of this.#n.children)m.setAttribute("aria-selected",C.next().value===E)}destroy(){this.#e?.remove(),this.#e=null,this.#s=null,this.#n?.remove(),this.#n=null}}}),115:((t,e,n)=>{n.d(e,{AnnotationEditor:()=>E});var s=n(812),u=n(266),l=n(473);class y{#t="";#e=!1;#s=null;#i=null;#n=null;#r=!1;#a=null;static _l10nPromise=null;constructor(p){this.#a=p}static initialize(p){y._l10nPromise||=p}async render(){const p=this.#s=document.createElement("button");p.className="altText";const g=await y._l10nPromise.get("pdfjs-editor-alt-text-button-label");p.textContent=g,p.setAttribute("aria-label",g),p.tabIndex="0",p.addEventListener("contextmenu",l.noContextMenu),p.addEventListener("pointerdown",h=>h.stopPropagation());const A=h=>{h.preventDefault(),this.#a._uiManager.editAltText(this.#a)};return p.addEventListener("click",A,{capture:!0}),p.addEventListener("keydown",h=>{h.target===p&&h.key==="Enter"&&(this.#r=!0,A(h))}),await this.#l(),p}finish(){this.#s&&(this.#s.focus({focusVisible:this.#r}),this.#r=!1)}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:p,decorative:g}){this.#t===p&&this.#e===g||(this.#t=p,this.#e=g,this.#l())}toggle(p=!1){this.#s&&(!p&&this.#n&&(clearTimeout(this.#n),this.#n=null),this.#s.disabled=!p)}destroy(){this.#s?.remove(),this.#s=null,this.#i=null}async#l(){const p=this.#s;if(!p)return;if(!this.#t&&!this.#e){p.classList.remove("done"),this.#i?.remove();return}p.classList.add("done"),y._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(h=>{p.setAttribute("aria-label",h)});let g=this.#i;if(!g){this.#i=g=document.createElement("span"),g.className="tooltip",g.setAttribute("role","tooltip");const h=g.id=`alt-text-tooltip-${this.#a.id}`;p.setAttribute("aria-describedby",h);const S=100;p.addEventListener("mouseenter",()=>{this.#n=setTimeout(()=>{this.#n=null,this.#i.classList.add("show"),this.#a._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.#a.editorType,data:{action:"alt_text_tooltip"}}})},S)}),p.addEventListener("mouseleave",()=>{this.#n&&(clearTimeout(this.#n),this.#n=null),this.#i?.classList.remove("show")})}g.innerText=this.#e?await y._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):this.#t,g.parentNode||p.append(g),this.#a.getImageForAltText()?.setAttribute("aria-describedby",g.id)}}class v{#t=null;#e=null;#s;#i=null;constructor(p){this.#s=p}render(){const p=this.#t=document.createElement("div");p.className="editToolbar",p.addEventListener("contextmenu",l.noContextMenu),p.addEventListener("pointerdown",v.#n);const g=this.#i=document.createElement("div");g.className="buttons",p.append(g);const A=this.#s.toolbarPosition;if(A){const{style:h}=p,S=this.#s._uiManager.direction==="ltr"?1-A[0]:A[0];h.insetInlineEnd=`${100*S}%`,h.top=`calc(${100*A[1]}% + var(--editor-toolbar-vert-offset))`}return this.#c(),p}static#n(p){p.stopPropagation()}#r(p){this.#s._focusEventsAllowed=!1,p.preventDefault(),p.stopPropagation()}#a(p){this.#s._focusEventsAllowed=!0,p.preventDefault(),p.stopPropagation()}#l(p){p.addEventListener("focusin",this.#r.bind(this),{capture:!0}),p.addEventListener("focusout",this.#a.bind(this),{capture:!0}),p.addEventListener("contextmenu",l.noContextMenu)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden")}#c(){const p=document.createElement("button");p.className="delete",p.tabIndex=0,p.setAttribute("data-l10n-id",`pdfjs-editor-remove-${this.#s.editorType}-button`),this.#l(p),p.addEventListener("click",g=>{this.#s._uiManager.delete()}),this.#i.append(p)}get#h(){const p=document.createElement("div");return p.className="divider",p}addAltTextButton(p){this.#l(p),this.#i.prepend(p,this.#h)}addColorPicker(p){this.#e=p;const g=p.renderButton();this.#l(g),this.#i.prepend(g,this.#h)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class E{#t=null;#e=null;#s=!1;#i=null;#n=null;#r=this.focusin.bind(this);#a=this.focusout.bind(this);#l=null;#c="";#h=!1;#f=!1;#u=!1;#d=!1;#o=null;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#p=!1;#m=E._zIndex++;static _borderLineWidth=-1;static _colorManager=new s.ColorManager;static _zIndex=1;static get _resizerKeyboardManager(){const p=E.prototype._resizeWithKeyboard,g=s.AnnotationEditorUIManager.TRANSLATE_SMALL,A=s.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,u.shadow)(this,"_resizerKeyboardManager",new s.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],p,{args:[-g,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],p,{args:[-A,0]}],[["ArrowRight","mac+ArrowRight"],p,{args:[g,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],p,{args:[A,0]}],[["ArrowUp","mac+ArrowUp"],p,{args:[0,-g]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],p,{args:[0,-A]}],[["ArrowDown","mac+ArrowDown"],p,{args:[0,g]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],p,{args:[0,A]}],[["Escape","mac+Escape"],E.prototype._stopResizingWithKeyboard]]))}constructor(p){this.constructor===E&&(0,u.unreachable)("Cannot initialize AnnotationEditor."),this.parent=p.parent,this.id=p.id,this.width=this.height=null,this.pageIndex=p.parent.pageIndex,this.name=p.name,this.div=null,this._uiManager=p.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=p.isCentered,this._structTreeParentId=null;const{rotation:g,rawDims:{pageWidth:A,pageHeight:h,pageX:S,pageY:i}}=this.parent.viewport;this.rotation=g,this.pageRotation=(360+g-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[A,h],this.pageTranslation=[S,i];const[f,w]=this.parentDimensions;this.x=p.x/f,this.y=p.y/w,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,u.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(p){const g=new C({id:p.parent.getNextId(),parent:p.parent,uiManager:p._uiManager});g.annotationElementId=p.annotationElementId,g.deleted=!0,g._uiManager.addToAnnotationStorage(g)}static initialize(p,g=null){if(E._l10nPromise||=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(h=>[h,p.get(h.replaceAll(/([A-Z])/g,S=>`-${S.toLowerCase()}`))])),g?.strings)for(const h of g.strings)E._l10nPromise.set(h,p.get(h));if(E._borderLineWidth!==-1)return;const A=getComputedStyle(document.documentElement);E._borderLineWidth=parseFloat(A.getPropertyValue("--outline-width"))||0}static updateDefaultParams(p,g){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(p){return!1}static paste(p,g){(0,u.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#p}set _isDraggable(p){this.#p=p,this.div?.classList.toggle("draggable",p)}get isEnterHandled(){return!0}center(){const[p,g]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*g/(p*2),this.y+=this.width*p/(g*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*g/(p*2),this.y-=this.width*p/(g*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(p){this._uiManager.addCommands(p)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#m}setParent(p){p!==null?(this.pageIndex=p.pageIndex,this.pageDimensions=p.pageDimensions):this.#x(),this.parent=p}focusin(p){this._focusEventsAllowed&&(this.#h?this.#h=!1:this.parent.setSelected(this))}focusout(p){!this._focusEventsAllowed||!this.isAttachedToDOM||p.relatedTarget?.closest(`#${this.id}`)||(p.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(p,g,A,h){const[S,i]=this.parentDimensions;[A,h]=this.screenToPageTranslation(A,h),this.x=(p+A)/S,this.y=(g+h)/i,this.fixAndSetPosition()}#b([p,g],A,h){[A,h]=this.screenToPageTranslation(A,h),this.x+=A/p,this.y+=h/g,this.fixAndSetPosition()}translate(p,g){this.#b(this.parentDimensions,p,g)}translateInPage(p,g){this.#b(this.pageDimensions,p,g),this.div.scrollIntoView({block:"nearest"})}drag(p,g){const[A,h]=this.parentDimensions;if(this.x+=p/A,this.y+=g/h,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:P,y:T}=this.div.getBoundingClientRect();this.parent.findNewParent(this,P,T)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:S,y:i}=this;const[f,w]=this.#v();S+=f,i+=w,this.div.style.left=`${(100*S).toFixed(2)}%`,this.div.style.top=`${(100*i).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#v(){const[p,g]=this.parentDimensions,{_borderLineWidth:A}=E,h=A/p,S=A/g;switch(this.rotation){case 90:return[-h,S];case 180:return[h,S];case 270:return[h,-S];default:return[-h,-S]}}fixAndSetPosition(p=this.rotation){const[g,A]=this.pageDimensions;let{x:h,y:S,width:i,height:f}=this;switch(i*=g,f*=A,h*=g,S*=A,p){case 0:h=Math.max(0,Math.min(g-i,h)),S=Math.max(0,Math.min(A-f,S));break;case 90:h=Math.max(0,Math.min(g-f,h)),S=Math.min(A,Math.max(i,S));break;case 180:h=Math.min(g,Math.max(i,h)),S=Math.min(A,Math.max(f,S));break;case 270:h=Math.min(g,Math.max(f,h)),S=Math.max(0,Math.min(A-i,S));break}this.x=h/=g,this.y=S/=A;const[w,P]=this.#v();h+=w,S+=P;const{style:T}=this.div;T.left=`${(100*h).toFixed(2)}%`,T.top=`${(100*S).toFixed(2)}%`,this.moveInDOM()}static#A(p,g,A){switch(A){case 90:return[g,-p];case 180:return[-p,-g];case 270:return[-g,p];default:return[p,g]}}screenToPageTranslation(p,g){return E.#A(p,g,this.parentRotation)}pageTranslationToScreen(p,g){return E.#A(p,g,360-this.parentRotation)}#y(p){switch(p){case 90:{const[g,A]=this.pageDimensions;return[0,-g/A,A/g,0]}case 180:return[-1,0,0,-1];case 270:{const[g,A]=this.pageDimensions;return[0,g/A,-A/g,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:p,pageDimensions:[g,A]}=this,h=g*p,S=A*p;return u.FeatureTest.isCSSRoundSupported?[Math.round(h),Math.round(S)]:[h,S]}setDims(p,g){const[A,h]=this.parentDimensions;this.div.style.width=`${(100*p/A).toFixed(2)}%`,this.#s||(this.div.style.height=`${(100*g/h).toFixed(2)}%`)}fixDims(){const{style:p}=this.div,{height:g,width:A}=p,h=A.endsWith("%"),S=!this.#s&&g.endsWith("%");if(h&&S)return;const[i,f]=this.parentDimensions;h||(p.width=`${(100*parseFloat(A)/i).toFixed(2)}%`),!this.#s&&!S&&(p.height=`${(100*parseFloat(g)/f).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#g(){if(this.#i)return;this.#i=document.createElement("div"),this.#i.classList.add("resizers");const p=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const g of p){const A=document.createElement("div");this.#i.append(A),A.classList.add("resizer",g),A.setAttribute("data-resizer-name",g),A.addEventListener("pointerdown",this.#C.bind(this,g)),A.addEventListener("contextmenu",l.noContextMenu),A.tabIndex=-1}this.div.prepend(this.#i)}#C(p,g){g.preventDefault();const{isMac:A}=u.FeatureTest.platform;if(g.button!==0||g.ctrlKey&&A)return;this.#e?.toggle(!1);const h=this.#L.bind(this,p),S=this._isDraggable;this._isDraggable=!1;const i={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",h,i);const f=this.x,w=this.y,P=this.width,T=this.height,N=this.parent.div.style.cursor,O=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(g.target).cursor;const B=()=>{this.parent.togglePointerEvents(!0),this.#e?.toggle(!0),this._isDraggable=S,window.removeEventListener("pointerup",B),window.removeEventListener("blur",B),window.removeEventListener("pointermove",h,i),this.parent.div.style.cursor=N,this.div.style.cursor=O,this.#M(f,w,P,T)};window.addEventListener("pointerup",B),window.addEventListener("blur",B)}#M(p,g,A,h){const S=this.x,i=this.y,f=this.width,w=this.height;S===p&&i===g&&f===A&&w===h||this.addCommands({cmd:()=>{this.width=f,this.height=w,this.x=S,this.y=i;const[P,T]=this.parentDimensions;this.setDims(P*f,T*w),this.fixAndSetPosition()},undo:()=>{this.width=A,this.height=h,this.x=p,this.y=g;const[P,T]=this.parentDimensions;this.setDims(P*A,T*h),this.fixAndSetPosition()},mustExec:!0})}#L(p,g){const[A,h]=this.parentDimensions,S=this.x,i=this.y,f=this.width,w=this.height,P=E.MIN_SIZE/A,T=E.MIN_SIZE/h,N=F=>Math.round(F*1e4)/1e4,O=this.#y(this.rotation),B=(F,x)=>[O[0]*F+O[2]*x,O[1]*F+O[3]*x],z=this.#y(360-this.rotation),j=(F,x)=>[z[0]*F+z[2]*x,z[1]*F+z[3]*x];let X,Y,Z=!1,nt=!1;switch(p){case"topLeft":Z=!0,X=(F,x)=>[0,0],Y=(F,x)=>[F,x];break;case"topMiddle":X=(F,x)=>[F/2,0],Y=(F,x)=>[F/2,x];break;case"topRight":Z=!0,X=(F,x)=>[F,0],Y=(F,x)=>[0,x];break;case"middleRight":nt=!0,X=(F,x)=>[F,x/2],Y=(F,x)=>[0,x/2];break;case"bottomRight":Z=!0,X=(F,x)=>[F,x],Y=(F,x)=>[0,0];break;case"bottomMiddle":X=(F,x)=>[F/2,x],Y=(F,x)=>[F/2,0];break;case"bottomLeft":Z=!0,X=(F,x)=>[0,x],Y=(F,x)=>[F,0];break;case"middleLeft":nt=!0,X=(F,x)=>[0,x/2],Y=(F,x)=>[F,x/2];break}const q=X(f,w),V=Y(f,w);let U=B(...V);const K=N(S+U[0]),Q=N(i+U[1]);let et=1,ht=1,[lt,at]=this.screenToPageTranslation(g.movementX,g.movementY);if([lt,at]=j(lt/A,at/h),Z){const F=Math.hypot(f,w);et=ht=Math.max(Math.min(Math.hypot(V[0]-q[0]-lt,V[1]-q[1]-at)/F,1/f,1/w),P/f,T/w)}else nt?et=Math.max(P,Math.min(1,Math.abs(V[0]-q[0]-lt)))/f:ht=Math.max(T,Math.min(1,Math.abs(V[1]-q[1]-at)))/w;const pt=N(f*et),ut=N(w*ht);U=B(...Y(pt,ut));const ft=K-U[0],it=Q-U[1];this.width=pt,this.height=ut,this.x=ft,this.y=it,this.setDims(A*pt,h*ut),this.fixAndSetPosition()}altTextFinish(){this.#e?.finish()}async addEditToolbar(){return this.#l||this.#u?this.#l:(this.#l=new v(this),this.div.append(this.#l.render()),this.#e&&this.#l.addAltTextButton(await this.#e.render()),this.#l)}removeEditToolbar(){this.#l&&(this.#l.remove(),this.#l=null,this.#e?.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#e||(y.initialize(E._l10nPromise),this.#e=new y(this),await this.addEditToolbar())}get altTextData(){return this.#e?.data}set altTextData(p){this.#e&&(this.#e.data=p)}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#r),this.div.addEventListener("focusout",this.#a);const[p,g]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*g/p).toFixed(2)}%`,this.div.style.maxHeight=`${(100*p/g).toFixed(2)}%`);const[A,h]=this.getInitialTranslation();return this.translate(A,h),(0,s.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(p){const{isMac:g}=u.FeatureTest.platform;if(p.button!==0||p.ctrlKey&&g){p.preventDefault();return}if(this.#h=!0,this._isDraggable){this.#_(p);return}this.#I(p)}#I(p){const{isMac:g}=u.FeatureTest.platform;p.ctrlKey&&!g||p.shiftKey||p.metaKey&&g?this.parent.toggleSelected(this):this.parent.setSelected(this)}#_(p){const g=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let A,h;g&&(A={passive:!0,capture:!0},h=i=>{const[f,w]=this.screenToPageTranslation(i.movementX,i.movementY);this._uiManager.dragSelectedEditors(f,w)},window.addEventListener("pointermove",h,A));const S=()=>{window.removeEventListener("pointerup",S),window.removeEventListener("blur",S),g&&window.removeEventListener("pointermove",h,A),this.#h=!1,this._uiManager.endDragSession()||this.#I(p)};window.addEventListener("pointerup",S),window.addEventListener("blur",S)}moveInDOM(){this.#o&&clearTimeout(this.#o),this.#o=setTimeout(()=>{this.#o=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(p,g,A){p.changeParent(this),this.x=g,this.y=A,this.fixAndSetPosition()}getRect(p,g,A=this.rotation){const h=this.parentScale,[S,i]=this.pageDimensions,[f,w]=this.pageTranslation,P=p/h,T=g/h,N=this.x*S,O=this.y*i,B=this.width*S,z=this.height*i;switch(A){case 0:return[N+P+f,i-O-T-z+w,N+P+B+f,i-O-T+w];case 90:return[N+T+f,i-O+P+w,N+T+z+f,i-O+P+B+w];case 180:return[N-P-B+f,i-O+T+w,N-P+f,i-O+T+z+w];case 270:return[N-T-z+f,i-O-P-B+w,N-T+f,i-O-P+w];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(p,g){const[A,h,S,i]=p,f=S-A,w=i-h;switch(this.rotation){case 0:return[A,g-i,f,w];case 90:return[A,g-h,w,f];case 180:return[S,g-h,f,w];case 270:return[S,g-i,w,f];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#u=!0}disableEditMode(){this.#u=!1}isInEditMode(){return this.#u}shouldGetKeyboardEvents(){return this.#d}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#r),this.div?.addEventListener("focusout",this.#a)}rotate(p){}serialize(p=!1,g=null){(0,u.unreachable)("An editor must be serializable")}static deserialize(p,g,A){const h=new this.prototype.constructor({parent:g,id:g.getNextId(),uiManager:A});h.rotation=p.rotation;const[S,i]=h.pageDimensions,[f,w,P,T]=h.getRectInCurrentCoords(p.rect,i);return h.x=f/S,h.y=w/i,h.width=P/S,h.height=T/i,h}remove(){this.div.removeEventListener("focusin",this.#r),this.div.removeEventListener("focusout",this.#a),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#o&&(clearTimeout(this.#o),this.#o=null),this.#x(),this.removeEditToolbar()}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#g(),this.#i.classList.remove("hidden"),(0,s.bindEvents)(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(p){if(!this.isResizable||p.target!==this.div||p.key!=="Enter")return;this._uiManager.setSelected(this),this.#n={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const g=this.#i.children;if(!this.#t){this.#t=Array.from(g);const i=this.#O.bind(this),f=this.#w.bind(this);for(const w of this.#t){const P=w.getAttribute("data-resizer-name");w.setAttribute("role","spinbutton"),w.addEventListener("keydown",i),w.addEventListener("blur",f),w.addEventListener("focus",this.#D.bind(this,P)),E._l10nPromise.get(`pdfjs-editor-resizer-label-${P}`).then(T=>w.setAttribute("aria-label",T))}}const A=this.#t[0];let h=0;for(const i of g){if(i===A)break;h++}const S=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(S!==h){if(S<h)for(let f=0;f<h-S;f++)this.#i.append(this.#i.firstChild);else if(S>h)for(let f=0;f<S-h;f++)this.#i.firstChild.before(this.#i.lastChild);let i=0;for(const f of g){const P=this.#t[i++].getAttribute("data-resizer-name");E._l10nPromise.get(`pdfjs-editor-resizer-label-${P}`).then(T=>f.setAttribute("aria-label",T))}}this.#E(0),this.#d=!0,this.#i.firstChild.focus({focusVisible:!0}),p.preventDefault(),p.stopImmediatePropagation()}#O(p){E._resizerKeyboardManager.exec(this,p)}#w(p){this.#d&&p.relatedTarget?.parentNode!==this.#i&&this.#x()}#D(p){this.#c=this.#d?p:""}#E(p){if(this.#t)for(const g of this.#t)g.tabIndex=p}_resizeWithKeyboard(p,g){this.#d&&this.#L(this.#c,{movementX:p,movementY:g})}#x(){if(this.#d=!1,this.#E(-1),this.#n){const{savedX:p,savedY:g,savedWidth:A,savedHeight:h}=this.#n;this.#M(p,g,A,h),this.#n=null}}_stopResizingWithKeyboard(){this.#x(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this.#l){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this.#l?.show()});return}this.#l?.show()}unselect(){this.#i?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus(),this.#l?.hide()}updateParams(p,g){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(p){this.#f=p,this.parent&&(p?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(p,g){this.#s=!0;const A=p/g,{style:h}=this.div;h.aspectRatio=A,h.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}}class C extends E{constructor(p){super(p),this.annotationElementId=p.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),405:((t,e,n)=>{n.d(e,{Outliner:()=>s});class s{#t;#e=[];#s=[];constructor(l,y=0,v=0,E=!0){let C=1/0,m=-1/0,p=1/0,g=-1/0;const A=10**-4;for(const{x:T,y:N,width:O,height:B}of l){const z=Math.floor((T-y)/A)*A,j=Math.ceil((T+O+y)/A)*A,X=Math.floor((N-y)/A)*A,Y=Math.ceil((N+B+y)/A)*A,Z=[z,X,Y,!0],nt=[j,X,Y,!1];this.#e.push(Z,nt),C=Math.min(C,z),m=Math.max(m,j),p=Math.min(p,X),g=Math.max(g,Y)}const h=m-C+2*v,S=g-p+2*v,i=C-v,f=p-v,w=this.#e.at(E?-1:-2),P=[w[0],w[2]];for(const T of this.#e){const[N,O,B]=T;T[0]=(N-i)/h,T[1]=(O-f)/S,T[2]=(B-f)/S}this.#t={x:i,y:f,width:h,height:S,lastPoint:P}}getOutlines(){this.#e.sort((y,v)=>y[0]-v[0]||y[1]-v[1]||y[2]-v[2]);const l=[];for(const y of this.#e)y[3]?(l.push(...this.#l(y)),this.#r(y)):(this.#a(y),l.push(...this.#l(y)));return this.#i(l)}#i(l){const y=[],v=new Set;for(const m of l){const[p,g,A]=m;y.push([p,g,m],[p,A,m])}y.sort((m,p)=>m[1]-p[1]||m[0]-p[0]);for(let m=0,p=y.length;m<p;m+=2){const g=y[m][2],A=y[m+1][2];g.push(A),A.push(g),v.add(g),v.add(A)}const E=[];let C;for(;v.size>0;){const m=v.values().next().value;let[p,g,A,h,S]=m;v.delete(m);let i=p,f=g;for(C=[p,A],E.push(C);;){let w;if(v.has(h))w=h;else if(v.has(S))w=S;else break;v.delete(w),[p,g,A,h,S]=w,i!==p&&(C.push(i,f,p,f===g?g:A),i=p),f=f===g?A:g}C.push(i,f)}return{outlines:E,box:this.#t}}#n(l){const y=this.#s;let v=0,E=y.length-1;for(;v<=E;){const C=v+E>>1,m=y[C][0];if(m===l)return C;m<l?v=C+1:E=C-1}return E+1}#r([,l,y]){const v=this.#n(l);this.#s.splice(v,0,[l,y])}#a([,l,y]){const v=this.#n(l);for(let E=v;E<this.#s.length;E++){const[C,m]=this.#s[E];if(C!==l)break;if(C===l&&m===y){this.#s.splice(E,1);return}}for(let E=v-1;E>=0;E--){const[C,m]=this.#s[E];if(C!==l)break;if(C===l&&m===y){this.#s.splice(E,1);return}}}#l(l){const[y,v,E]=l,C=[[y,v,E]],m=this.#n(E);for(let p=0;p<m;p++){const[g,A]=this.#s[p];for(let h=0,S=C.length;h<S;h++){const[,i,f]=C[h];if(!(A<=i||f<=g)){if(i>=g){if(f>A)C[h][1]=A;else{if(S===1)return[];C.splice(h,1),h--,S--}continue}C[h][2]=g,f>A&&C.push([y,A,f])}}}return C}}}),812:((t,e,n)=>{n.d(e,{AnnotationEditorUIManager:()=>g,ColorManager:()=>p,KeyboardManager:()=>m,bindEvents:()=>l,opacityToHex:()=>y});var s=n(266),u=n(473);function l(A,h,S){for(const i of S)h.addEventListener(i,A[i].bind(A))}function y(A){return Math.round(Math.min(255,Math.max(1,255*A))).toString(16).padStart(2,"0")}class v{#t=0;getId(){return`${s.AnnotationEditorPrefix}${this.#t++}`}}class E{#t=(0,s.getUuid)();#e=0;#s=null;static get _isSVGFittingCanvas(){const h='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d"),f=new Image;f.src=h;const w=f.decode().then(()=>(i.drawImage(f,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,s.shadow)(this,"_isSVGFittingCanvas",w)}async#i(h,S){this.#s||=new Map;let i=this.#s.get(h);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let f;if(typeof S=="string"?(i.url=S,f=await(0,u.fetchData)(S,"blob")):f=i.file=S,f.type==="image/svg+xml"){const w=E._isSVGFittingCanvas,P=new FileReader,T=new Image,N=new Promise((O,B)=>{T.onload=()=>{i.bitmap=T,i.isSvg=!0,O()},P.onload=async()=>{const z=i.svgUrl=P.result;T.src=await w?`${z}#svgView(preserveAspectRatio(none))`:z},T.onerror=P.onerror=B});P.readAsDataURL(f),await N}else i.bitmap=await createImageBitmap(f);i.refCounter=1}catch(f){console.error(f),i=null}return this.#s.set(h,i),i&&this.#s.set(i.id,i),i}async getFromFile(h){const{lastModified:S,name:i,size:f,type:w}=h;return this.#i(`${S}_${i}_${f}_${w}`,h)}async getFromUrl(h){return this.#i(h,h)}async getFromId(h){this.#s||=new Map;const S=this.#s.get(h);return S?S.bitmap?(S.refCounter+=1,S):S.file?this.getFromFile(S.file):this.getFromUrl(S.url):null}getSvgUrl(h){const S=this.#s.get(h);return S?.isSvg?S.svgUrl:null}deleteId(h){this.#s||=new Map;const S=this.#s.get(h);S&&(S.refCounter-=1,S.refCounter===0&&(S.bitmap=null))}isValidId(h){return h.startsWith(`image_${this.#t}_`)}}class C{#t=[];#e=!1;#s;#i=-1;constructor(h=128){this.#s=h}add({cmd:h,undo:S,mustExec:i,type:f=NaN,overwriteIfSameType:w=!1,keepUndo:P=!1}){if(i&&h(),this.#e)return;const T={cmd:h,undo:S,type:f};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(T);return}if(w&&this.#t[this.#i].type===f){P&&(T.undo=this.#t[this.#i].undo),this.#t[this.#i]=T;return}const N=this.#i+1;N===this.#s?this.#t.splice(0,1):(this.#i=N,N<this.#t.length&&this.#t.splice(N)),this.#t.push(T)}undo(){this.#i!==-1&&(this.#e=!0,this.#t[this.#i].undo(),this.#e=!1,this.#i-=1)}redo(){this.#i<this.#t.length-1&&(this.#i+=1,this.#e=!0,this.#t[this.#i].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}destroy(){this.#t=null}}class m{constructor(h){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:S}=s.FeatureTest.platform;for(const[i,f,w={}]of h)for(const P of i){const T=P.startsWith("mac+");S&&T?(this.callbacks.set(P.slice(4),{callback:f,options:w}),this.allKeys.add(P.split("+").at(-1))):!S&&!T&&(this.callbacks.set(P,{callback:f,options:w}),this.allKeys.add(P.split("+").at(-1)))}}#t(h){h.altKey&&this.buffer.push("alt"),h.ctrlKey&&this.buffer.push("ctrl"),h.metaKey&&this.buffer.push("meta"),h.shiftKey&&this.buffer.push("shift"),this.buffer.push(h.key);const S=this.buffer.join("+");return this.buffer.length=0,S}exec(h,S){if(!this.allKeys.has(S.key))return;const i=this.callbacks.get(this.#t(S));if(!i)return;const{callback:f,options:{bubbles:w=!1,args:P=[],checker:T=null}}=i;T&&!T(h,S)||(f.bind(h,...P,S)(),w||(S.stopPropagation(),S.preventDefault()))}}class p{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const h=new Map([["CanvasText",null],["Canvas",null]]);return(0,u.getColorValues)(h),(0,s.shadow)(this,"_colors",h)}convert(h){const S=(0,u.getRGB)(h);if(!window.matchMedia("(forced-colors: active)").matches)return S;for(const[i,f]of this._colors)if(f.every((w,P)=>w===S[P]))return p._colorsMapping.get(i);return S}getHexCode(h){const S=this._colors.get(h);return S?s.Util.makeHexColor(...S):h}}class g{#t=null;#e=new Map;#s=new Map;#i=null;#n=null;#r=new C;#a=0;#l=new Set;#c=null;#h=null;#f=new Set;#u=null;#d=null;#o=null;#p=new v;#m=!1;#b=!1;#v=null;#A=null;#y=s.AnnotationEditorType.NONE;#g=new Set;#C=null;#M=this.blur.bind(this);#L=this.focus.bind(this);#I=this.copy.bind(this);#_=this.cut.bind(this);#O=this.paste.bind(this);#w=this.keydown.bind(this);#D=this.onEditingAction.bind(this);#E=this.onPageChanging.bind(this);#x=this.onScaleChanging.bind(this);#k=this.onRotationChanging.bind(this);#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#T=[0,0];#R=null;#F=null;#$=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const h=g.prototype,S=P=>P.#F.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&P.hasSomethingToControl(),i=(P,{target:T})=>{if(T instanceof HTMLInputElement){const{type:N}=T;return N!=="text"&&N!=="number"}return!0},f=this.TRANSLATE_SMALL,w=this.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new m([[["ctrl+a","mac+meta+a"],h.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],h.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],h.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],h.delete,{checker:i}],[["Enter","mac+Enter"],h.addNewEditorFromKeyboard,{checker:(P,{target:T})=>!(T instanceof HTMLButtonElement)&&P.#F.contains(T)&&!P.isEnterHandled}],[[" ","mac+ "],h.addNewEditorFromKeyboard,{checker:P=>P.#F.contains(document.activeElement)}],[["Escape","mac+Escape"],h.unselectAll],[["ArrowLeft","mac+ArrowLeft"],h.translateSelectedEditors,{args:[-f,0],checker:S}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],h.translateSelectedEditors,{args:[-w,0],checker:S}],[["ArrowRight","mac+ArrowRight"],h.translateSelectedEditors,{args:[f,0],checker:S}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],h.translateSelectedEditors,{args:[w,0],checker:S}],[["ArrowUp","mac+ArrowUp"],h.translateSelectedEditors,{args:[0,-f],checker:S}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],h.translateSelectedEditors,{args:[0,-w],checker:S}],[["ArrowDown","mac+ArrowDown"],h.translateSelectedEditors,{args:[0,f],checker:S}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],h.translateSelectedEditors,{args:[0,w],checker:S}]]))}constructor(h,S,i,f,w,P,T){this.#F=h,this.#$=S,this.#i=i,this._eventBus=f,this._eventBus._on("editingaction",this.#D),this._eventBus._on("pagechanging",this.#E),this._eventBus._on("scalechanging",this.#x),this._eventBus._on("rotationchanging",this.#k),this.#n=w.annotationStorage,this.#u=w.filterFactory,this.#C=P,this.#o=T||null,this.viewParameters={realScale:u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#P(),this.#B(),this._eventBus._off("editingaction",this.#D),this._eventBus._off("pagechanging",this.#E),this._eventBus._off("scalechanging",this.#x),this._eventBus._off("rotationchanging",this.#k);for(const h of this.#s.values())h.destroy();this.#s.clear(),this.#e.clear(),this.#f.clear(),this.#t=null,this.#g.clear(),this.#r.destroy(),this.#i?.destroy(),this.#d&&(clearTimeout(this.#d),this.#d=null),this.#R&&(clearTimeout(this.#R),this.#R=null)}get hcmFilter(){return(0,s.shadow)(this,"hcmFilter",this.#C?this.#u.addHCMFilter(this.#C.foreground,this.#C.background):"none")}get direction(){return(0,s.shadow)(this,"direction",getComputedStyle(this.#F).direction)}get highlightColors(){return(0,s.shadow)(this,"highlightColors",this.#o?new Map(this.#o.split(",").map(h=>h.split("=").map(S=>S.trim()))):null)}setMainHighlightColorPicker(h){this.#A=h}editAltText(h){this.#i?.editAltText(this,h)}onPageChanging({pageNumber:h}){this.#a=h-1}focusMainContainer(){this.#F.focus()}findParent(h,S){for(const i of this.#s.values()){const{x:f,y:w,width:P,height:T}=i.div.getBoundingClientRect();if(h>=f&&h<=f+P&&S>=w&&S<=w+T)return i}return null}disableUserSelect(h=!1){this.#$.classList.toggle("noUserSelect",h)}addShouldRescale(h){this.#f.add(h)}removeShouldRescale(h){this.#f.delete(h)}onScaleChanging({scale:h}){this.commitOrRemove(),this.viewParameters.realScale=h*u.PixelsPerInch.PDF_TO_CSS_UNITS;for(const S of this.#f)S.onScaleChanging()}onRotationChanging({pagesRotation:h}){this.commitOrRemove(),this.viewParameters.rotation=h}addToAnnotationStorage(h){!h.isEmpty()&&this.#n&&!this.#n.has(h.id)&&this.#n.setValue(h.id,h)}#U(){window.addEventListener("focus",this.#L),window.addEventListener("blur",this.#M)}#B(){window.removeEventListener("focus",this.#L),window.removeEventListener("blur",this.#M)}blur(){if(!this.hasSelection)return;const{activeElement:h}=document;for(const S of this.#g)if(S.div.contains(h)){this.#v=[S,h],S._focusEventsAllowed=!1;break}}focus(){if(!this.#v)return;const[h,S]=this.#v;this.#v=null,S.addEventListener("focusin",()=>{h._focusEventsAllowed=!0},{once:!0}),S.focus()}#N(){window.addEventListener("keydown",this.#w)}#P(){window.removeEventListener("keydown",this.#w)}#j(){document.addEventListener("copy",this.#I),document.addEventListener("cut",this.#_),document.addEventListener("paste",this.#O)}#G(){document.removeEventListener("copy",this.#I),document.removeEventListener("cut",this.#_),document.removeEventListener("paste",this.#O)}addEditListeners(){this.#N(),this.#j()}removeEditListeners(){this.#P(),this.#G()}copy(h){if(h.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const S=[];for(const i of this.#g){const f=i.serialize(!0);f&&S.push(f)}S.length!==0&&h.clipboardData.setData("application/pdfjs",JSON.stringify(S))}cut(h){this.copy(h),this.delete()}paste(h){h.preventDefault();const{clipboardData:S}=h;for(const w of S.items)for(const P of this.#h)if(P.isHandlingMimeForPasting(w.type)){P.paste(w,this.currentLayer);return}let i=S.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(w){(0,s.warn)(`paste: "${w.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const f=this.currentLayer;try{const w=[];for(const N of i){const O=f.deserialize(N);if(!O)return;w.push(O)}const P=()=>{for(const N of w)this.#X(N);this.#W(w)},T=()=>{for(const N of w)N.remove()};this.addCommands({cmd:P,undo:T,mustExec:!0})}catch(w){(0,s.warn)(`paste: "${w.message}".`)}}keydown(h){this.isEditorHandlingKeyboard||g._keyboardManager.exec(this,h)}onEditingAction(h){["undo","redo","delete","selectAll"].includes(h.name)&&this[h.name]()}#S(h){Object.entries(h).some(([i,f])=>this.#H[i]!==f)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,h)})}#V(h){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:h})}setEditingState(h){h?(this.#U(),this.#N(),this.#j(),this.#S({isEditing:this.#y!==s.AnnotationEditorType.NONE,isEmpty:this.#z(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#B(),this.#P(),this.#G(),this.#S({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(h){if(!this.#h){this.#h=h;for(const S of this.#h)this.#V(S.defaultPropertiesToUpdate)}}getId(){return this.#p.getId()}get currentLayer(){return this.#s.get(this.#a)}getLayer(h){return this.#s.get(h)}get currentPageIndex(){return this.#a}addLayer(h){this.#s.set(h.pageIndex,h),this.#m?h.enable():h.disable()}removeLayer(h){this.#s.delete(h.pageIndex)}updateMode(h,S=null,i=!1){if(this.#y!==h){if(this.#y=h,h===s.AnnotationEditorType.NONE){this.setEditingState(!1),this.#q();return}this.setEditingState(!0),this.#Y(),this.unselectAll();for(const f of this.#s.values())f.updateMode(h);if(!S&&i){this.addNewEditorFromKeyboard();return}if(S){for(const f of this.#e.values())if(f.annotationElementId===S){this.setSelected(f),f.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(h){h!==this.#y&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:h})}updateParams(h,S){if(this.#h){switch(h){case s.AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:this.#A?.updateColor(S);break}for(const i of this.#g)i.updateParams(h,S);for(const i of this.#h)i.updateDefaultParams(h,S)}}enableWaiting(h=!1){if(this.#b!==h){this.#b=h;for(const S of this.#s.values())h?S.disableClick():S.enableClick(),S.div.classList.toggle("waiting",h)}}#Y(){if(!this.#m){this.#m=!0;for(const h of this.#s.values())h.enable()}}#q(){if(this.unselectAll(),this.#m){this.#m=!1;for(const h of this.#s.values())h.disable()}}getEditors(h){const S=[];for(const i of this.#e.values())i.pageIndex===h&&S.push(i);return S}getEditor(h){return this.#e.get(h)}addEditor(h){this.#e.set(h.id,h)}removeEditor(h){h.div.contains(document.activeElement)&&(this.#d&&clearTimeout(this.#d),this.#d=setTimeout(()=>{this.focusMainContainer(),this.#d=null},0)),this.#e.delete(h.id),this.unselect(h),(!h.annotationElementId||!this.#l.has(h.annotationElementId))&&this.#n?.remove(h.id)}addDeletedAnnotationElement(h){this.#l.add(h.annotationElementId),h.deleted=!0}isDeletedAnnotationElement(h){return this.#l.has(h)}removeDeletedAnnotationElement(h){this.#l.delete(h.annotationElementId),h.deleted=!1}#X(h){const S=this.#s.get(h.pageIndex);S?S.addOrRebuild(h):this.addEditor(h)}setActiveEditor(h){this.#t!==h&&(this.#t=h,h&&this.#V(h.propertiesToUpdate))}toggleSelected(h){if(this.#g.has(h)){this.#g.delete(h),h.unselect(),this.#S({hasSelectedEditor:this.hasSelection});return}this.#g.add(h),h.select(),this.#V(h.propertiesToUpdate),this.#S({hasSelectedEditor:!0})}setSelected(h){for(const S of this.#g)S!==h&&S.unselect();this.#g.clear(),this.#g.add(h),h.select(),this.#V(h.propertiesToUpdate),this.#S({hasSelectedEditor:!0})}isSelected(h){return this.#g.has(h)}get firstSelectedEditor(){return this.#g.values().next().value}unselect(h){h.unselect(),this.#g.delete(h),this.#S({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#g.size!==0}get isEnterHandled(){return this.#g.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#r.undo(),this.#S({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#z()})}redo(){this.#r.redo(),this.#S({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#z()})}addCommands(h){this.#r.add(h),this.#S({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#z()})}#z(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const h of this.#e.values())return h.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const h=[...this.#g],S=()=>{for(const f of h)f.remove()},i=()=>{for(const f of h)this.#X(f)};this.addCommands({cmd:S,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#W(h){this.#g.clear();for(const S of h)S.isEmpty()||(this.#g.add(S),S.select());this.#S({hasSelectedEditor:!0})}selectAll(){for(const h of this.#g)h.commit();this.#W(this.#e.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#y!==s.AnnotationEditorType.NONE))&&this.hasSelection){for(const h of this.#g)h.unselect();this.#g.clear(),this.#S({hasSelectedEditor:!1})}}translateSelectedEditors(h,S,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#T[0]+=h,this.#T[1]+=S;const[f,w]=this.#T,P=[...this.#g],T=1e3;this.#R&&clearTimeout(this.#R),this.#R=setTimeout(()=>{this.#R=null,this.#T[0]=this.#T[1]=0,this.addCommands({cmd:()=>{for(const N of P)this.#e.has(N.id)&&N.translateInPage(f,w)},undo:()=>{for(const N of P)this.#e.has(N.id)&&N.translateInPage(-f,-w)},mustExec:!1})},T);for(const N of P)N.translateInPage(h,S)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const h of this.#g)this.#c.set(h,{savedX:h.x,savedY:h.y,savedPageIndex:h.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const h=this.#c;this.#c=null;let S=!1;for(const[{x:f,y:w,pageIndex:P},T]of h)T.newX=f,T.newY=w,T.newPageIndex=P,S||=f!==T.savedX||w!==T.savedY||P!==T.savedPageIndex;if(!S)return!1;const i=(f,w,P,T)=>{if(this.#e.has(f.id)){const N=this.#s.get(T);N?f._setParentAndPosition(N,w,P):(f.pageIndex=T,f.x=w,f.y=P)}};return this.addCommands({cmd:()=>{for(const[f,{newX:w,newY:P,newPageIndex:T}]of h)i(f,w,P,T)},undo:()=>{for(const[f,{savedX:w,savedY:P,savedPageIndex:T}]of h)i(f,w,P,T)},mustExec:!0}),!0}dragSelectedEditors(h,S){if(this.#c)for(const i of this.#c.keys())i.drag(h,S)}rebuild(h){if(h.parent===null){const S=this.getLayer(h.pageIndex);S?(S.changeParent(h),S.addOrRebuild(h)):(this.addEditor(h),this.addToAnnotationStorage(h),h.rebuild())}else h.parent.addOrRebuild(h)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#g.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(h){return this.#t===h}getActive(){return this.#t}getMode(){return this.#y}get imageManager(){return(0,s.shadow)(this,"imageManager",new E)}}}),171:((t,e,n)=>{n.d(e,{PDFFetchStream:()=>E});var s=n(266),u=n(253);function l(p,g,A){return{method:"GET",headers:p,signal:A.signal,mode:"cors",credentials:g?"include":"same-origin",redirect:"follow"}}function y(p){const g=new Headers;for(const A in p){const h=p[A];h!==void 0&&g.append(A,h)}return g}function v(p){return p instanceof Uint8Array?p.buffer:p instanceof ArrayBuffer?p:((0,s.warn)(`getArrayBuffer - unexpected data format: ${p}`),new Uint8Array(p).buffer)}class E{constructor(g){this.source=g,this.isHttp=/^https?:/i.test(g.url),this.httpHeaders=this.isHttp&&g.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new C(this),this._fullRequestReader}getRangeReader(g,A){if(A<=this._progressiveDataLength)return null;const h=new m(this,g,A);return this._rangeRequestReaders.push(h),h}cancelAllRequests(g){this._fullRequestReader?.cancel(g);for(const A of this._rangeRequestReaders.slice(0))A.cancel(g)}}class C{constructor(g){this._stream=g,this._reader=null,this._loaded=0,this._filename=null;const A=g.source;this._withCredentials=A.withCredentials||!1,this._contentLength=A.length,this._headersCapability=new s.PromiseCapability,this._disableRange=A.disableRange||!1,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._headers=y(this._stream.httpHeaders);const h=A.url;fetch(h,l(this._headers,this._withCredentials,this._abortController)).then(S=>{if(!(0,u.validateResponseStatus)(S.status))throw(0,u.createResponseStatusError)(S.status,h);this._reader=S.body.getReader(),this._headersCapability.resolve();const i=P=>S.headers.get(P),{allowRangeRequests:f,suggestedLength:w}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=f,this._contentLength=w||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:g,done:A}=await this._reader.read();return A?{value:g,done:A}:(this._loaded+=g.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:v(g),done:!1})}cancel(g){this._reader?.cancel(g),this._abortController.abort()}}class m{constructor(g,A,h){this._stream=g,this._reader=null,this._loaded=0;const S=g.source;this._withCredentials=S.withCredentials||!1,this._readCapability=new s.PromiseCapability,this._isStreamingSupported=!S.disableStream,this._abortController=new AbortController,this._headers=y(this._stream.httpHeaders),this._headers.append("Range",`bytes=${A}-${h-1}`);const i=S.url;fetch(i,l(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,u.validateResponseStatus)(f.status))throw(0,u.createResponseStatusError)(f.status,i);this._readCapability.resolve(),this._reader=f.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:g,done:A}=await this._reader.read();return A?{value:g,done:A}:(this._loaded+=g.byteLength,this.onProgress?.({loaded:this._loaded}),{value:v(g),done:!1})}cancel(g){this._reader?.cancel(g),this._abortController.abort()}}}),742:((t,e,n)=>{n.d(e,{FontFaceObject:()=>l,FontLoader:()=>u});var s=n(266);class u{#t=new Set;constructor({ownerDocument:v=globalThis.document,styleElement:E=null}){this._document=v,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(v){this.nativeFontFaces.add(v),this._document.fonts.add(v)}removeNativeFontFace(v){this.nativeFontFaces.delete(v),this._document.fonts.delete(v)}insertRule(v){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const E=this.styleElement.sheet;E.insertRule(v,E.cssRules.length)}clear(){for(const v of this.nativeFontFaces)this._document.fonts.delete(v);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:v,_inspectFont:E}){if(!(!v||this.#t.has(v.loadedName))){if((0,s.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:C,src:m,style:p}=v,g=new FontFace(C,m,p);this.addNativeFontFace(g);try{await g.load(),this.#t.add(C),E?.(v)}catch{(0,s.warn)(`Cannot load system font: ${v.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(g)}return}(0,s.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(v){if(v.attached||v.missingFile&&!v.systemFontInfo)return;if(v.attached=!0,v.systemFontInfo){await this.loadSystemFont(v);return}if(this.isFontLoadingAPISupported){const C=v.createNativeFontFace();if(C){this.addNativeFontFace(C);try{await C.loaded}catch(m){throw(0,s.warn)(`Failed to load font '${C.family}': '${m}'.`),v.disableFontFace=!0,m}}return}const E=v.createFontFaceRule();if(E){if(this.insertRule(E),this.isSyncFontLoadingSupported)return;await new Promise(C=>{const m=this._queueLoadingCallback(C);this._prepareFontLoadEvent(v,m)})}}get isFontLoadingAPISupported(){const v=!!this._document?.fonts;return(0,s.shadow)(this,"isFontLoadingAPISupported",v)}get isSyncFontLoadingSupported(){let v=!1;return(s.isNodeJS||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(v=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",v)}_queueLoadingCallback(v){function E(){for((0,s.assert)(!m.done,"completeRequest() cannot be called twice."),m.done=!0;C.length>0&&C[0].done;){const p=C.shift();setTimeout(p.callback,0)}}const{loadingRequests:C}=this,m={done:!1,complete:E,callback:v};return C.push(m),m}get _loadTestFont(){const v=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",v)}_prepareFontLoadEvent(v,E){function C(X,Y){return X.charCodeAt(Y)<<24|X.charCodeAt(Y+1)<<16|X.charCodeAt(Y+2)<<8|X.charCodeAt(Y+3)&255}function m(X,Y,Z,nt){const q=X.substring(0,Y),V=X.substring(Y+Z);return q+nt+V}let p,g;const A=this._document.createElement("canvas");A.width=1,A.height=1;const h=A.getContext("2d");let S=0;function i(X,Y){if(++S>30){(0,s.warn)("Load test font never loaded."),Y();return}if(h.font="30px "+X,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){Y();return}setTimeout(i.bind(null,X,Y))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=m(w,976,f.length,f);const T=16,N=1482184792;let O=C(w,T);for(p=0,g=f.length-3;p<g;p+=4)O=O-N+C(f,p)|0;p<f.length&&(O=O-N+C(f+"XXX",p)|0),w=m(w,T,4,(0,s.string32)(O));const B=`url(data:font/opentype;base64,${btoa(w)});`,z=`@font-face {font-family:"${f}";src:${B}}`;this.insertRule(z);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const X of[v.loadedName,f]){const Y=this._document.createElement("span");Y.textContent="Hi",Y.style.fontFamily=X,j.append(Y)}this._document.body.append(j),i(f,()=>{j.remove(),E.complete()})}}class l{constructor(v,{isEvalSupported:E=!0,disableFontFace:C=!1,ignoreErrors:m=!1,inspectFont:p=null}){this.compiledGlyphs=Object.create(null);for(const g in v)this[g]=v[g];this.isEvalSupported=E!==!1,this.disableFontFace=C===!0,this.ignoreErrors=m===!0,this._inspectFont=p}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let v;if(!this.cssFontInfo)v=new FontFace(this.loadedName,this.data,{});else{const E={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(E.style=`oblique ${this.cssFontInfo.italicAngle}deg`),v=new FontFace(this.cssFontInfo.fontFamily,this.data,E)}return this._inspectFont?.(this),v}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const v=(0,s.bytesToString)(this.data),E=`url(data:${this.mimetype};base64,${btoa(v)});`;let C;if(!this.cssFontInfo)C=`@font-face {font-family:"${this.loadedName}";src:${E}}`;else{let m=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(m+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),C=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${m}src:${E}}`}return this._inspectFont?.(this,E),C}getPathGenerator(v,E){if(this.compiledGlyphs[E]!==void 0)return this.compiledGlyphs[E];let C;try{C=v.get(this.loadedName+"_path_"+E)}catch(m){if(!this.ignoreErrors)throw m;return(0,s.warn)(`getPathGenerator - ignoring character: "${m}".`),this.compiledGlyphs[E]=function(p,g){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){const m=[];for(const p of C){const g=p.args!==void 0?p.args.join(","):"";m.push("c.",p.cmd,"(",g,`);
`)}return this.compiledGlyphs[E]=new Function("c","size",m.join(""))}return this.compiledGlyphs[E]=function(m,p){for(const g of C)g.cmd==="scale"&&(g.args=[p,-p]),m[g.cmd].apply(m,g.args)}}}}),472:((t,e,n)=>{n.d(e,{Metadata:()=>u});var s=n(266);class u{#t;#e;constructor({parsedData:y,rawData:v}){this.#t=y,this.#e=v}getRaw(){return this.#e}get(y){return this.#t.get(y)??null}getAll(){return(0,s.objectFromMap)(this.#t)}has(y){return this.#t.has(y)}}}),474:((t,e,n)=>{n.d(e,{PDFNetworkStream:()=>C});var s=n(266),u=n(253);const l=200,y=206;function v(g){const A=g.response;return typeof A!="string"?A:(0,s.stringToBytes)(A).buffer}class E{constructor(A,h={}){this.url=A,this.isHttp=/^https?:/i.test(A),this.httpHeaders=this.isHttp&&h.httpHeaders||Object.create(null),this.withCredentials=h.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(A,h,S){const i={begin:A,end:h};for(const f in S)i[f]=S[f];return this.request(i)}requestFull(A){return this.request(A)}request(A){const h=new XMLHttpRequest,S=this.currXhrId++,i=this.pendingRequests[S]={xhr:h};h.open("GET",this.url),h.withCredentials=this.withCredentials;for(const f in this.httpHeaders){const w=this.httpHeaders[f];w!==void 0&&h.setRequestHeader(f,w)}return this.isHttp&&"begin"in A&&"end"in A?(h.setRequestHeader("Range",`bytes=${A.begin}-${A.end-1}`),i.expectedStatus=y):i.expectedStatus=l,h.responseType="arraybuffer",A.onError&&(h.onerror=function(f){A.onError(h.status)}),h.onreadystatechange=this.onStateChange.bind(this,S),h.onprogress=this.onProgress.bind(this,S),i.onHeadersReceived=A.onHeadersReceived,i.onDone=A.onDone,i.onError=A.onError,i.onProgress=A.onProgress,h.send(null),S}onProgress(A,h){const S=this.pendingRequests[A];S&&S.onProgress?.(h)}onStateChange(A,h){const S=this.pendingRequests[A];if(!S)return;const i=S.xhr;if(i.readyState>=2&&S.onHeadersReceived&&(S.onHeadersReceived(),delete S.onHeadersReceived),i.readyState!==4||!(A in this.pendingRequests))return;if(delete this.pendingRequests[A],i.status===0&&this.isHttp){S.onError?.(i.status);return}const f=i.status||l;if(!(f===l&&S.expectedStatus===y)&&f!==S.expectedStatus){S.onError?.(i.status);return}const P=v(i);if(f===y){const T=i.getResponseHeader("Content-Range"),N=/bytes (\d+)-(\d+)\/(\d+)/.exec(T);S.onDone({begin:parseInt(N[1],10),chunk:P})}else P?S.onDone({begin:0,chunk:P}):S.onError?.(i.status)}getRequestXhr(A){return this.pendingRequests[A].xhr}isPendingRequest(A){return A in this.pendingRequests}abortRequest(A){const h=this.pendingRequests[A].xhr;delete this.pendingRequests[A],h.abort()}}class C{constructor(A){this._source=A,this._manager=new E(A.url,{httpHeaders:A.httpHeaders,withCredentials:A.withCredentials}),this._rangeChunkSize=A.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(A){const h=this._rangeRequestReaders.indexOf(A);h>=0&&this._rangeRequestReaders.splice(h,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new m(this._manager,this._source),this._fullRequestReader}getRangeReader(A,h){const S=new p(this._manager,A,h);return S.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(S),S}cancelAllRequests(A){this._fullRequestReader?.cancel(A);for(const h of this._rangeRequestReaders.slice(0))h.cancel(A)}}class m{constructor(A,h){this._manager=A;const S={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=h.url,this._fullRequestId=A.requestFull(S),this._headersReceivedCapability=new s.PromiseCapability,this._disableRange=h.disableRange||!1,this._contentLength=h.length,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const A=this._fullRequestId,h=this._manager.getRequestXhr(A),S=w=>h.getResponseHeader(w),{allowRangeRequests:i,suggestedLength:f}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=f||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(S),this._isRangeSupported&&this._manager.abortRequest(A),this._headersReceivedCapability.resolve()}_onDone(A){if(A&&(this._requests.length>0?this._requests.shift().resolve({value:A.chunk,done:!1}):this._cachedChunks.push(A.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(A){this._storedError=(0,u.createResponseStatusError)(A,this._url),this._headersReceivedCapability.reject(this._storedError);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(A){this.onProgress?.({loaded:A.loaded,total:A.lengthComputable?A.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const A=new s.PromiseCapability;return this._requests.push(A),A.promise}cancel(A){this._done=!0,this._headersReceivedCapability.reject(A);for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class p{constructor(A,h,S){this._manager=A;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=A.url,this._requestId=A.requestRange(h,S,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(A){const h=A.chunk;this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunk=h,this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(A){this._storedError=(0,u.createResponseStatusError)(A,this._url);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(A){this.isStreamingSupported||this.onProgress?.({loaded:A.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const h=this._queuedChunk;return this._queuedChunk=null,{value:h,done:!1}}if(this._done)return{value:void 0,done:!0};const A=new s.PromiseCapability;return this._requests.push(A),A.promise}cancel(A){this._done=!0;for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),253:((t,e,n)=>{n.d(e,{createResponseStatusError:()=>E,extractFilenameFromHeader:()=>v,validateRangeRequestCapabilities:()=>y,validateResponseStatus:()=>C});var s=n(266);function u(m){let p=!0,g=A("filename\\*","i").exec(m);if(g){g=g[1];let T=f(g);return T=unescape(T),T=w(T),T=P(T),S(T)}if(g=i(m),g){const T=P(g);return S(T)}if(g=A("filename","i").exec(m),g){g=g[1];let T=f(g);return T=P(T),S(T)}function A(T,N){return new RegExp("(?:^|;)\\s*"+T+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',N)}function h(T,N){if(T){if(!/^[\x00-\xFF]+$/.test(N))return N;try{const O=new TextDecoder(T,{fatal:!0}),B=(0,s.stringToBytes)(N);N=O.decode(B),p=!1}catch{}}return N}function S(T){return p&&/[\x80-\xff]/.test(T)&&(T=h("utf-8",T),p&&(T=h("iso-8859-1",T))),T}function i(T){const N=[];let O;const B=A("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(O=B.exec(T))!==null;){let[,j,X,Y]=O;if(j=parseInt(j,10),j in N){if(j===0)break;continue}N[j]=[X,Y]}const z=[];for(let j=0;j<N.length&&j in N;++j){let[X,Y]=N[j];Y=f(Y),X&&(Y=unescape(Y),j===0&&(Y=w(Y))),z.push(Y)}return z.join("")}function f(T){if(T.startsWith('"')){const N=T.slice(1).split('\\"');for(let O=0;O<N.length;++O){const B=N[O].indexOf('"');B!==-1&&(N[O]=N[O].slice(0,B),N.length=O+1),N[O]=N[O].replaceAll(/\\(.)/g,"$1")}T=N.join('"')}return T}function w(T){const N=T.indexOf("'");if(N===-1)return T;const O=T.slice(0,N),z=T.slice(N+1).replace(/^[^']*'/,"");return h(O,z)}function P(T){return!T.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(T)?T:T.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(N,O,B,z){if(B==="q"||B==="Q")return z=z.replaceAll("_"," "),z=z.replaceAll(/=([0-9a-fA-F]{2})/g,function(j,X){return String.fromCharCode(parseInt(X,16))}),h(O,z);try{z=atob(z)}catch{}return h(O,z)})}return""}var l=n(473);function y({getResponseHeader:m,isHttp:p,rangeChunkSize:g,disableRange:A}){const h={allowRangeRequests:!1,suggestedLength:void 0},S=parseInt(m("Content-Length"),10);return!Number.isInteger(S)||(h.suggestedLength=S,S<=2*g)||A||!p||m("Accept-Ranges")!=="bytes"||(m("Content-Encoding")||"identity")!=="identity"||(h.allowRangeRequests=!0),h}function v(m){const p=m("Content-Disposition");if(p){let g=u(p);if(g.includes("%"))try{g=decodeURIComponent(g)}catch{}if((0,l.isPdfFile)(g))return g}return null}function E(m,p){return m===404||m===0&&p.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+p+'".'):new s.UnexpectedResponseException(`Unexpected server response (${m}) while retrieving PDF "${p}".`,m)}function C(m){return m===200||m===206}}),498:((t,e,n)=>{n.a(t,async(s,u)=>{try{let g=function(N){const O=m.parse(N);return O.protocol==="file:"||O.host?O:/^[a-z]:[/\\]/i.test(N)?m.parse(`file:///${N}`):(O.host||(O.protocol="file:"),O)},i=function(N,O){return{protocol:N.protocol,auth:N.auth,host:N.hostname,port:N.port,path:N.path,method:"GET",headers:O}};n.d(e,{PDFNodeStream:()=>A});var l=n(266),y=n(253);let v,E,C,m;l.isNodeJS&&(v=await Te(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),E=await Te(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),C=await Te(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),m=await Te(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url));const p=/^file:\/\/\/[a-zA-Z]:\//;class A{constructor(O){this.source=O,this.url=g(O.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&O.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,l.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new P(this):new f(this),this._fullRequestReader}getRangeReader(O,B){if(B<=this._progressiveDataLength)return null;const z=this.isFsUrl?new T(this,O,B):new w(this,O,B);return this._rangeRequestReaders.push(z),z}cancelAllRequests(O){this._fullRequestReader?.cancel(O);for(const B of this._rangeRequestReaders.slice(0))B.cancel(O)}}class h{constructor(O){this._url=O.url,this._done=!1,this._storedError=null,this.onProgress=null;const B=O.source;this._contentLength=B.length,this._loaded=0,this._filename=null,this._disableRange=B.disableRange||!1,this._rangeChunkSize=B.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!B.disableStream,this._isRangeSupported=!B.disableRange,this._readableStream=null,this._readCapability=new l.PromiseCapability,this._headersCapability=new l.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const O=this._readableStream.read();return O===null?(this._readCapability=new l.PromiseCapability,this.read()):(this._loaded+=O.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(O).buffer,done:!1})}cancel(O){if(!this._readableStream){this._error(O);return}this._readableStream.destroy(O)}_error(O){this._storedError=O,this._readCapability.resolve()}_setReadableStream(O){this._readableStream=O,O.on("readable",()=>{this._readCapability.resolve()}),O.on("end",()=>{O.destroy(),this._done=!0,this._readCapability.resolve()}),O.on("error",B=>{this._error(B)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new l.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class S{constructor(O){this._url=O.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new l.PromiseCapability;const B=O.source;this._isStreamingSupported=!B.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const O=this._readableStream.read();return O===null?(this._readCapability=new l.PromiseCapability,this.read()):(this._loaded+=O.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(O).buffer,done:!1})}cancel(O){if(!this._readableStream){this._error(O);return}this._readableStream.destroy(O)}_error(O){this._storedError=O,this._readCapability.resolve()}_setReadableStream(O){this._readableStream=O,O.on("readable",()=>{this._readCapability.resolve()}),O.on("end",()=>{O.destroy(),this._done=!0,this._readCapability.resolve()}),O.on("error",B=>{this._error(B)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class f extends h{constructor(O){super(O);const B=z=>{if(z.statusCode===404){const Z=new l.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Z,this._headersCapability.reject(Z);return}this._headersCapability.resolve(),this._setReadableStream(z);const j=Z=>this._readableStream.headers[Z.toLowerCase()],{allowRangeRequests:X,suggestedLength:Y}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:j,isHttp:O.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=X,this._contentLength=Y||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(j)};this._request=null,this._url.protocol==="http:"?this._request=E.request(i(this._url,O.httpHeaders),B):this._request=C.request(i(this._url,O.httpHeaders),B),this._request.on("error",z=>{this._storedError=z,this._headersCapability.reject(z)}),this._request.end()}}class w extends S{constructor(O,B,z){super(O),this._httpHeaders={};for(const X in O.httpHeaders){const Y=O.httpHeaders[X];Y!==void 0&&(this._httpHeaders[X]=Y)}this._httpHeaders.Range=`bytes=${B}-${z-1}`;const j=X=>{if(X.statusCode===404){const Y=new l.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Y;return}this._setReadableStream(X)};this._request=null,this._url.protocol==="http:"?this._request=E.request(i(this._url,this._httpHeaders),j):this._request=C.request(i(this._url,this._httpHeaders),j),this._request.on("error",X=>{this._storedError=X}),this._request.end()}}class P extends h{constructor(O){super(O);let B=decodeURIComponent(this._url.path);p.test(this._url.href)&&(B=B.replace(/^\//,"")),v.lstat(B,(z,j)=>{if(z){z.code==="ENOENT"&&(z=new l.MissingPDFException(`Missing PDF "${B}".`)),this._storedError=z,this._headersCapability.reject(z);return}this._contentLength=j.size,this._setReadableStream(v.createReadStream(B)),this._headersCapability.resolve()})}}class T extends S{constructor(O,B,z){super(O);let j=decodeURIComponent(this._url.path);p.test(this._url.href)&&(j=j.replace(/^\//,"")),this._setReadableStream(v.createReadStream(j,{start:B,end:z-1}))}}u()}catch(v){u(v)}},1)}),738:((t,e,n)=>{n.a(t,async(s,u)=>{try{n.d(e,{NodeCMapReaderFactory:()=>A,NodeCanvasFactory:()=>g,NodeFilterFactory:()=>p,NodeStandardFontDataFactory:()=>h});var l=n(822),y=n(266);let v,E,C;if(y.isNodeJS){v=await Te(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url);try{E=await Te(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url)}catch{}try{C=await Te(()=>import("./path2d-polyfill.esm-BlsVoZcq.js"),[],import.meta.url)}catch{}}const m=function(S){return new Promise((i,f)=>{v.readFile(S,(w,P)=>{if(w||!P){f(new Error(w));return}i(new Uint8Array(P))})})};class p extends l.BaseFilterFactory{}class g extends l.BaseCanvasFactory{_createCanvas(i,f){return E.createCanvas(i,f)}}class A extends l.BaseCMapReaderFactory{_fetchData(i,f){return m(i).then(w=>({cMapData:w,compressionType:f}))}}class h extends l.BaseStandardFontDataFactory{_fetchData(i){return m(i)}}u()}catch(v){u(v)}},1)}),890:((t,e,n)=>{n.d(e,{OptionalContentConfig:()=>v});var s=n(266),u=n(825);const l=Symbol("INTERNAL");class y{#t=!0;constructor(C,m){this.name=C,this.intent=m}get visible(){return this.#t}_setVisible(C,m){C!==l&&(0,s.unreachable)("Internal method `_setVisible` called."),this.#t=m}}class v{#t=null;#e=new Map;#s=null;#i=null;constructor(C){if(this.name=null,this.creator=null,C!==null){this.name=C.name,this.creator=C.creator,this.#i=C.order;for(const m of C.groups)this.#e.set(m.id,new y(m.name,m.intent));if(C.baseState==="OFF")for(const m of this.#e.values())m._setVisible(l,!1);for(const m of C.on)this.#e.get(m)._setVisible(l,!0);for(const m of C.off)this.#e.get(m)._setVisible(l,!1);this.#s=this.getHash()}}#n(C){const m=C.length;if(m<2)return!0;const p=C[0];for(let g=1;g<m;g++){const A=C[g];let h;if(Array.isArray(A))h=this.#n(A);else if(this.#e.has(A))h=this.#e.get(A).visible;else return(0,s.warn)(`Optional content group not found: ${A}`),!0;switch(p){case"And":if(!h)return!1;break;case"Or":if(h)return!0;break;case"Not":return!h;default:return!0}}return p==="And"}isVisible(C){if(this.#e.size===0)return!0;if(!C)return(0,s.warn)("Optional content group not defined."),!0;if(C.type==="OCG")return this.#e.has(C.id)?this.#e.get(C.id).visible:((0,s.warn)(`Optional content group not found: ${C.id}`),!0);if(C.type==="OCMD"){if(C.expression)return this.#n(C.expression);if(!C.policy||C.policy==="AnyOn"){for(const m of C.ids){if(!this.#e.has(m))return(0,s.warn)(`Optional content group not found: ${m}`),!0;if(this.#e.get(m).visible)return!0}return!1}else if(C.policy==="AllOn"){for(const m of C.ids){if(!this.#e.has(m))return(0,s.warn)(`Optional content group not found: ${m}`),!0;if(!this.#e.get(m).visible)return!1}return!0}else if(C.policy==="AnyOff"){for(const m of C.ids){if(!this.#e.has(m))return(0,s.warn)(`Optional content group not found: ${m}`),!0;if(!this.#e.get(m).visible)return!0}return!1}else if(C.policy==="AllOff"){for(const m of C.ids){if(!this.#e.has(m))return(0,s.warn)(`Optional content group not found: ${m}`),!0;if(this.#e.get(m).visible)return!1}return!0}return(0,s.warn)(`Unknown optional content policy ${C.policy}.`),!0}return(0,s.warn)(`Unknown group type ${C.type}.`),!0}setVisibility(C,m=!0){if(!this.#e.has(C)){(0,s.warn)(`Optional content group not found: ${C}`);return}this.#e.get(C)._setVisible(l,!!m),this.#t=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,s.objectFromMap)(this.#e):null}getGroup(C){return this.#e.get(C)||null}getHash(){if(this.#t!==null)return this.#t;const C=new u.MurmurHash3_64;for(const[m,p]of this.#e)C.update(`${m}:${p.visible}`);return this.#t=C.hexdigest()}}}),739:((t,e,n)=>{n.d(e,{renderTextLayer:()=>S,updateTextLayer:()=>i});var s=n(266),u=n(473);const l=1e5,y=30,v=.8,E=new Map;function C(f,w){let P;if(w&&s.FeatureTest.isOffscreenCanvasSupported)P=new OffscreenCanvas(f,f).getContext("2d",{alpha:!1});else{const T=document.createElement("canvas");T.width=T.height=f,P=T.getContext("2d",{alpha:!1})}return P}function m(f,w){const P=E.get(f);if(P)return P;const T=C(y,w);T.font=`${y}px ${f}`;const N=T.measureText("");let O=N.fontBoundingBoxAscent,B=Math.abs(N.fontBoundingBoxDescent);if(O){const j=O/(O+B);return E.set(f,j),T.canvas.width=T.canvas.height=0,j}T.strokeStyle="red",T.clearRect(0,0,y,y),T.strokeText("g",0,0);let z=T.getImageData(0,0,y,y).data;B=0;for(let j=z.length-1-3;j>=0;j-=4)if(z[j]>0){B=Math.ceil(j/4/y);break}T.clearRect(0,0,y,y),T.strokeText("A",0,y),z=T.getImageData(0,0,y,y).data,O=0;for(let j=0,X=z.length;j<X;j+=4)if(z[j]>0){O=y-Math.floor(j/4/y);break}if(T.canvas.width=T.canvas.height=0,O){const j=O/(O+B);return E.set(f,j),j}return E.set(f,v),v}function p(f,w,P){const T=document.createElement("span"),N={angle:0,canvasWidth:0,hasText:w.str!=="",hasEOL:w.hasEOL,fontSize:0};f._textDivs.push(T);const O=s.Util.transform(f._transform,w.transform);let B=Math.atan2(O[1],O[0]);const z=P[w.fontName];z.vertical&&(B+=Math.PI/2);const j=f._fontInspectorEnabled&&z.fontSubstitution||z.fontFamily,X=Math.hypot(O[2],O[3]),Y=X*m(j,f._isOffscreenCanvasSupported);let Z,nt;B===0?(Z=O[4],nt=O[5]-Y):(Z=O[4]+Y*Math.sin(B),nt=O[5]-Y*Math.cos(B));const q="calc(var(--scale-factor)*",V=T.style;f._container===f._rootContainer?(V.left=`${(100*Z/f._pageWidth).toFixed(2)}%`,V.top=`${(100*nt/f._pageHeight).toFixed(2)}%`):(V.left=`${q}${Z.toFixed(2)}px)`,V.top=`${q}${nt.toFixed(2)}px)`),V.fontSize=`${q}${X.toFixed(2)}px)`,V.fontFamily=j,N.fontSize=X,T.setAttribute("role","presentation"),T.textContent=w.str,T.dir=w.dir,f._fontInspectorEnabled&&(T.dataset.fontName=z.fontSubstitutionLoadedName||w.fontName),B!==0&&(N.angle=B*(180/Math.PI));let U=!1;if(w.str.length>1)U=!0;else if(w.str!==" "&&w.transform[0]!==w.transform[3]){const K=Math.abs(w.transform[0]),Q=Math.abs(w.transform[3]);K!==Q&&Math.max(K,Q)/Math.min(K,Q)>1.5&&(U=!0)}U&&(N.canvasWidth=z.vertical?w.height:w.width),f._textDivProperties.set(T,N),f._isReadableStream&&f._layoutText(T)}function g(f){const{div:w,scale:P,properties:T,ctx:N,prevFontSize:O,prevFontFamily:B}=f,{style:z}=w;let j="";if(T.canvasWidth!==0&&T.hasText){const{fontFamily:X}=z,{canvasWidth:Y,fontSize:Z}=T;(O!==Z||B!==X)&&(N.font=`${Z*P}px ${X}`,f.prevFontSize=Z,f.prevFontFamily=X);const{width:nt}=N.measureText(w.textContent);nt>0&&(j=`scaleX(${Y*P/nt})`)}T.angle!==0&&(j=`rotate(${T.angle}deg) ${j}`),j.length>0&&(z.transform=j)}function A(f){if(f._canceled)return;const w=f._textDivs,P=f._capability;if(w.length>l){P.resolve();return}if(!f._isReadableStream)for(const N of w)f._layoutText(N);P.resolve()}class h{constructor({textContentSource:w,container:P,viewport:T,textDivs:N,textDivProperties:O,textContentItemsStr:B,isOffscreenCanvasSupported:z}){this._textContentSource=w,this._isReadableStream=w instanceof ReadableStream,this._container=this._rootContainer=P,this._textDivs=N||[],this._textContentItemsStr=B||[],this._isOffscreenCanvasSupported=z,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=O||new WeakMap,this._canceled=!1,this._capability=new s.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:T.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:C(0,z)};const{pageWidth:j,pageHeight:X,pageX:Y,pageY:Z}=T.rawDims;this._transform=[1,0,0,-1,-Y,Z+X],this._pageWidth=j,this._pageHeight=X,(0,u.setLayerDimensions)(P,T),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new s.AbortException("TextLayer task cancelled."))}_processItems(w,P){for(const T of w){if(T.str===void 0){if(T.type==="beginMarkedContentProps"||T.type==="beginMarkedContent"){const N=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),T.id!==null&&this._container.setAttribute("id",`${T.id}`),N.append(this._container)}else T.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(T.str),p(this,T,P)}}_layoutText(w){const P=this._layoutTextParams.properties=this._textDivProperties.get(w);if(this._layoutTextParams.div=w,g(this._layoutTextParams),P.hasText&&this._container.append(w),P.hasEOL){const T=document.createElement("br");T.setAttribute("role","presentation"),this._container.append(T)}}_render(){const w=new s.PromiseCapability;let P=Object.create(null);if(this._isReadableStream){const T=()=>{this._reader.read().then(({value:N,done:O})=>{if(O){w.resolve();return}Object.assign(P,N.styles),this._processItems(N.items,P),T()},w.reject)};this._reader=this._textContentSource.getReader(),T()}else if(this._textContentSource){const{items:T,styles:N}=this._textContentSource;this._processItems(T,N),w.resolve()}else throw new Error('No "textContentSource" parameter specified.');w.promise.then(()=>{P=null,A(this)},this._capability.reject)}}function S(f){const w=new h(f);return w._render(),w}function i({container:f,viewport:w,textDivs:P,textDivProperties:T,isOffscreenCanvasSupported:N,mustRotate:O=!0,mustRescale:B=!0}){if(O&&(0,u.setLayerDimensions)(f,{rotation:w.rotation}),B){const z=C(0,N),X={prevFontSize:null,prevFontFamily:null,div:null,scale:w.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:z};for(const Y of P)X.properties=T.get(Y),X.div=Y,g(X)}}}),92:((t,e,n)=>{n.d(e,{PDFDataTransportStream:()=>l});var s=n(266),u=n(473);class l{constructor({length:C,initialData:m,progressiveDone:p=!1,contentDispositionFilename:g=null,disableRange:A=!1,disableStream:h=!1},S){if((0,s.assert)(S,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=p,this._contentDispositionFilename=g,m?.length>0){const i=m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength?m.buffer:new Uint8Array(m).buffer;this._queuedChunks.push(i)}this._pdfDataRangeTransport=S,this._isStreamingSupported=!h,this._isRangeSupported=!A,this._contentLength=C,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((i,f)=>{this._onReceiveData({begin:i,chunk:f})}),this._pdfDataRangeTransport.addProgressListener((i,f)=>{this._onProgress({loaded:i,total:f})}),this._pdfDataRangeTransport.addProgressiveReadListener(i=>{this._onReceiveData({chunk:i})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:C,chunk:m}){const p=m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength?m.buffer:new Uint8Array(m).buffer;if(C===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(p):this._queuedChunks.push(p);else{const g=this._rangeReaders.some(function(A){return A._begin!==C?!1:(A._enqueue(p),!0)});(0,s.assert)(g,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(C){C.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:C.loaded}):this._fullRequestReader?.onProgress?.({loaded:C.loaded,total:C.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(C){const m=this._rangeReaders.indexOf(C);m>=0&&this._rangeReaders.splice(m,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const C=this._queuedChunks;return this._queuedChunks=null,new y(this,C,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(C,m){if(m<=this._progressiveDataLength)return null;const p=new v(this,C,m);return this._pdfDataRangeTransport.requestDataRange(C,m),this._rangeReaders.push(p),p}cancelAllRequests(C){this._fullRequestReader?.cancel(C);for(const m of this._rangeReaders.slice(0))m.cancel(C);this._pdfDataRangeTransport.abort()}}class y{constructor(C,m,p=!1,g=null){this._stream=C,this._done=p||!1,this._filename=(0,u.isPdfFile)(g)?g:null,this._queuedChunks=m||[],this._loaded=0;for(const A of this._queuedChunks)this._loaded+=A.byteLength;this._requests=[],this._headersReady=Promise.resolve(),C._fullRequestReader=this,this.onProgress=null}_enqueue(C){this._done||(this._requests.length>0?this._requests.shift().resolve({value:C,done:!1}):this._queuedChunks.push(C),this._loaded+=C.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=new s.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class v{constructor(C,m,p){this._stream=C,this._begin=m,this._end=p,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(C){if(!this._done){if(this._requests.length===0)this._queuedChunk=C;else{this._requests.shift().resolve({value:C,done:!1});for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const C=new s.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),368:((t,e,n)=>{n.d(e,{GlobalWorkerOptions:()=>s});const s=Object.create(null);s.workerPort=null,s.workerSrc=""}),160:((t,e,n)=>{n.d(e,{XfaLayer:()=>u});var s=n(521);class u{static setupStorage(y,v,E,C,m){const p=C.getValue(v,{value:null});switch(E.name){case"textarea":if(p.value!==null&&(y.textContent=p.value),m==="print")break;y.addEventListener("input",g=>{C.setValue(v,{value:g.target.value})});break;case"input":if(E.attributes.type==="radio"||E.attributes.type==="checkbox"){if(p.value===E.attributes.xfaOn?y.setAttribute("checked",!0):p.value===E.attributes.xfaOff&&y.removeAttribute("checked"),m==="print")break;y.addEventListener("change",g=>{C.setValue(v,{value:g.target.checked?g.target.getAttribute("xfaOn"):g.target.getAttribute("xfaOff")})})}else{if(p.value!==null&&y.setAttribute("value",p.value),m==="print")break;y.addEventListener("input",g=>{C.setValue(v,{value:g.target.value})})}break;case"select":if(p.value!==null){y.setAttribute("value",p.value);for(const g of E.children)g.attributes.value===p.value?g.attributes.selected=!0:g.attributes.hasOwnProperty("selected")&&delete g.attributes.selected}y.addEventListener("input",g=>{const A=g.target.options,h=A.selectedIndex===-1?"":A[A.selectedIndex].value;C.setValue(v,{value:h})});break}}static setAttributes({html:y,element:v,storage:E=null,intent:C,linkService:m}){const{attributes:p}=v,g=y instanceof HTMLAnchorElement;p.type==="radio"&&(p.name=`${p.name}-${C}`);for(const[A,h]of Object.entries(p))if(h!=null)switch(A){case"class":h.length&&y.setAttribute(A,h.join(" "));break;case"dataId":break;case"id":y.setAttribute("data-element-id",h);break;case"style":Object.assign(y.style,h);break;case"textContent":y.textContent=h;break;default:(!g||A!=="href"&&A!=="newWindow")&&y.setAttribute(A,h)}g&&m.addLinkAttributes(y,p.href,p.newWindow),E&&p.dataId&&this.setupStorage(y,p.dataId,v,E)}static render(y){const v=y.annotationStorage,E=y.linkService,C=y.xfaHtml,m=y.intent||"display",p=document.createElement(C.name);C.attributes&&this.setAttributes({html:p,element:C,intent:m,linkService:E});const g=m!=="richText",A=y.div;if(A.append(p),y.viewport){const i=`matrix(${y.viewport.transform.join(",")})`;A.style.transform=i}g&&A.setAttribute("class","xfaLayer xfaFont");const h=[];if(C.children.length===0){if(C.value){const i=document.createTextNode(C.value);p.append(i),g&&s.XfaText.shouldBuildText(C.name)&&h.push(i)}return{textDivs:h}}const S=[[C,-1,p]];for(;S.length>0;){const[i,f,w]=S.at(-1);if(f+1===i.children.length){S.pop();continue}const P=i.children[++S.at(-1)[1]];if(P===null)continue;const{name:T}=P;if(T==="#text"){const O=document.createTextNode(P.value);h.push(O),w.append(O);continue}const N=P?.attributes?.xmlns?document.createElementNS(P.attributes.xmlns,T):document.createElement(T);if(w.append(N),P.attributes&&this.setAttributes({html:N,element:P,storage:v,intent:m,linkService:E}),P.children?.length>0)S.push([P,-1,N]);else if(P.value){const O=document.createTextNode(P.value);g&&s.XfaText.shouldBuildText(T)&&h.push(O),N.append(O)}}for(const i of A.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))i.setAttribute("readOnly",!0);return{textDivs:h}}static update(y){const v=`matrix(${y.viewport.transform.join(",")})`;y.div.style.transform=v,y.div.hidden=!1}}}),521:((t,e,n)=>{n.d(e,{XfaText:()=>s});class s{static textContent(l){const y=[],v={items:y,styles:Object.create(null)};function E(C){if(!C)return;let m=null;const p=C.name;if(p==="#text")m=C.value;else if(s.shouldBuildText(p))C?.attributes?.textContent?m=C.attributes.textContent:C.value&&(m=C.value);else return;if(m!==null&&y.push({str:m}),!!C.children)for(const g of C.children)E(g)}return E(l),v}static shouldBuildText(l){return!(l==="textarea"||l==="input"||l==="option"||l==="select")}}}),907:((t,e,n)=>{n.a(t,async(s,u)=>{try{n.d(e,{AbortException:()=>l.AbortException,AnnotationEditorLayer:()=>C.AnnotationEditorLayer,AnnotationEditorParamsType:()=>l.AnnotationEditorParamsType,AnnotationEditorType:()=>l.AnnotationEditorType,AnnotationEditorUIManager:()=>m.AnnotationEditorUIManager,AnnotationLayer:()=>p.AnnotationLayer,AnnotationMode:()=>l.AnnotationMode,CMapCompressionType:()=>l.CMapCompressionType,ColorPicker:()=>g.ColorPicker,DOMSVGFactory:()=>v.DOMSVGFactory,DrawLayer:()=>A.DrawLayer,FeatureTest:()=>l.FeatureTest,GlobalWorkerOptions:()=>h.GlobalWorkerOptions,ImageKind:()=>l.ImageKind,InvalidPDFException:()=>l.InvalidPDFException,MissingPDFException:()=>l.MissingPDFException,OPS:()=>l.OPS,Outliner:()=>S.Outliner,PDFDataRangeTransport:()=>y.PDFDataRangeTransport,PDFDateString:()=>v.PDFDateString,PDFWorker:()=>y.PDFWorker,PasswordResponses:()=>l.PasswordResponses,PermissionFlag:()=>l.PermissionFlag,PixelsPerInch:()=>v.PixelsPerInch,PromiseCapability:()=>l.PromiseCapability,RenderingCancelledException:()=>v.RenderingCancelledException,UnexpectedResponseException:()=>l.UnexpectedResponseException,Util:()=>l.Util,VerbosityLevel:()=>l.VerbosityLevel,XfaLayer:()=>i.XfaLayer,build:()=>y.build,createValidAbsoluteUrl:()=>l.createValidAbsoluteUrl,fetchData:()=>v.fetchData,getDocument:()=>y.getDocument,getFilenameFromUrl:()=>v.getFilenameFromUrl,getPdfFilenameFromUrl:()=>v.getPdfFilenameFromUrl,getXfaPageViewport:()=>v.getXfaPageViewport,isDataScheme:()=>v.isDataScheme,isPdfFile:()=>v.isPdfFile,noContextMenu:()=>v.noContextMenu,normalizeUnicode:()=>l.normalizeUnicode,renderTextLayer:()=>E.renderTextLayer,setLayerDimensions:()=>v.setLayerDimensions,shadow:()=>l.shadow,updateTextLayer:()=>E.updateTextLayer,version:()=>y.version});var l=n(266),y=n(406),v=n(473),E=n(739),C=n(629),m=n(812),p=n(640),g=n(97),A=n(423),h=n(368),S=n(405),i=n(160),f=s([y]);y=(f.then?(await f)():f)[0];const w="4.0.379",P="9e14d04fd";u()}catch(w){u(w)}})}),694:((t,e,n)=>{n.d(e,{MessageHandler:()=>v});var s=n(266);const u={DATA:1,ERROR:2},l={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function y(E){switch(E instanceof Error||typeof E=="object"&&E!==null||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),E.name){case"AbortException":return new s.AbortException(E.message);case"MissingPDFException":return new s.MissingPDFException(E.message);case"PasswordException":return new s.PasswordException(E.message,E.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(E.message,E.status);case"UnknownErrorException":return new s.UnknownErrorException(E.message,E.details);default:return new s.UnknownErrorException(E.message,E.toString())}}class v{constructor(C,m,p){this.sourceName=C,this.targetName=m,this.comObj=p,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=g=>{const A=g.data;if(A.targetName!==this.sourceName)return;if(A.stream){this.#e(A);return}if(A.callback){const S=A.callbackId,i=this.callbackCapabilities[S];if(!i)throw new Error(`Cannot resolve callback ${S}`);if(delete this.callbackCapabilities[S],A.callback===u.DATA)i.resolve(A.data);else if(A.callback===u.ERROR)i.reject(y(A.reason));else throw new Error("Unexpected callback case");return}const h=this.actionHandler[A.action];if(!h)throw new Error(`Unknown action from worker: ${A.action}`);if(A.callbackId){const S=this.sourceName,i=A.sourceName;new Promise(function(f){f(h(A.data))}).then(function(f){p.postMessage({sourceName:S,targetName:i,callback:u.DATA,callbackId:A.callbackId,data:f})},function(f){p.postMessage({sourceName:S,targetName:i,callback:u.ERROR,callbackId:A.callbackId,reason:y(f)})});return}if(A.streamId){this.#t(A);return}h(A.data)},p.addEventListener("message",this._onComObjOnMessage)}on(C,m){const p=this.actionHandler;if(p[C])throw new Error(`There is already an actionName called "${C}"`);p[C]=m}send(C,m,p){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:C,data:m},p)}sendWithPromise(C,m,p){const g=this.callbackId++,A=new s.PromiseCapability;this.callbackCapabilities[g]=A;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:C,callbackId:g,data:m},p)}catch(h){A.reject(h)}return A.promise}sendWithStream(C,m,p,g){const A=this.streamId++,h=this.sourceName,S=this.targetName,i=this.comObj;return new ReadableStream({start:f=>{const w=new s.PromiseCapability;return this.streamControllers[A]={controller:f,startCall:w,pullCall:null,cancelCall:null,isClosed:!1},i.postMessage({sourceName:h,targetName:S,action:C,streamId:A,data:m,desiredSize:f.desiredSize},g),w.promise},pull:f=>{const w=new s.PromiseCapability;return this.streamControllers[A].pullCall=w,i.postMessage({sourceName:h,targetName:S,stream:l.PULL,streamId:A,desiredSize:f.desiredSize}),w.promise},cancel:f=>{(0,s.assert)(f instanceof Error,"cancel must have a valid reason");const w=new s.PromiseCapability;return this.streamControllers[A].cancelCall=w,this.streamControllers[A].isClosed=!0,i.postMessage({sourceName:h,targetName:S,stream:l.CANCEL,streamId:A,reason:y(f)}),w.promise}},p)}#t(C){const m=C.streamId,p=this.sourceName,g=C.sourceName,A=this.comObj,h=this,S=this.actionHandler[C.action],i={enqueue(f,w=1,P){if(this.isCancelled)return;const T=this.desiredSize;this.desiredSize-=w,T>0&&this.desiredSize<=0&&(this.sinkCapability=new s.PromiseCapability,this.ready=this.sinkCapability.promise),A.postMessage({sourceName:p,targetName:g,stream:l.ENQUEUE,streamId:m,chunk:f},P)},close(){this.isCancelled||(this.isCancelled=!0,A.postMessage({sourceName:p,targetName:g,stream:l.CLOSE,streamId:m}),delete h.streamSinks[m])},error(f){(0,s.assert)(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,A.postMessage({sourceName:p,targetName:g,stream:l.ERROR,streamId:m,reason:y(f)}))},sinkCapability:new s.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:C.desiredSize,ready:null};i.sinkCapability.resolve(),i.ready=i.sinkCapability.promise,this.streamSinks[m]=i,new Promise(function(f){f(S(C.data,i))}).then(function(){A.postMessage({sourceName:p,targetName:g,stream:l.START_COMPLETE,streamId:m,success:!0})},function(f){A.postMessage({sourceName:p,targetName:g,stream:l.START_COMPLETE,streamId:m,reason:y(f)})})}#e(C){const m=C.streamId,p=this.sourceName,g=C.sourceName,A=this.comObj,h=this.streamControllers[m],S=this.streamSinks[m];switch(C.stream){case l.START_COMPLETE:C.success?h.startCall.resolve():h.startCall.reject(y(C.reason));break;case l.PULL_COMPLETE:C.success?h.pullCall.resolve():h.pullCall.reject(y(C.reason));break;case l.PULL:if(!S){A.postMessage({sourceName:p,targetName:g,stream:l.PULL_COMPLETE,streamId:m,success:!0});break}S.desiredSize<=0&&C.desiredSize>0&&S.sinkCapability.resolve(),S.desiredSize=C.desiredSize,new Promise(function(i){i(S.onPull?.())}).then(function(){A.postMessage({sourceName:p,targetName:g,stream:l.PULL_COMPLETE,streamId:m,success:!0})},function(i){A.postMessage({sourceName:p,targetName:g,stream:l.PULL_COMPLETE,streamId:m,reason:y(i)})});break;case l.ENQUEUE:if((0,s.assert)(h,"enqueue should have stream controller"),h.isClosed)break;h.controller.enqueue(C.chunk);break;case l.CLOSE:if((0,s.assert)(h,"close should have stream controller"),h.isClosed)break;h.isClosed=!0,h.controller.close(),this.#s(h,m);break;case l.ERROR:(0,s.assert)(h,"error should have stream controller"),h.controller.error(y(C.reason)),this.#s(h,m);break;case l.CANCEL_COMPLETE:C.success?h.cancelCall.resolve():h.cancelCall.reject(y(C.reason)),this.#s(h,m);break;case l.CANCEL:if(!S)break;new Promise(function(i){i(S.onCancel?.(y(C.reason)))}).then(function(){A.postMessage({sourceName:p,targetName:g,stream:l.CANCEL_COMPLETE,streamId:m,success:!0})},function(i){A.postMessage({sourceName:p,targetName:g,stream:l.CANCEL_COMPLETE,streamId:m,reason:y(i)})}),S.sinkCapability.reject(y(C.reason)),S.isCancelled=!0,delete this.streamSinks[m];break;default:throw new Error("Unexpected stream case")}}async#s(C,m){await Promise.allSettled([C.startCall?.promise,C.pullCall?.promise,C.cancelCall?.promise]),delete this.streamControllers[m]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}}),825:((t,e,n)=>{n.d(e,{MurmurHash3_64:()=>v});var s=n(266);const u=3285377520,l=4294901760,y=65535;class v{constructor(C){this.h1=C?C&4294967295:u,this.h2=C?C&4294967295:u}update(C){let m,p;if(typeof C=="string"){m=new Uint8Array(C.length*2),p=0;for(let B=0,z=C.length;B<z;B++){const j=C.charCodeAt(B);j<=255?m[p++]=j:(m[p++]=j>>>8,m[p++]=j&255)}}else if((0,s.isArrayBuffer)(C))m=C.slice(),p=m.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const g=p>>2,A=p-g*4,h=new Uint32Array(m.buffer,0,g);let S=0,i=0,f=this.h1,w=this.h2;const P=3432918353,T=461845907,N=P&y,O=T&y;for(let B=0;B<g;B++)B&1?(S=h[B],S=S*P&l|S*N&y,S=S<<15|S>>>17,S=S*T&l|S*O&y,f^=S,f=f<<13|f>>>19,f=f*5+3864292196):(i=h[B],i=i*P&l|i*N&y,i=i<<15|i>>>17,i=i*T&l|i*O&y,w^=i,w=w<<13|w>>>19,w=w*5+3864292196);switch(S=0,A){case 3:S^=m[g*4+2]<<16;case 2:S^=m[g*4+1]<<8;case 1:S^=m[g*4],S=S*P&l|S*N&y,S=S<<15|S>>>17,S=S*T&l|S*O&y,g&1?f^=S:w^=S}this.h1=f,this.h2=w}hexdigest(){let C=this.h1,m=this.h2;return C^=m>>>1,C=C*3981806797&l|C*36045&y,m=m*4283543511&l|((m<<16|C>>>16)*2950163797&l)>>>16,C^=m>>>1,C=C*444984403&l|C*60499&y,m=m*3301882366&l|((m<<16|C>>>16)*3120437893&l)>>>16,C^=m>>>1,(C>>>0).toString(16).padStart(8,"0")+(m>>>0).toString(16).padStart(8,"0")}}}),266:((t,e,n)=>{n.d(e,{AbortException:()=>pt,AnnotationBorderStyleType:()=>f,AnnotationEditorParamsType:()=>g,AnnotationEditorPrefix:()=>m,AnnotationEditorType:()=>p,AnnotationMode:()=>C,AnnotationPrefix:()=>$,AnnotationType:()=>i,BaseException:()=>U,CMapCompressionType:()=>P,FONT_IDENTITY_MATRIX:()=>l,FeatureTest:()=>r,FormatError:()=>at,IDENTITY_MATRIX:()=>u,ImageKind:()=>S,InvalidPDFException:()=>et,LINE_FACTOR:()=>v,MAX_IMAGE_SIZE_TO_CACHE:()=>y,MissingPDFException:()=>ht,OPS:()=>T,PasswordException:()=>K,PasswordResponses:()=>N,PermissionFlag:()=>A,PromiseCapability:()=>R,RenderingIntentFlag:()=>E,TextRenderingMode:()=>h,UnexpectedResponseException:()=>lt,UnknownErrorException:()=>Q,Util:()=>a,VerbosityLevel:()=>w,assert:()=>Z,bytesToString:()=>ut,createValidAbsoluteUrl:()=>q,getUuid:()=>H,getVerbosityLevel:()=>z,info:()=>j,isArrayBuffer:()=>b,isNodeJS:()=>s,normalizeUnicode:()=>I,objectFromMap:()=>F,setVerbosityLevel:()=>B,shadow:()=>V,string32:()=>it,stringToBytes:()=>ft,unreachable:()=>Y,warn:()=>X});const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),u=[1,0,0,1,0,0],l=[.001,0,0,.001,0,0],y=1e7,v=1.35,E={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},C={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},m="pdfjs_internal_editor_",p={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},g={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32},A={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},h={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},S={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},i={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},f={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},w={ERRORS:0,WARNINGS:1,INFOS:5},P={NONE:0,BINARY:1},T={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},N={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let O=w.WARNINGS;function B(D){Number.isInteger(D)&&(O=D)}function z(){return O}function j(D){O>=w.INFOS&&console.log(`Info: ${D}`)}function X(D){O>=w.WARNINGS&&console.log(`Warning: ${D}`)}function Y(D){throw new Error(D)}function Z(D,L){D||Y(L)}function nt(D){switch(D?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function q(D,L=null,_=null){if(!D)return null;try{if(_&&typeof D=="string"&&(_.addDefaultProtocol&&D.startsWith("www.")&&D.match(/\./g)?.length>=2&&(D=`http://${D}`),_.tryConvertEncoding))try{D=c(D)}catch{}const W=L?new URL(D,L):new URL(D);if(nt(W))return W}catch{}return null}function V(D,L,_,W=!1){return Object.defineProperty(D,L,{value:_,enumerable:!W,configurable:!0,writable:!1}),_}const U=(function(){function L(_,W){this.constructor===L&&Y("Cannot initialize BaseException."),this.message=_,this.name=W}return L.prototype=new Error,L.constructor=L,L})();class K extends U{constructor(L,_){super(L,"PasswordException"),this.code=_}}class Q extends U{constructor(L,_){super(L,"UnknownErrorException"),this.details=_}}class et extends U{constructor(L){super(L,"InvalidPDFException")}}class ht extends U{constructor(L){super(L,"MissingPDFException")}}class lt extends U{constructor(L,_){super(L,"UnexpectedResponseException"),this.status=_}}class at extends U{constructor(L){super(L,"FormatError")}}class pt extends U{constructor(L){super(L,"AbortException")}}function ut(D){(typeof D!="object"||D?.length===void 0)&&Y("Invalid argument for bytesToString");const L=D.length,_=8192;if(L<_)return String.fromCharCode.apply(null,D);const W=[];for(let G=0;G<L;G+=_){const J=Math.min(G+_,L),st=D.subarray(G,J);W.push(String.fromCharCode.apply(null,st))}return W.join("")}function ft(D){typeof D!="string"&&Y("Invalid argument for stringToBytes");const L=D.length,_=new Uint8Array(L);for(let W=0;W<L;++W)_[W]=D.charCodeAt(W)&255;return _}function it(D){return String.fromCharCode(D>>24&255,D>>16&255,D>>8&255,D&255)}function F(D){const L=Object.create(null);for(const[_,W]of D)L[_]=W;return L}function x(){const D=new Uint8Array(4);return D[0]=1,new Uint32Array(D.buffer,0,1)[0]===1}function o(){try{return new Function(""),!0}catch{return!1}}class r{static get isLittleEndian(){return V(this,"isLittleEndian",x())}static get isEvalSupported(){return V(this,"isEvalSupported",o())}static get isOffscreenCanvasSupported(){return V(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?V(this,"platform",{isMac:navigator.platform.includes("Mac")}):V(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){return V(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const d=[...Array(256).keys()].map(D=>D.toString(16).padStart(2,"0"));class a{static makeHexColor(L,_,W){return`#${d[L]}${d[_]}${d[W]}`}static scaleMinMax(L,_){let W;L[0]?(L[0]<0&&(W=_[0],_[0]=_[1],_[1]=W),_[0]*=L[0],_[1]*=L[0],L[3]<0&&(W=_[2],_[2]=_[3],_[3]=W),_[2]*=L[3],_[3]*=L[3]):(W=_[0],_[0]=_[2],_[2]=W,W=_[1],_[1]=_[3],_[3]=W,L[1]<0&&(W=_[2],_[2]=_[3],_[3]=W),_[2]*=L[1],_[3]*=L[1],L[2]<0&&(W=_[0],_[0]=_[1],_[1]=W),_[0]*=L[2],_[1]*=L[2]),_[0]+=L[4],_[1]+=L[4],_[2]+=L[5],_[3]+=L[5]}static transform(L,_){return[L[0]*_[0]+L[2]*_[1],L[1]*_[0]+L[3]*_[1],L[0]*_[2]+L[2]*_[3],L[1]*_[2]+L[3]*_[3],L[0]*_[4]+L[2]*_[5]+L[4],L[1]*_[4]+L[3]*_[5]+L[5]]}static applyTransform(L,_){const W=L[0]*_[0]+L[1]*_[2]+_[4],G=L[0]*_[1]+L[1]*_[3]+_[5];return[W,G]}static applyInverseTransform(L,_){const W=_[0]*_[3]-_[1]*_[2],G=(L[0]*_[3]-L[1]*_[2]+_[2]*_[5]-_[4]*_[3])/W,J=(-L[0]*_[1]+L[1]*_[0]+_[4]*_[1]-_[5]*_[0])/W;return[G,J]}static getAxialAlignedBoundingBox(L,_){const W=this.applyTransform(L,_),G=this.applyTransform(L.slice(2,4),_),J=this.applyTransform([L[0],L[3]],_),st=this.applyTransform([L[2],L[1]],_);return[Math.min(W[0],G[0],J[0],st[0]),Math.min(W[1],G[1],J[1],st[1]),Math.max(W[0],G[0],J[0],st[0]),Math.max(W[1],G[1],J[1],st[1])]}static inverseTransform(L){const _=L[0]*L[3]-L[1]*L[2];return[L[3]/_,-L[1]/_,-L[2]/_,L[0]/_,(L[2]*L[5]-L[4]*L[3])/_,(L[4]*L[1]-L[5]*L[0])/_]}static singularValueDecompose2dScale(L){const _=[L[0],L[2],L[1],L[3]],W=L[0]*_[0]+L[1]*_[2],G=L[0]*_[1]+L[1]*_[3],J=L[2]*_[0]+L[3]*_[2],st=L[2]*_[1]+L[3]*_[3],tt=(W+st)/2,ot=Math.sqrt((W+st)**2-4*(W*st-J*G))/2,rt=tt+ot||1,ct=tt-ot||1;return[Math.sqrt(rt),Math.sqrt(ct)]}static normalizeRect(L){const _=L.slice(0);return L[0]>L[2]&&(_[0]=L[2],_[2]=L[0]),L[1]>L[3]&&(_[1]=L[3],_[3]=L[1]),_}static intersect(L,_){const W=Math.max(Math.min(L[0],L[2]),Math.min(_[0],_[2])),G=Math.min(Math.max(L[0],L[2]),Math.max(_[0],_[2]));if(W>G)return null;const J=Math.max(Math.min(L[1],L[3]),Math.min(_[1],_[3])),st=Math.min(Math.max(L[1],L[3]),Math.max(_[1],_[3]));return J>st?null:[W,J,G,st]}static bezierBoundingBox(L,_,W,G,J,st,tt,ot){const rt=[],ct=[[],[]];let mt,At,Ct,dt,Et,Ft,Nt,kt;for(let ge=0;ge<2;++ge){if(ge===0?(At=6*L-12*W+6*J,mt=-3*L+9*W-9*J+3*tt,Ct=3*W-3*L):(At=6*_-12*G+6*st,mt=-3*_+9*G-9*st+3*ot,Ct=3*G-3*_),Math.abs(mt)<1e-12){if(Math.abs(At)<1e-12)continue;dt=-Ct/At,0<dt&&dt<1&&rt.push(dt);continue}Nt=At*At-4*Ct*mt,kt=Math.sqrt(Nt),!(Nt<0)&&(Et=(-At+kt)/(2*mt),0<Et&&Et<1&&rt.push(Et),Ft=(-At-kt)/(2*mt),0<Ft&&Ft<1&&rt.push(Ft))}let Lt=rt.length,Mt;const Yt=Lt;for(;Lt--;)dt=rt[Lt],Mt=1-dt,ct[0][Lt]=Mt*Mt*Mt*L+3*Mt*Mt*dt*W+3*Mt*dt*dt*J+dt*dt*dt*tt,ct[1][Lt]=Mt*Mt*Mt*_+3*Mt*Mt*dt*G+3*Mt*dt*dt*st+dt*dt*dt*ot;return ct[0][Yt]=L,ct[1][Yt]=_,ct[0][Yt+1]=tt,ct[1][Yt+1]=ot,ct[0].length=ct[1].length=Yt+2,[Math.min(...ct[0]),Math.min(...ct[1]),Math.max(...ct[0]),Math.max(...ct[1])]}}function c(D){return decodeURIComponent(escape(D))}function b(D){return typeof D=="object"&&D?.byteLength!==void 0}class R{#t=!1;constructor(){this.promise=new Promise((L,_)=>{this.resolve=W=>{this.#t=!0,L(W)},this.reject=W=>{this.#t=!0,_(W)}})}get settled(){return this.#t}}let k=null,M=null;function I(D){return k||(k=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,M=new Map([["","t"]])),D.replaceAll(k,(L,_,W)=>_?_.normalize("NFKC"):M.get(W))}function H(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const D=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(D);else for(let L=0;L<32;L++)D[L]=Math.floor(Math.random()*255);return ut(D)}const $="pdfjs_internal_id_"})},fn={};function Me(t){var e=fn[t];if(e!==void 0)return e.exports;var n=fn[t]={exports:{}};return qa[t](n,n.exports,Me),n.exports}(()=>{var t=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",e=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",n=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",s=l=>{l&&l.d<1&&(l.d=1,l.forEach(y=>y.r--),l.forEach(y=>y.r--?y.r++:y()))},u=l=>l.map(y=>{if(y!==null&&typeof y=="object"){if(y[t])return y;if(y.then){var v=[];v.d=0,y.then(m=>{E[e]=m,s(v)},m=>{E[n]=m,s(v)});var E={};return E[t]=m=>m(v),E}}var C={};return C[t]=m=>{},C[e]=y,C});Me.a=(l,y,v)=>{var E;v&&((E=[]).d=-1);var C=new Set,m=l.exports,p,g,A,h=new Promise((S,i)=>{A=i,g=S});h[e]=m,h[t]=S=>(E&&S(E),C.forEach(S),h.catch(i=>{})),l.exports=h,y(S=>{p=u(S);var i,f=()=>p.map(P=>{if(P[n])throw P[n];return P[e]}),w=new Promise(P=>{i=()=>P(f),i.r=0;var T=N=>N!==E&&!C.has(N)&&(C.add(N),N&&!N.d&&(i.r++,N.push(i)));p.map(N=>N[t](T))});return i.r?w:f()},S=>(S?A(h[n]=S):g(m),s(E))),E&&E.d<0&&(E.d=0)}})();Me.d=(t,e)=>{for(var n in e)Me.o(e,n)&&!Me.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})};Me.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var gt=Me(907);gt=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=gt);gt.AbortException;gt.AnnotationEditorLayer;gt.AnnotationEditorParamsType;gt.AnnotationEditorType;gt.AnnotationEditorUIManager;gt.AnnotationLayer;gt.AnnotationMode;gt.CMapCompressionType;gt.ColorPicker;gt.DOMSVGFactory;gt.DrawLayer;gt.FeatureTest;var Ka=gt.GlobalWorkerOptions;gt.ImageKind;gt.InvalidPDFException;gt.MissingPDFException;gt.OPS;gt.Outliner;gt.PDFDataRangeTransport;gt.PDFDateString;gt.PDFWorker;gt.PasswordResponses;gt.PermissionFlag;gt.PixelsPerInch;gt.PromiseCapability;gt.RenderingCancelledException;gt.UnexpectedResponseException;var Ja=gt.Util;gt.VerbosityLevel;gt.XfaLayer;gt.build;gt.createValidAbsoluteUrl;gt.fetchData;var Qa=gt.getDocument;gt.getFilenameFromUrl;gt.getPdfFilenameFromUrl;gt.getXfaPageViewport;gt.isDataScheme;gt.isPdfFile;gt.noContextMenu;gt.normalizeUnicode;gt.renderTextLayer;gt.setLayerDimensions;gt.shadow;gt.updateTextLayer;gt.version;const Za=["d","stroke"],tl=["fill"],el={class:"flex items-center gap-2 mb-3"},sl={class:"content space-y-3"},il={key:0,class:"flex flex-col gap-3 py-1"},nl={key:1,class:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap"},rl=$s({__name:"PageAnnotation",props:{type:{},content:{},isLoading:{type:Boolean},rects:{},verticalOffset:{}},emits:["close"],setup(t,{emit:e}){const n=t,s=e,u=Ot(null),l=Ot(!1),y=Ot({top:0,left:0}),v=Ot({x:0,y:0}),E=Ls(()=>n.type==="Error"),C=()=>{if(!n.rects||n.rects.length===0||!u.value)return;const p=u.value.closest(".pdf-page-container");if(!p)return;const g=p.getBoundingClientRect();if(g.width<100)return;const A=n.rects[0];A&&(v.value={x:A.left+A.width,y:A.top+A.height/2},y.value={top:v.value.y+(n.verticalOffset||0),left:g.width+50},l.value=!0)},m=Ls(()=>{const p=v.value.x,g=v.value.y,A=y.value.left,h=y.value.top,S=A-p,i=h-g;return`M 0 0 C ${S*.5} 0, ${S*.5} ${i}, ${S} ${i}`});return xs([()=>n.rects,()=>n.verticalOffset],C,{deep:!0}),zs(()=>{C();const p=setInterval(C,2e3);ds(()=>clearInterval(p))}),(p,g)=>(Pt(),_t(Ht,null,[l.value?(Pt(),_t("svg",{key:0,class:"absolute pointer-events-none transition-opacity duration-300",style:Le({left:`${v.value.x}px`,top:`${v.value.y}px`,width:`${Math.max(10,y.value.left-v.value.x+10)}px`,height:`${Math.abs(y.value.top-v.value.y)+20}px`,overflow:"visible",zIndex:5})},[bt("path",{d:m.value,fill:"none",stroke:E.value?"#ef4444":"#f59e0b","stroke-width":"1","stroke-dasharray":"4,3",opacity:"0.6"},null,8,Za),bt("circle",{r:"2.5",cx:"0",cy:"0",fill:E.value?"#ef4444":"#f59e0b"},null,8,tl)],4)):Fe("",!0),go(bt("div",{ref_key:"elRef",ref:u,class:"page-annotation absolute z-50 pointer-events-auto bg-white/95 backdrop-blur-sm rounded-xl shadow-xl border border-gray-100 p-4 transition-all duration-300 group",style:Le({top:`${y.value.top}px`,left:`${y.value.left}px`,width:"480px",transform:"translateY(-50%)"})},[bt("button",{onClick:g[0]||(g[0]=A=>s("close")),class:"absolute -top-2 -right-2 w-6 h-6 bg-white shadow-md rounded-full flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors opacity-0 group-hover:opacity-100"},[...g[1]||(g[1]=[bt("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[bt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),bt("div",el,[t.isLoading?(Pt(),_t(Ht,{key:0},[g[2]||(g[2]=bt("div",{class:"w-2 h-2 rounded-full bg-indigo-500 animate-ping"},null,-1)),g[3]||(g[3]=bt("span",{class:"text-[10px] uppercase tracking-widest font-bold font-mono text-indigo-600"},"",-1))],64)):(Pt(),_t(Ht,{key:1},[bt("div",{class:ze(["w-2 h-2 rounded-full animate-pulse",E.value?"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]":"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.5)]"])},null,2),bt("span",{class:ze(["text-[10px] uppercase tracking-widest font-bold font-mono",E.value?"text-red-500":"text-amber-600"])},Ue(t.type),3)],64))]),bt("div",sl,[t.isLoading?(Pt(),_t("div",il,[...g[4]||(g[4]=[bt("div",{class:"h-2.5 bg-slate-100 rounded-full animate-pulse w-full"},null,-1),bt("div",{class:"h-2.5 bg-slate-100 rounded-full animate-pulse w-5/6"},null,-1),bt("div",{class:"h-2.5 bg-slate-100 rounded-full animate-pulse w-4/6"},null,-1)])])):(Pt(),_t("p",nl,Ue(t.content),1))])],4),[[Ra,l.value]])],64))}}),Sr=(t,e)=>{const n=t.__vccOpts||t;for(const[s,u]of e)n[s]=u;return n},ol=Sr(rl,[["__scopeId","data-v-a497374a"]]),al={class:"pdf-viewer w-full h-full flex flex-col bg-slate-100"},ll={class:"toolbar bg-white shadow-sm p-3 flex gap-4 items-center sticky top-0 z-[100] border-b"},cl={class:"flex items-center gap-2"},hl={class:"text-xs font-mono w-10 text-center text-gray-500"},dl={key:0,class:"text-xs text-gray-400 ml-auto"},ul={key:0,class:"fixed inset-0 bg-indigo-500/10 z-[200] flex items-center justify-center pointer-events-none border-4 border-dashed border-indigo-400 m-4 rounded-3xl"},fl={class:"absolute inset-0 pointer-events-none",style:{"z-index":"100"}},pl={key:1,class:"absolute inset-0 flex flex-col items-center justify-center text-slate-300"},gl=$s({__name:"PdfViewer",props:{scale:{default:1.5},annotationsByPage:{default:()=>new Map}},emits:["textSelected","closeAnnotation","pdfRendered"],setup(t,{emit:e}){Ka.workerSrc=new URL(""+new URL("pdf.worker-Be0fJUI5.mjs",import.meta.url).href,import.meta.url).toString();const n=e,s=Ot(null),u=Ot(null),l=Ot(null),y=Ot(null);Ot(!1);const v=Ot(1),E=Ot(0),C=Ot(!1),m=Ot(""),p=Ot(!1),g=Ot(0),A=X=>{v.value=Math.max(.5,Math.min(3,v.value+X)),O()},h=()=>s.value?.click(),S=async X=>{const Z=X.target.files?.[0];Z&&await N(Z)},i=Ot(0),f=X=>{X.preventDefault(),X.stopPropagation(),i.value++,i.value>0&&(p.value=!0)},w=X=>{X.preventDefault(),X.stopPropagation(),X.dataTransfer&&(X.dataTransfer.dropEffect="copy")},P=X=>{X.preventDefault(),X.stopPropagation(),i.value--,i.value<=0&&(p.value=!1,i.value=0)},T=async X=>{X.preventDefault(),X.stopPropagation(),p.value=!1,i.value=0;const Y=X.dataTransfer?.files[0];Y&&Y.type==="application/pdf"?await N(Y):Y&&(m.value=" PDF ")},N=async X=>{C.value=!0,m.value="";try{const Y=await X.arrayBuffer(),nt=await Qa({data:Y}).promise;y.value=Hn(nt),E.value=y.value.numPages,await O()}catch(Y){m.value="PDF ",console.error(Y)}finally{C.value=!1}},O=async()=>{if(!u.value||!y.value)return;const X=++g.value,Y=l.value?.scrollTop||0;if(u.value.children.length!==E.value){u.value.innerHTML="";for(let nt=1;nt<=E.value;nt++)u.value.appendChild(B(nt))}const Z=[];for(let nt=1;nt<=E.value;nt++){const q=u.value.querySelector(`[data-page-number="${nt}"]`);q&&Z.push(z(nt,q,X))}await Vn(),l.value&&(l.value.scrollTop=Y),await Promise.all(Z),X===g.value&&n("pdfRendered",v.value)},B=X=>{const Y=document.createElement("div");return Y.className="pdf-page-container relative shadow-lg bg-gray-50 border border-gray-100 mb-8 mx-auto",Y.dataset.pageNumber=String(X),Y.style.width=`${600*v.value}px`,Y.style.height=`${840*v.value}px`,Y.innerHTML=`<div class="absolute inset-0 flex items-center justify-center text-gray-300 text-sm">  ${X} </div>`,Y},z=async(X,Y,Z)=>{try{const nt=await y.value.getPage(X);if(Z!==g.value)return;const q=nt.getViewport({scale:v.value});Y.style.width=`${q.width}px`,Y.style.height=`${q.height}px`;let V=Y.querySelector("canvas");if(V||(V=document.createElement("canvas"),Y.insertBefore(V,Y.firstChild)),V.width=q.width,V.height=q.height,await nt.render({canvasContext:V.getContext("2d"),viewport:q}).promise,Z!==g.value)return;let U=Y.querySelector(".textLayer");U||(U=document.createElement("div"),U.className="textLayer",Y.appendChild(U)),U.innerHTML="",(await nt.getTextContent()).items.forEach(Q=>{const et=document.createElement("span"),ht=Ja.transform(q.transform,Q.transform),lt=Math.sqrt(ht[0]*ht[0]+ht[1]*ht[1]);et.textContent=Q.str,et.style.fontFamily=Q.fontName,et.style.fontSize=`${lt}px`,et.style.left=`${ht[4]}px`,et.style.top=`${ht[5]-lt}px`,U.appendChild(et)})}catch(nt){console.warn(` ${X} `,nt)}},j=X=>{const Y=window.getSelection();if(!Y||Y.rangeCount===0)return;const Z=Y.getRangeAt(0);if(!Y.toString().trim())return;X.preventDefault();let q=Z.startContainer.parentElement;for(;q&&!q.classList.contains("pdf-page-container");)q=q.parentElement;if(!q)return;const V=parseInt(q.dataset.pageNumber||"1"),U=q.querySelector(".textLayer");if(!U)return;let K="",Q=-1,et=-1;const ht=document.createTreeWalker(U,NodeFilter.SHOW_TEXT);let lt;for(;lt=ht.nextNode();){const pt=lt.textContent||"";K.length>0&&!K.endsWith(" ")&&!pt.startsWith(" ")&&!K.endsWith("-")&&(K+=" "),lt===Z.startContainer&&(Q=K.length+Z.startOffset),lt===Z.endContainer&&(et=K.length+Z.endOffset),K+=pt}const at=Z.getBoundingClientRect();n("textSelected",{text:K.substring(Q,et),pageNumber:V,rect:at,offsets:{start:Q,end:et},pageFullText:K,scale:v.value})};return zs(()=>{document.addEventListener("contextmenu",j)}),ds(()=>{document.removeEventListener("contextmenu",j),y.value&&y.value.destroy()}),(X,Y)=>(Pt(),_t("div",al,[bt("div",ll,[bt("button",{onClick:h,class:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 shadow-sm active:scale-95 transition"}," PDF"),Y[2]||(Y[2]=bt("div",{class:"h-6 w-[1px] bg-gray-200"},null,-1)),bt("div",cl,[bt("button",{onClick:Y[0]||(Y[0]=Z=>A(-.1)),class:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full hover:bg-gray-200"},"-"),bt("span",hl,Ue(Math.round(v.value*100))+"%",1),bt("button",{onClick:Y[1]||(Y[1]=Z=>A(.1)),class:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full hover:bg-gray-200"},"+")]),E.value>0?(Pt(),_t("div",dl," "+Ue(E.value)+" ",1)):Fe("",!0)]),bt("div",{ref_key:"pdfScrollContainer",ref:l,class:"flex-1 overflow-auto p-8 relative scroll-smooth",onDragenter:f,onDragover:w,onDragleave:P,onDrop:T},[p.value?(Pt(),_t("div",ul,[...Y[3]||(Y[3]=[bt("div",{class:"bg-white/90 backdrop-blur p-8 rounded-2xl shadow-2xl"}," PDF",-1)])])):Fe("",!0),bt("div",{ref_key:"pdfContainer",ref:u,class:"flex flex-col items-center min-w-full"},null,512),(Pt(!0),_t(Ht,null,As(t.annotationsByPage,([Z,nt])=>(Pt(),_t(Ht,{key:Z},[y.value?(Pt(),pi(xo,{key:0,to:`[data-page-number='${Z}']`},[bt("div",fl,[(Pt(!0),_t(Ht,null,As(nt,q=>(Pt(),_t("div",{key:q.id,class:"absolute inset-0"},[(Pt(!0),_t(Ht,null,As(q.rects,(V,U)=>(Pt(),_t("div",{key:U,class:ze(["absolute transition-all duration-300",[q.type==="Error"?"bg-red-500/10 border-b-2 border-red-500/50":"bg-yellow-500/10 border-b-2 border-yellow-600/50",q.isLoading?"animate-pulse":""]]),style:Le({top:V.top+V.height*.1+"px",left:V.left+"px",width:V.width+"px",height:V.height*.82+"px",borderRadius:"1px"})},null,6))),128))]))),128)),(Pt(!0),_t(Ht,null,As(nt,q=>(Pt(),pi(ol,{key:`bubble-${q.id}`,type:q.type,content:q.content,"is-loading":q.isLoading,rects:q.rects,"vertical-offset":q.verticalOffset,onClose:V=>n("closeAnnotation",Z,q.id)},null,8,["type","content","is-loading","rects","vertical-offset","onClose"]))),128))])],8,["to"])):Fe("",!0)],64))),128)),!y.value&&!C.value?(Pt(),_t("div",pl,[...Y[4]||(Y[4]=[bt("svg",{class:"w-20 h-20 mb-4 opacity-20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[bt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),bt("p",{class:"text-lg font-medium"},"",-1)])])):Fe("",!0)],544),bt("input",{ref_key:"fileInput",ref:s,type:"file",class:"hidden",onChange:S,accept:".pdf"},null,544)]))}}),ml={class:"py-1"},bl={class:"px-4 py-2 text-xs text-gray-400"},vl=$s({__name:"ContextMenu",props:{visible:{type:Boolean},x:{},y:{},selectedText:{}},emits:["close","aiCorrect"],setup(t,{emit:e}){const n=t,s=e,u=Ls(()=>({left:`${n.x}px`,top:`${n.y}px`,display:n.visible?"block":"none"})),l=v=>{v.target.closest(".context-menu")||s("close")},y=()=>{s("aiCorrect"),s("close")};return zs(()=>{document.addEventListener("click",l)}),ds(()=>{document.removeEventListener("click",l)}),(v,E)=>t.visible?(Pt(),_t("div",{key:0,class:"context-menu fixed z-50 bg-white rounded-lg shadow-2xl border border-gray-200 overflow-hidden fade-in",style:Le(u.value)},[bt("div",ml,[bt("button",{onClick:y,class:"w-full px-4 py-3 text-left hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 transition-all flex items-center gap-3 group"},[...E[0]||(E[0]=[bt("svg",{class:"w-5 h-5 text-purple-600 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[bt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1),bt("div",null,[bt("div",{class:"font-medium text-gray-800"},"AI "),bt("div",{class:"text-xs text-gray-500 mt-0.5"}," AI ")],-1)])]),E[1]||(E[1]=bt("div",{class:"border-t border-gray-100 mx-2"},null,-1)),bt("div",bl,"  "+Ue(t.selectedText.length)+"  ",1)])],4)):Fe("",!0)}}),yl=Sr(vl,[["__scopeId","data-v-4b4a39cb"]]),Al="sk-51d4d14acb9d44f0bde86a52ec091579",wl="https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",xl="qwen-max";async function Sl(t){try{const e=await fetch(wl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Al}`},body:JSON.stringify({model:xl,messages:[{role:"user",content:`****

****

1.  **** ** JSON **
2.  **PDF **  PDF PDF **-** "instan-taneous"  "instantaneous"**Hyphenation**
3.  **** JSON  \`corrections\` \`corrections\`  \`[]\`
4.  **** \`corrections\` 
    - \`original\`: 
    - \`type\`: "Error" (/)  "Warning" (/)
    - \`description\`: ****
    - \`suggested_fix\`: 


****
${t.text}`}],response_format:{type:"json_object"},temperature:.2})});if(!e.ok)throw new Error(`API : ${e.status}`);const u=(await e.json()).choices[0].message.content.replace(/```json|```/g,"").trim();return JSON.parse(u).corrections||[]}catch(e){throw console.error("AI :",e),e}}const Cl={class:"app h-screen bg-slate-50 flex flex-col overflow-hidden"},El={class:"h-14 bg-white border-b flex items-center justify-between px-6 shadow-sm z-[110] shrink-0"},Tl={class:"flex-1 relative bg-slate-100 overflow-hidden"},Rl=$s({__name:"App",setup(t){const e=Ot(new Map),n=Ot({visible:!1,x:0,y:0,text:"",data:null}),s=Ot(1);let u=0;const l=g=>{if(g.length===0)return;const A=g.map(i=>{const f=i.rects[0],w=f?f.top+f.height/2:0;return{ann:i,naturalY:w}});A.sort((i,f)=>i.naturalY-f.naturalY);const h=200;let S=-1/0;A.forEach(i=>{const f=Math.max(i.naturalY,S+h);i.ann.verticalOffset=f-i.naturalY,S=f})},y=g=>{g?.rect&&(s.value=g.scale||s.value,n.value={visible:!0,x:g.rect.left,y:g.rect.bottom+5,text:g.text,data:g})};function v(g,A,h){const S=g.closest(".pdf-page-container")?.getBoundingClientRect();if(!S||A===-1||h===-1)return[];const i=document.createRange(),f=document.createTreeWalker(g,NodeFilter.SHOW_TEXT);let w=null,P=0,T=null,N=0,O,B="";for(;O=f.nextNode();){const z=O.textContent||"";B.length>0&&!B.endsWith(" ")&&!z.startsWith(" ")&&!B.endsWith("-")&&(B+=" ");const X=B.length,Y=z.length;!w&&A>=X&&A<X+Y&&(w=O,P=A-X),!T&&h>X&&h<=X+Y&&(T=O,N=h-X),B+=z}if(w&&T)try{return i.setStart(w,P),i.setEnd(T,N),Array.from(i.getClientRects()).map(z=>({top:z.top-S.top,left:z.left-S.left,width:z.width,height:z.height}))}catch{return[]}return[]}const E=async g=>{if(console.log(" [Rebuild] , newScale:",g,"currentScale:",s.value),typeof g=="number"&&g!==s.value){const h=g/s.value;console.log(" [Rebuild] , Ratio:",h),e.value.forEach((S,i)=>{S.forEach(f=>{f.rects=f.rects.map(w=>({top:w.top*h,left:w.left*h,width:w.width*h,height:w.height*h}))})}),s.value=g,e.value=new Map(e.value)}console.log(" [Rebuild]  DOM ..."),await new Promise(h=>setTimeout(h,500));const A=new Map;e.value.forEach((h,S)=>{const i=document.querySelector(`[data-page-number="${S}"] .textLayer`);if(!i){console.warn(` [Rebuild]  ${S}  textLayer`),A.set(S,h);return}if(i.children.length===0){console.warn(` [Rebuild]  ${S}  textLayer `),A.set(S,h);return}console.log(` [Rebuild]  ${S} , :`,h.length);const f=h.map(w=>{const T=v(i,w.charOffsets.start,w.charOffsets.end).filter(N=>!!N);return T.length===0?(console.error(` [Rebuild]  ${w.id} , Offset:`,w.charOffsets),w):{...w,rects:T}});l(f),A.set(S,f)}),e.value=A,console.log(" [Rebuild] ")},C=async()=>{const{data:g,text:A}=n.value;if(!g)return;n.value.visible=!1;const h=document.querySelector(`[data-page-number="${g.pageNumber}"] .textLayer`);if(!h)return;const S=`loading-${u++}`,f=v(h,g.offsets.start,g.offsets.end).filter(P=>!!P),w=(P,T)=>{const O=[...e.value.get(P)||[],T];l(O),e.value.set(P,O),e.value=new Map(e.value)};w(g.pageNumber,{id:S,originalText:A,type:"Warning",content:"...",isLoading:!0,charOffsets:g.offsets,rects:f.slice(0,1),verticalOffset:0});try{const P=A.replace(/[\n\r\t]+/g," ").replace(/\s+/g," ").trim(),T=await Sl({text:P,pageNumber:g.pageNumber});if(m(g.pageNumber,S),T.length===0){alert(" ");return}const N=g.pageFullText;T.forEach((O,B)=>{const z=(O.original||"").trim();if(!z)return;const j=K=>K.toLowerCase().replace(/[^a-z0-9]/gi,""),X=j(z),Y=N.substring(Math.max(0,g.offsets.start-5),g.offsets.end+5);let Z=-1,nt=-1;for(let K=0;K<Y.length;K++){for(let Q=K+z.length-2;Q<Y.length;Q++){const et=Y.substring(K,Q+1);if(j(et)===X){Z=Math.max(0,g.offsets.start-5)+K,nt=Math.max(0,g.offsets.start-5)+Q+1;break}}if(Z!==-1)break}const q=Z!==-1?{start:Z,end:nt}:g.offsets,U=v(h,q.start,q.end).filter(K=>!!K);w(g.pageNumber,{id:`ann-${u++}`,originalText:z,type:O.type==="Error"||O.type==="Warning"?O.type:"Warning",content:`${O.description}

 ${O.suggested_fix}`,isLoading:!1,charOffsets:q,rects:U,verticalOffset:0})})}catch(P){console.error("AI",P),m(g.pageNumber,S)}},m=(g,A)=>{const S=(e.value.get(g)||[]).filter(i=>i.id!==A);l(S),e.value.set(g,S),e.value=new Map(e.value)},p=()=>{confirm("")&&(e.value=new Map)};return(g,A)=>(Pt(),_t("div",Cl,[bt("header",El,[A[2]||(A[2]=bt("h1",{class:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-violet-600"},"AI PDF Copilot",-1)),e.value.size>0?(Pt(),_t("button",{key:0,onClick:p,class:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-transparent hover:border-red-100"},[...A[1]||(A[1]=[bt("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[bt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),vr("  ",-1)])])):Fe("",!0)]),bt("main",Tl,[te(gl,{onTextSelected:y,onPdfRendered:E,"annotations-by-page":e.value,onCloseAnnotation:m},null,8,["annotations-by-page"]),te(yl,{visible:n.value.visible,x:n.value.x,y:n.value.y,"selected-text":n.value.text,onClose:A[0]||(A[0]=h=>n.value.visible=!1),onAiCorrect:C},null,8,["visible","x","y","selected-text"])])]))}});ja(Rl).mount("#app");
